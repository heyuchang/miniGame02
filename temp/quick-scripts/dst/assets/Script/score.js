
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/score.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '72f7acBwR1I474pejqfLV0j', 'score');
// Script/score.js

"use strict";

/**
 * @author heyuchang
 * @file  UI 分数控制器
 */
var AC = require('GameAct');

cc.Class({
  "extends": cc.Component,
  properties: {
    scorePrefab: cc.Prefab,
    scoreParticlePrefab: cc.Prefab,
    mainScoreLabel: cc.Label,
    successDialog: require('successDialog'),
    characterMgr: require('character'),
    failDialog: cc.Node,
    multPropPrefab: cc.Prefab,
    // progressBar: require('progress'),
    // leftStepLabel: cc.Label,
    chainSpriteFrameArr: [cc.SpriteFrame],
    stepAniLabel: cc.Label,
    //提示小框
    tipBox: require('tipBox')
  },
  init: function init(g) {
    this._game = g;
    this._controller = g._controller;
    this.score = 0;
    this.leftStep = this._controller.config.json.originStep;
    this.chain = 1;
    this.level = 1;
    this.reviveTime = 0;
    this.closeMultLabel();
    this.levelData = g._controller.gameData.json.levelData;
    this.nameLabel.string = "萌心悦";
    this.progressBar.init(0, this.levelData[this.level - 1], this.level);
    this.leftStepLabel.string = this.leftStep;
    this.stepAniLabel.node.runAction(cc.hide());
    this.scoreTimer = [];
    this.currentAddedScore = 0;
    this.mainScoreLabel.node.active = false;
    this.characterMgr.showHeroCharacter(this.level);
    this.hideChainSprite();
    this.tipBox.init(this, 0);

    if (this._controller.social.node.active) {
      var height = this._controller.social.getHighestLevel();

      if (height) {
        this.onStep(this.levelData[+height - 1].giftStep);
      }
    }
  },
  start: function start() {
    this.generatePool();
    this.bindNode();
  },
  generatePool: function generatePool() {
    this.scorePool = new cc.NodePool();

    for (var i = 0; i < 20; i++) {
      var score = cc.instantiate(this.scorePrefab);
      this.scorePool.put(score);
    }

    this.scoreParticlePool = new cc.NodePool();

    for (var _i = 0; _i < 20; _i++) {
      var scoreParticle = cc.instantiate(this.scoreParticlePrefab);
      this.scoreParticlePool.put(scoreParticle);
    }

    this.multPropPool = new cc.NodePool();

    for (var _i2 = 0; _i2 < 3; _i2++) {
      var multProp = cc.instantiate(this.multPropPrefab);
      this.multPropPool.put(multProp);
    }
  },
  // 实例化单个方块
  instantiateScore: function instantiateScore(self, num, pos) {
    var score = null;

    if (self.scorePool && self.scorePool.size() > 0) {
      score = self.scorePool.get();
    } else {
      score = cc.instantiate(self.scorePrefab);
    }

    score.parent = this.scoreContainer;
    score.getComponent('scoreCell').init(self, num, pos);
    var scoreParticle = null;

    if (self.scoreParticlePool && self.scoreParticlePool.size() > 0) {
      scoreParticle = self.scoreParticlePool.get();
    } else {
      scoreParticle = cc.instantiate(self.scoreParticlePrefab);
    }

    scoreParticle.parent = this.scoreContainer;
    scoreParticle.getComponent('scoreParticle').init(self, pos, this._controller.config.json.scoreParticleTime);
  },
  bindNode: function bindNode() {
    this.leftStepLabel = this.node.getChildByName('UI').getChildByName('leftStepNode').getChildByName('Label').getComponent(cc.Label);
    this.progressBar = this.node.getChildByName('UI').getChildByName('scoreNode').getChildByName('progressBar').getComponent('progress');
    this.scoreContainer = this.node.getChildByName('UI').getChildByName('scoreGroup');
    this.multLabel = this.mainScoreLabel.node.getChildByName('mult').getComponent(cc.Label);
    this.nameLabel = this.node.getChildByName('UI').getChildByName('scoreNode').getChildByName('progressBar').getChildByName('name').getComponent(cc.Label); // 失败时更新失败UI

    this.chainSprite = this.node.getChildByName('UI').getChildByName('chainSprite').getComponent(cc.Sprite);
    this.failScore = this.failDialog.getChildByName('info').getChildByName('score').getComponent(cc.Label);
    this.failName = this.failDialog.getChildByName('info').getChildByName('level').getComponent(cc.Label);
    this.failSprite = this.failDialog.getChildByName('info').getChildByName('sprite').getComponent(cc.Sprite);
    this.failHighScore = this.failDialog.getChildByName('info').getChildByName('highScore').getComponent(cc.Label);
  },
  //--------------------- 分数控制 ---------------------
  // 增加 减少步数并且刷新UI
  onStep: function onStep(num) {
    var _this = this;

    this.leftStep += num;
    return new Promise(function (resolve, reject) {
      if (_this.leftStep < 0) {
        _this.leftStep = 0;

        _this.onGameOver();

        resolve(false);
      } else {
        resolve(true);
      }

      _this.leftStepLabel.string = _this.leftStep;

      if (num > 0) {
        _this.showStepAni(num);
      }
    });
  },
  //增加分数总控制 获取连击
  addScore: function addScore(pos, score) {
    var _this2 = this;

    score = score || this._controller.config.json.scoreBase; // 一次消除可以叠chain

    if (this.chainTimer) {
      clearTimeout(this.chainTimer);
    }

    this.initCurrentScoreLabel();
    this.chainTimer = setTimeout(function () {
      _this2.onCurrentScoreLabel(_this2.currentAddedScore, {
        x: -60,
        y: 355
      }, cc.callFunc(function () {
        _this2.score += _this2.currentAddedScore * _this2.multiple;

        _this2.checkLevelUp();

        _this2.chain = 1;

        _this2.closeMultLabel();

        _this2.hideChainSprite();

        _this2.currentAddedScore = 0;
        _this2.mainScoreLabel.node.active = false;
      }, _this2));
    }, 500 / 1 // (cc.game.getFrameRate() / 60)
    );
    var addScore = score == this._controller.config.json.scoreBase ? score + (this.chain > 16 ? 16 : this.chain - 1) * 10 : score; // let addScore = score == 10 ? score * (this.chain > 10 ? 10 : this.chain) : score

    this.currentAddedScore += addScore;
    this.mainScoreLabel.string = this.currentAddedScore;
    this.instantiateScore(this, addScore, pos);
    this.chain++;
    this.checkChain();
  },
  // 判断连击
  checkChain: function checkChain() {
    var _this3 = this;

    if (this.checkChainTimer) {
      clearTimeout(this.checkChainTimer);
    }

    this.checkChainTimer = setTimeout(function () {
      var config = _this3._controller.config.json.chainConfig;

      for (var i = 0; i < config.length; i++) {
        if (_this3.chain <= config[i].max && _this3.chain >= config[i].min) {
          //  console.log(config[i].text)
          _this3.showChainSprite(i);

          return;
        }
      }
    }, 200);
  },
  showChainSprite: function showChainSprite(id) {
    this.chainSprite.spriteFrame = this.chainSpriteFrameArr[id];
    this.chainSprite.node.scale = 0.5;
    this.chainSprite.node.active = true;
    this.chainSprite.node.runAction(AC.popOut(0.3));
  },
  hideChainSprite: function hideChainSprite() {
    this.chainSprite.node.active = false;
  },
  checkLevelUp: function checkLevelUp() {
    if (this.level < this.levelData.length && this.score >= this.levelData[this.level - 1].score) {
      this.level++;
      this.level > this.levelData.length + 1 ? this.levelLimit() : this.onLevelUp();
    }

    this.progressBar.init(this.score, this.levelData[this.level - 1], this.level);
  },
  // 增加倍数
  addMult: function addMult(color, pos) {
    //TODO: 动态生成一个图片 移动到multLabel上 有bug
    // if (this.multPropPool.size() > 0) {
    //   let multProp = this.multPropPool.get()
    //   multProp.parent = this.mainScoreLabel.node
    //   multProp.x = pos.x
    //   multProp.y = pos.y
    //   multProp.getComponent(cc.Sprite).spriteFrame = this._game.propSpriteFrame[color - 1]
    //   multProp.runAction(cc.sequence(cc.moveTo(0.2, 187, 0), cc.callFunc(() => {
    //     this.multPropPool.put(multProp)
    //   })))
    // }
    if (this.multiple < this._controller.config.json.maxMultiple) {
      this.multiple *= 2;
      this.showMultLabel();
    }
  },
  // 关闭倍数的数字显示
  closeMultLabel: function closeMultLabel() {
    this.multiple = 1;
    this.multLabel.node.active = false;
  },
  showMultLabel: function showMultLabel() {
    this.multLabel.node.scale = 0.5;
    this.multLabel.string = this.multiple;
    this.multLabel.node.active = true;
    this.multLabel.node.runAction(AC.popOut(0.3));
  },
  // 增加分数倍数
  initCurrentScoreLabel: function initCurrentScoreLabel() {
    this.mainScoreLabel.node.active = true;
    this.mainScoreLabel.node.x = 0;
    this.mainScoreLabel.node.y = 0;
    this.mainScoreLabel.node.scale = 1;
  },
  // 生成小的分数节点
  onCurrentScoreLabel: function onCurrentScoreLabel(num, pos, callback) {
    // TODO: 增加一个撒花特效
    this.mainScoreLabel.string = num;
    var action = cc.spawn(cc.moveTo(0.2, pos.x, pos.y), cc.scaleTo(0.2, 0.4)).easing(cc.easeBackOut());
    var seq = cc.sequence(action, callback);
    this.mainScoreLabel.node.runAction(seq);
  },
  // 升级
  onLevelUp: function onLevelUp() {
    this._controller.pageMgr.addPage(2);

    this._controller.pageMgr.addPage(3);

    this._controller.musicManager.onWin();

    this.successDialog.init(this, this.level, this.levelData, this.score); //升级之后的等级

    this.characterMgr.onLevelUp();
    this.characterMgr.onSuccessDialog(this.level);
    this._game._status = 2;

    if (this._controller.social.node.active) {
      this._controller.social.openBannerAdv();
    }
  },
  // 等级限制
  levelLimit: function levelLimit() {
    //console.log('等级达到上限')
    this.hideNextLevelData();
  },
  // 点击升级按钮
  onLevelUpButton: function onLevelUpButton(_double) {
    var _this4 = this;

    console.log(_double);

    if (this.isLevelUp) {
      return;
    } else {
      this.isLevelUp = true;
    }

    setTimeout(function () {
      _this4.isLevelUp = false;
    }, 500);

    if (_double && _double.currentTarget) {
      _double = 1;
    } else {
      _double = _double || 1;
    }

    this._controller.pageMgr.onOpenPage(1);

    this.initCurrentScoreLabel();
    this.mainScoreLabel.string = this.levelData[this.level - 2].step * _double;
    this.characterMgr.onLevelUpBtn(this.level);
    this.nameLabel.string = this.levelData[this.level - 1].name;
    setTimeout(function () {
      _this4.onCurrentScoreLabel(_this4.levelData[_this4.level - 2].step * _double, {
        x: -248,
        y: 350
      }, cc.callFunc(function () {
        // this.tipBox.init(this) 每次升级就咏诗
        _this4.onStep(_this4.levelData[_this4.level - 2].step * _double).then();

        _this4._game._status = 1;
        _this4.mainScoreLabel.node.active = false;
      }));
    }, 300);
    this.showNextLevelData();
    this.checkLevelUp();
  },
  // todo: 新增一个 动画 数字上浮和缩放
  showStepAni: function showStepAni(num) {
    this.stepAniLabel.string = '+' + (num + '');
    this.stepAniLabel.node.x = -248;
    this.stepAniLabel.node.y = 400;
    this.stepAniLabel.node.runAction(cc.sequence(cc.toggleVisibility(), cc.moveBy(0.6, 0, 60), cc.toggleVisibility()));
    var action = cc.sequence(cc.scaleTo(0.2, 0.8), AC.popOut(0.8));
    this.leftStepLabel.node.parent.runAction(action);
  },
  // 游戏结束
  // todo 复活
  onGameOver: function onGameOver(isTrue) {
    isTrue = isTrue || 0;

    if (this._game._status != 3 && (isTrue || this.reviveTime >= 3)) {
      this._game.gameOver();

      this.updateFailPage();

      if (this._controller.social.node.active) {
        // 仅上传分数
        this._controller.social.onGameOver(this.level, this.score);
      }
    } else if (!isTrue) {
      this._game.askRevive();
    }
  },
  onDoubleStepBtn: function onDoubleStepBtn() {
    if (this._controller.social.node.active) {
      this._controller.social.onReviveButton(0);
    } else {
      this.onLevelUpButton(2);
    }
  },
  onDoubleStep: function onDoubleStep() {
    this.onLevelUpButton(2);
  },
  onRevive: function onRevive() {
    this.reviveTime += 1;
    this.onStep(5).then();
  },
  // 展示下一级的信息
  showNextLevelData: function showNextLevelData() {
    var nextLevelData = this.levelData[this.level];
  },
  // 达到最高级之后 隐藏
  hideNextLevelData: function hideNextLevelData() {},
  updateFailPage: function updateFailPage() {
    this.failScore.string = " " + (this.score + '');
    this.characterMgr.onFail(this.level);
    this.failName.string = this.levelData[this.level - 1].name; //this.failHighScore.string = "正在获取您的最高分..."
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxzY29yZS5qcyJdLCJuYW1lcyI6WyJBQyIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsInNjb3JlUHJlZmFiIiwiUHJlZmFiIiwic2NvcmVQYXJ0aWNsZVByZWZhYiIsIm1haW5TY29yZUxhYmVsIiwiTGFiZWwiLCJzdWNjZXNzRGlhbG9nIiwiY2hhcmFjdGVyTWdyIiwiZmFpbERpYWxvZyIsIk5vZGUiLCJtdWx0UHJvcFByZWZhYiIsImNoYWluU3ByaXRlRnJhbWVBcnIiLCJTcHJpdGVGcmFtZSIsInN0ZXBBbmlMYWJlbCIsInRpcEJveCIsImluaXQiLCJnIiwiX2dhbWUiLCJfY29udHJvbGxlciIsInNjb3JlIiwibGVmdFN0ZXAiLCJjb25maWciLCJqc29uIiwib3JpZ2luU3RlcCIsImNoYWluIiwibGV2ZWwiLCJyZXZpdmVUaW1lIiwiY2xvc2VNdWx0TGFiZWwiLCJsZXZlbERhdGEiLCJnYW1lRGF0YSIsIm5hbWVMYWJlbCIsInN0cmluZyIsInByb2dyZXNzQmFyIiwibGVmdFN0ZXBMYWJlbCIsIm5vZGUiLCJydW5BY3Rpb24iLCJoaWRlIiwic2NvcmVUaW1lciIsImN1cnJlbnRBZGRlZFNjb3JlIiwiYWN0aXZlIiwic2hvd0hlcm9DaGFyYWN0ZXIiLCJoaWRlQ2hhaW5TcHJpdGUiLCJzb2NpYWwiLCJoZWlnaHQiLCJnZXRIaWdoZXN0TGV2ZWwiLCJvblN0ZXAiLCJnaWZ0U3RlcCIsInN0YXJ0IiwiZ2VuZXJhdGVQb29sIiwiYmluZE5vZGUiLCJzY29yZVBvb2wiLCJOb2RlUG9vbCIsImkiLCJpbnN0YW50aWF0ZSIsInB1dCIsInNjb3JlUGFydGljbGVQb29sIiwic2NvcmVQYXJ0aWNsZSIsIm11bHRQcm9wUG9vbCIsIm11bHRQcm9wIiwiaW5zdGFudGlhdGVTY29yZSIsInNlbGYiLCJudW0iLCJwb3MiLCJzaXplIiwiZ2V0IiwicGFyZW50Iiwic2NvcmVDb250YWluZXIiLCJnZXRDb21wb25lbnQiLCJzY29yZVBhcnRpY2xlVGltZSIsImdldENoaWxkQnlOYW1lIiwibXVsdExhYmVsIiwiY2hhaW5TcHJpdGUiLCJTcHJpdGUiLCJmYWlsU2NvcmUiLCJmYWlsTmFtZSIsImZhaWxTcHJpdGUiLCJmYWlsSGlnaFNjb3JlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvbkdhbWVPdmVyIiwic2hvd1N0ZXBBbmkiLCJhZGRTY29yZSIsInNjb3JlQmFzZSIsImNoYWluVGltZXIiLCJjbGVhclRpbWVvdXQiLCJpbml0Q3VycmVudFNjb3JlTGFiZWwiLCJzZXRUaW1lb3V0Iiwib25DdXJyZW50U2NvcmVMYWJlbCIsIngiLCJ5IiwiY2FsbEZ1bmMiLCJtdWx0aXBsZSIsImNoZWNrTGV2ZWxVcCIsImNoZWNrQ2hhaW4iLCJjaGVja0NoYWluVGltZXIiLCJjaGFpbkNvbmZpZyIsImxlbmd0aCIsIm1heCIsIm1pbiIsInNob3dDaGFpblNwcml0ZSIsImlkIiwic3ByaXRlRnJhbWUiLCJzY2FsZSIsInBvcE91dCIsImxldmVsTGltaXQiLCJvbkxldmVsVXAiLCJhZGRNdWx0IiwiY29sb3IiLCJtYXhNdWx0aXBsZSIsInNob3dNdWx0TGFiZWwiLCJjYWxsYmFjayIsImFjdGlvbiIsInNwYXduIiwibW92ZVRvIiwic2NhbGVUbyIsImVhc2luZyIsImVhc2VCYWNrT3V0Iiwic2VxIiwic2VxdWVuY2UiLCJwYWdlTWdyIiwiYWRkUGFnZSIsIm11c2ljTWFuYWdlciIsIm9uV2luIiwib25TdWNjZXNzRGlhbG9nIiwiX3N0YXR1cyIsIm9wZW5CYW5uZXJBZHYiLCJoaWRlTmV4dExldmVsRGF0YSIsIm9uTGV2ZWxVcEJ1dHRvbiIsImRvdWJsZSIsImNvbnNvbGUiLCJsb2ciLCJpc0xldmVsVXAiLCJjdXJyZW50VGFyZ2V0Iiwib25PcGVuUGFnZSIsInN0ZXAiLCJvbkxldmVsVXBCdG4iLCJuYW1lIiwidGhlbiIsInNob3dOZXh0TGV2ZWxEYXRhIiwidG9nZ2xlVmlzaWJpbGl0eSIsIm1vdmVCeSIsImlzVHJ1ZSIsImdhbWVPdmVyIiwidXBkYXRlRmFpbFBhZ2UiLCJhc2tSZXZpdmUiLCJvbkRvdWJsZVN0ZXBCdG4iLCJvblJldml2ZUJ1dHRvbiIsIm9uRG91YmxlU3RlcCIsIm9uUmV2aXZlIiwibmV4dExldmVsRGF0YSIsIm9uRmFpbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUlBLElBQUlBLEVBQUUsR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBaEI7O0FBRUFDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ1AsYUFBU0QsRUFBRSxDQUFDRSxTQURMO0FBRVBDLEVBQUFBLFVBQVUsRUFBRTtBQUNWQyxJQUFBQSxXQUFXLEVBQUVKLEVBQUUsQ0FBQ0ssTUFETjtBQUVWQyxJQUFBQSxtQkFBbUIsRUFBRU4sRUFBRSxDQUFDSyxNQUZkO0FBR1ZFLElBQUFBLGNBQWMsRUFBRVAsRUFBRSxDQUFDUSxLQUhUO0FBSVZDLElBQUFBLGFBQWEsRUFBRVYsT0FBTyxDQUFDLGVBQUQsQ0FKWjtBQUtWVyxJQUFBQSxZQUFZLEVBQUVYLE9BQU8sQ0FBQyxXQUFELENBTFg7QUFNVlksSUFBQUEsVUFBVSxFQUFFWCxFQUFFLENBQUNZLElBTkw7QUFPVkMsSUFBQUEsY0FBYyxFQUFFYixFQUFFLENBQUNLLE1BUFQ7QUFRVjtBQUNBO0FBQ0FTLElBQUFBLG1CQUFtQixFQUFFLENBQUNkLEVBQUUsQ0FBQ2UsV0FBSixDQVZYO0FBV1ZDLElBQUFBLFlBQVksRUFBRWhCLEVBQUUsQ0FBQ1EsS0FYUDtBQWFWO0FBQ0FTLElBQUFBLE1BQU0sRUFBRWxCLE9BQU8sQ0FBQyxRQUFEO0FBZEwsR0FGTDtBQWtCUG1CLEVBQUFBLElBbEJPLGdCQWtCRkMsQ0FsQkUsRUFrQkM7QUFDTixTQUFLQyxLQUFMLEdBQWFELENBQWI7QUFDQSxTQUFLRSxXQUFMLEdBQW1CRixDQUFDLENBQUNFLFdBQXJCO0FBQ0EsU0FBS0MsS0FBTCxHQUFhLENBQWI7QUFDQSxTQUFLQyxRQUFMLEdBQWdCLEtBQUtGLFdBQUwsQ0FB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QUFDRixHQS9TTTtBQWdUUEMsRUFBQUEsZUFoVE8sNkJBZ1RXO0FBQ2hCLFFBQUksS0FBS2hJLFdBQUwsQ0FBaUJ3QixNQUFqQixDQUF3QlIsSUFBeEIsQ0FBNkJLLE1BQWpDLEVBQXlDO0FBQ3ZDLFdBQUtyQixXQUFMLENBQWlCd0IsTUFBakIsQ0FBd0J5RyxjQUF4QixDQUF1QyxDQUF2QztBQUNELEtBRkQsTUFFTztBQUNMLFdBQUtuQixlQUFMLENBQXFCLENBQXJCO0FBQ0Q7QUFDRixHQXRUTTtBQXVUUG9CLEVBQUFBLFlBdlRPLDBCQXVUUTtBQUNiLFNBQUtwQixlQUFMLENBQXFCLENBQXJCO0FBQ0QsR0F6VE07QUEwVFBxQixFQUFBQSxRQTFUTyxzQkEwVEk7QUFDVCxTQUFLM0gsVUFBTCxJQUFtQixDQUFuQjtBQUNBLFNBQUttQixNQUFMLENBQVksQ0FBWixFQUFlNkYsSUFBZjtBQUNELEdBN1RNO0FBOFRQO0FBQ0FDLEVBQUFBLGlCQS9UTywrQkErVGE7QUFDbEIsUUFBSVcsYUFBYSxHQUFHLEtBQUsxSCxTQUFMLENBQWUsS0FBS0gsS0FBcEIsQ0FBcEI7QUFDRCxHQWpVTTtBQWtVUDtBQUNBc0csRUFBQUEsaUJBblVPLCtCQW1VYSxDQUVuQixDQXJVTTtBQXNVUGlCLEVBQUFBLGNBdFVPLDRCQXNVVTtBQUNmLFNBQUt2RSxTQUFMLENBQWUxQyxNQUFmLEdBQXdCLE9BQU8sS0FBS1osS0FBTCxHQUFhLEVBQXBCLENBQXhCO0FBQ0EsU0FBS1osWUFBTCxDQUFrQmdKLE1BQWxCLENBQXlCLEtBQUs5SCxLQUE5QjtBQUNBLFNBQUtpRCxRQUFMLENBQWMzQyxNQUFkLEdBQXVCLEtBQUtILFNBQUwsQ0FBZSxLQUFLSCxLQUFMLEdBQWEsQ0FBNUIsRUFBK0JnSCxJQUF0RCxDQUhlLENBSWY7QUFDRDtBQTNVTSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgaGV5dWNoYW5nXG4gKiBAZmlsZSAgVUkg5YiG5pWw5o6n5Yi25ZmoXG4gKi9cbnZhciBBQyA9IHJlcXVpcmUoJ0dhbWVBY3QnKVxuXG5jYy5DbGFzcyh7XG4gIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiAgcHJvcGVydGllczoge1xuICAgIHNjb3JlUHJlZmFiOiBjYy5QcmVmYWIsXG4gICAgc2NvcmVQYXJ0aWNsZVByZWZhYjogY2MuUHJlZmFiLFxuICAgIG1haW5TY29yZUxhYmVsOiBjYy5MYWJlbCxcbiAgICBzdWNjZXNzRGlhbG9nOiByZXF1aXJlKCdzdWNjZXNzRGlhbG9nJyksXG4gICAgY2hhcmFjdGVyTWdyOiByZXF1aXJlKCdjaGFyYWN0ZXInKSxcbiAgICBmYWlsRGlhbG9nOiBjYy5Ob2RlLFxuICAgIG11bHRQcm9wUHJlZmFiOiBjYy5QcmVmYWIsXG4gICAgLy8gcHJvZ3Jlc3NCYXI6IHJlcXVpcmUoJ3Byb2dyZXNzJyksXG4gICAgLy8gbGVmdFN0ZXBMYWJlbDogY2MuTGFiZWwsXG4gICAgY2hhaW5TcHJpdGVGcmFtZUFycjogW2NjLlNwcml0ZUZyYW1lXSxcbiAgICBzdGVwQW5pTGFiZWw6IGNjLkxhYmVsLFxuXG4gICAgLy/mj5DnpLrlsI/moYZcbiAgICB0aXBCb3g6IHJlcXVpcmUoJ3RpcEJveCcpXG4gIH0sXG4gIGluaXQoZykge1xuICAgIHRoaXMuX2dhbWUgPSBnXG4gICAgdGhpcy5fY29udHJvbGxlciA9IGcuX2NvbnRyb2xsZXJcbiAgICB0aGlzLnNjb3JlID0gMFxuICAgIHRoaXMubGVmdFN0ZXAgPSB0aGlzLl9jb250cm9sbGVyLmNvbmZpZy5qc29uLm9yaWdpblN0ZXBcbiAgICB0aGlzLmNoYWluID0gMVxuICAgIHRoaXMubGV2ZWwgPSAxXG4gICAgdGhpcy5yZXZpdmVUaW1lID0gMFxuICAgIHRoaXMuY2xvc2VNdWx0TGFiZWwoKVxuICAgIHRoaXMubGV2ZWxEYXRhID0gZy5fY29udHJvbGxlci5nYW1lRGF0YS5qc29uLmxldmVsRGF0YVxuICAgIHRoaXMubmFtZUxhYmVsLnN0cmluZyA9IFwi6JCM5b+D5oKmXCJcbiAgICB0aGlzLnByb2dyZXNzQmFyLmluaXQoMCwgdGhpcy5sZXZlbERhdGFbdGhpcy5sZXZlbCAtIDFdLCB0aGlzLmxldmVsKVxuICAgIHRoaXMubGVmdFN0ZXBMYWJlbC5zdHJpbmcgPSB0aGlzLmxlZnRTdGVwXG4gICAgdGhpcy5zdGVwQW5pTGFiZWwubm9kZS5ydW5BY3Rpb24oY2MuaGlkZSgpKVxuICAgIHRoaXMuc2NvcmVUaW1lciA9IFtdXG4gICAgdGhpcy5jdXJyZW50QWRkZWRTY29yZSA9IDBcbiAgICB0aGlzLm1haW5TY29yZUxhYmVsLm5vZGUuYWN0aXZlID0gZmFsc2VcbiAgICB0aGlzLmNoYXJhY3Rlck1nci5zaG93SGVyb0NoYXJhY3Rlcih0aGlzLmxldmVsKVxuICAgIHRoaXMuaGlkZUNoYWluU3ByaXRlKClcblxuICAgIHRoaXMudGlwQm94LmluaXQodGhpcywgMClcbiAgICBpZiAodGhpcy5fY29udHJvbGxlci5zb2NpYWwubm9kZS5hY3RpdmUpIHtcbiAgICAgIGxldCBoZWlnaHQgPSB0aGlzLl9jb250cm9sbGVyLnNvY2lhbC5nZXRIaWdoZXN0TGV2ZWwoKVxuICAgICAgaWYgKGhlaWdodCkge1xuICAgICAgICB0aGlzLm9uU3RlcCh0aGlzLmxldmVsRGF0YVsraGVpZ2h0IC0gMV0uZ2lmdFN0ZXApXG4gICAgICB9XG4gICAgfVxuICB9LFxuICBzdGFydCgpIHtcbiAgICB0aGlzLmdlbmVyYXRlUG9vbCgpXG4gICAgdGhpcy5iaW5kTm9kZSgpXG4gIH0sXG4gIGdlbmVyYXRlUG9vbCgpIHtcbiAgICB0aGlzLnNjb3JlUG9vbCA9IG5ldyBjYy5Ob2RlUG9vbCgpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XG4gICAgICBsZXQgc2NvcmUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnNjb3JlUHJlZmFiKVxuICAgICAgdGhpcy5zY29yZVBvb2wucHV0KHNjb3JlKVxuICAgIH1cbiAgICB0aGlzLnNjb3JlUGFydGljbGVQb29sID0gbmV3IGNjLk5vZGVQb29sKClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpKyspIHtcbiAgICAgIGxldCBzY29yZVBhcnRpY2xlID0gY2MuaW5zdGFudGlhdGUodGhpcy5zY29yZVBhcnRpY2xlUHJlZmFiKVxuICAgICAgdGhpcy5zY29yZVBhcnRpY2xlUG9vbC5wdXQoc2NvcmVQYXJ0aWNsZSlcbiAgICB9XG4gICAgdGhpcy5tdWx0UHJvcFBvb2wgPSBuZXcgY2MuTm9kZVBvb2woKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBsZXQgbXVsdFByb3AgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLm11bHRQcm9wUHJlZmFiKVxuICAgICAgdGhpcy5tdWx0UHJvcFBvb2wucHV0KG11bHRQcm9wKVxuICAgIH1cbiAgfSxcbiAgLy8g5a6e5L6L5YyW5Y2V5Liq5pa55Z2XXG4gIGluc3RhbnRpYXRlU2NvcmUoc2VsZiwgbnVtLCBwb3MpIHtcbiAgICBsZXQgc2NvcmUgPSBudWxsXG4gICAgaWYgKHNlbGYuc2NvcmVQb29sICYmIHNlbGYuc2NvcmVQb29sLnNpemUoKSA+IDApIHtcbiAgICAgIHNjb3JlID0gc2VsZi5zY29yZVBvb2wuZ2V0KClcbiAgICB9IGVsc2Uge1xuICAgICAgc2NvcmUgPSBjYy5pbnN0YW50aWF0ZShzZWxmLnNjb3JlUHJlZmFiKVxuICAgIH1cbiAgICBzY29yZS5wYXJlbnQgPSB0aGlzLnNjb3JlQ29udGFpbmVyXG4gICAgc2NvcmUuZ2V0Q29tcG9uZW50KCdzY29yZUNlbGwnKS5pbml0KHNlbGYsIG51bSwgcG9zKVxuXG4gICAgbGV0IHNjb3JlUGFydGljbGUgPSBudWxsXG4gICAgaWYgKHNlbGYuc2NvcmVQYXJ0aWNsZVBvb2wgJiYgc2VsZi5zY29yZVBhcnRpY2xlUG9vbC5zaXplKCkgPiAwKSB7XG4gICAgICBzY29yZVBhcnRpY2xlID0gc2VsZi5zY29yZVBhcnRpY2xlUG9vbC5nZXQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBzY29yZVBhcnRpY2xlID0gY2MuaW5zdGFudGlhdGUoc2VsZi5zY29yZVBhcnRpY2xlUHJlZmFiKVxuICAgIH1cbiAgICBzY29yZVBhcnRpY2xlLnBhcmVudCA9IHRoaXMuc2NvcmVDb250YWluZXJcbiAgICBzY29yZVBhcnRpY2xlLmdldENvbXBvbmVudCgnc2NvcmVQYXJ0aWNsZScpLmluaXQoc2VsZiwgcG9zLCB0aGlzLl9jb250cm9sbGVyLmNvbmZpZy5qc29uLnNjb3JlUGFydGljbGVUaW1lKVxuICB9LFxuICBiaW5kTm9kZSgpIHtcbiAgICB0aGlzLmxlZnRTdGVwTGFiZWwgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ1VJJykuZ2V0Q2hpbGRCeU5hbWUoJ2xlZnRTdGVwTm9kZScpLmdldENoaWxkQnlOYW1lKCdMYWJlbCcpLmdldENvbXBvbmVudChjYy5MYWJlbClcbiAgICB0aGlzLnByb2dyZXNzQmFyID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKCdVSScpLmdldENoaWxkQnlOYW1lKCdzY29yZU5vZGUnKS5nZXRDaGlsZEJ5TmFtZSgncHJvZ3Jlc3NCYXInKS5nZXRDb21wb25lbnQoJ3Byb2dyZXNzJylcbiAgICB0aGlzLnNjb3JlQ29udGFpbmVyID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKCdVSScpLmdldENoaWxkQnlOYW1lKCdzY29yZUdyb3VwJylcbiAgICB0aGlzLm11bHRMYWJlbCA9IHRoaXMubWFpblNjb3JlTGFiZWwubm9kZS5nZXRDaGlsZEJ5TmFtZSgnbXVsdCcpLmdldENvbXBvbmVudChjYy5MYWJlbClcbiAgICB0aGlzLm5hbWVMYWJlbCA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZSgnVUknKS5nZXRDaGlsZEJ5TmFtZSgnc2NvcmVOb2RlJykuZ2V0Q2hpbGRCeU5hbWUoJ3Byb2dyZXNzQmFyJykuZ2V0Q2hpbGRCeU5hbWUoJ25hbWUnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpXG4gICAgLy8g5aSx6LSl5pe25pu05paw5aSx6LSlVUlcbiAgICB0aGlzLmNoYWluU3ByaXRlID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKCdVSScpLmdldENoaWxkQnlOYW1lKCdjaGFpblNwcml0ZScpLmdldENvbXBvbmVudChjYy5TcHJpdGUpXG4gICAgdGhpcy5mYWlsU2NvcmUgPSB0aGlzLmZhaWxEaWFsb2cuZ2V0Q2hpbGRCeU5hbWUoJ2luZm8nKS5nZXRDaGlsZEJ5TmFtZSgnc2NvcmUnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpXG4gICAgdGhpcy5mYWlsTmFtZSA9IHRoaXMuZmFpbERpYWxvZy5nZXRDaGlsZEJ5TmFtZSgnaW5mbycpLmdldENoaWxkQnlOYW1lKCdsZXZlbCcpLmdldENvbXBvbmVudChjYy5MYWJlbClcbiAgICB0aGlzLmZhaWxTcHJpdGUgPSB0aGlzLmZhaWxEaWFsb2cuZ2V0Q2hpbGRCeU5hbWUoJ2luZm8nKS5nZXRDaGlsZEJ5TmFtZSgnc3ByaXRlJykuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSlcbiAgICB0aGlzLmZhaWxIaWdoU2NvcmUgPSB0aGlzLmZhaWxEaWFsb2cuZ2V0Q2hpbGRCeU5hbWUoJ2luZm8nKS5nZXRDaGlsZEJ5TmFtZSgnaGlnaFNjb3JlJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKVxuICB9LFxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLSDliIbmlbDmjqfliLYgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIOWinuWKoCDlh4/lsJHmraXmlbDlubbkuJTliLfmlrBVSVxuICBvblN0ZXAobnVtKSB7XG4gICAgdGhpcy5sZWZ0U3RlcCArPSBudW1cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKHRoaXMubGVmdFN0ZXAgPCAwKSB7XG4gICAgICAgIHRoaXMubGVmdFN0ZXAgPSAwXG4gICAgICAgIHRoaXMub25HYW1lT3ZlcigpXG4gICAgICAgIHJlc29sdmUoZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHRydWUpXG4gICAgICB9XG4gICAgICB0aGlzLmxlZnRTdGVwTGFiZWwuc3RyaW5nID0gdGhpcy5sZWZ0U3RlcFxuICAgICAgaWYgKG51bSA+IDApIHtcbiAgICAgICAgdGhpcy5zaG93U3RlcEFuaShudW0pXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICAvL+WinuWKoOWIhuaVsOaAu+aOp+WItiDojrflj5bov57lh7tcbiAgYWRkU2NvcmUocG9zLCBzY29yZSkge1xuICAgIHNjb3JlID0gc2NvcmUgfHwgdGhpcy5fY29udHJvbGxlci5jb25maWcuanNvbi5zY29yZUJhc2VcbiAgICAvLyDkuIDmrKHmtojpmaTlj6/ku6Xlj6BjaGFpblxuICAgIGlmICh0aGlzLmNoYWluVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNoYWluVGltZXIpXG4gICAgfVxuICAgIHRoaXMuaW5pdEN1cnJlbnRTY29yZUxhYmVsKClcbiAgICB0aGlzLmNoYWluVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5vbkN1cnJlbnRTY29yZUxhYmVsKHRoaXMuY3VycmVudEFkZGVkU2NvcmUsIHtcbiAgICAgICAgICB4OiAtNjAsXG4gICAgICAgICAgeTogMzU1XG4gICAgICAgIH0sIGNjLmNhbGxGdW5jKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnNjb3JlICs9IHRoaXMuY3VycmVudEFkZGVkU2NvcmUgKiB0aGlzLm11bHRpcGxlXG4gICAgICAgICAgdGhpcy5jaGVja0xldmVsVXAoKVxuICAgICAgICAgIHRoaXMuY2hhaW4gPSAxXG4gICAgICAgICAgdGhpcy5jbG9zZU11bHRMYWJlbCgpXG4gICAgICAgICAgdGhpcy5oaWRlQ2hhaW5TcHJpdGUoKVxuICAgICAgICAgIHRoaXMuY3VycmVudEFkZGVkU2NvcmUgPSAwXG4gICAgICAgICAgdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlLmFjdGl2ZSA9IGZhbHNlXG4gICAgICAgIH0sIHRoaXMpKVxuICAgICAgfSwgNTAwIC8gMVxuICAgICAgLy8gKGNjLmdhbWUuZ2V0RnJhbWVSYXRlKCkgLyA2MClcbiAgICApXG4gICAgbGV0IGFkZFNjb3JlID0gc2NvcmUgPT0gdGhpcy5fY29udHJvbGxlci5jb25maWcuanNvbi5zY29yZUJhc2UgPyAoc2NvcmUgKyAodGhpcy5jaGFpbiA+IDE2ID8gMTYgOiAodGhpcy5jaGFpbiAtIDEpKSAqIDEwKSA6IHNjb3JlXG4gICAgLy8gbGV0IGFkZFNjb3JlID0gc2NvcmUgPT0gMTAgPyBzY29yZSAqICh0aGlzLmNoYWluID4gMTAgPyAxMCA6IHRoaXMuY2hhaW4pIDogc2NvcmVcbiAgICB0aGlzLmN1cnJlbnRBZGRlZFNjb3JlICs9IGFkZFNjb3JlXG4gICAgdGhpcy5tYWluU2NvcmVMYWJlbC5zdHJpbmcgPSB0aGlzLmN1cnJlbnRBZGRlZFNjb3JlXG4gICAgdGhpcy5pbnN0YW50aWF0ZVNjb3JlKHRoaXMsIGFkZFNjb3JlLCBwb3MpXG4gICAgdGhpcy5jaGFpbisrXG4gICAgdGhpcy5jaGVja0NoYWluKClcbiAgfSxcbiAgLy8g5Yik5pat6L+e5Ye7XG4gIGNoZWNrQ2hhaW4oKSB7XG4gICAgaWYgKHRoaXMuY2hlY2tDaGFpblRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5jaGVja0NoYWluVGltZXIpXG4gICAgfVxuICAgIHRoaXMuY2hlY2tDaGFpblRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBsZXQgY29uZmlnID0gdGhpcy5fY29udHJvbGxlci5jb25maWcuanNvbi5jaGFpbkNvbmZpZ1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRoaXMuY2hhaW4gPD0gY29uZmlnW2ldLm1heCAmJiB0aGlzLmNoYWluID49IGNvbmZpZ1tpXS5taW4pIHtcbiAgICAgICAgICAvLyAgY29uc29sZS5sb2coY29uZmlnW2ldLnRleHQpXG4gICAgICAgICAgdGhpcy5zaG93Q2hhaW5TcHJpdGUoaSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDIwMClcbiAgfSxcbiAgc2hvd0NoYWluU3ByaXRlKGlkKSB7XG4gICAgdGhpcy5jaGFpblNwcml0ZS5zcHJpdGVGcmFtZSA9IHRoaXMuY2hhaW5TcHJpdGVGcmFtZUFycltpZF1cbiAgICB0aGlzLmNoYWluU3ByaXRlLm5vZGUuc2NhbGUgPSAwLjVcbiAgICB0aGlzLmNoYWluU3ByaXRlLm5vZGUuYWN0aXZlID0gdHJ1ZVxuICAgIHRoaXMuY2hhaW5TcHJpdGUubm9kZS5ydW5BY3Rpb24oQUMucG9wT3V0KDAuMykpXG4gIH0sXG4gIGhpZGVDaGFpblNwcml0ZSgpIHtcbiAgICB0aGlzLmNoYWluU3ByaXRlLm5vZGUuYWN0aXZlID0gZmFsc2VcbiAgfSxcbiAgY2hlY2tMZXZlbFVwKCkge1xuICAgIGlmICh0aGlzLmxldmVsIDwgdGhpcy5sZXZlbERhdGEubGVuZ3RoICYmIHRoaXMuc2NvcmUgPj0gdGhpcy5sZXZlbERhdGFbdGhpcy5sZXZlbCAtIDFdLnNjb3JlKSB7XG4gICAgICB0aGlzLmxldmVsKytcbiAgICAgIHRoaXMubGV2ZWwgPiAodGhpcy5sZXZlbERhdGEubGVuZ3RoICsgMSkgPyB0aGlzLmxldmVsTGltaXQoKSA6IHRoaXMub25MZXZlbFVwKClcbiAgICB9XG4gICAgdGhpcy5wcm9ncmVzc0Jhci5pbml0KHRoaXMuc2NvcmUsIHRoaXMubGV2ZWxEYXRhW3RoaXMubGV2ZWwgLSAxXSwgdGhpcy5sZXZlbClcbiAgfSxcbiAgLy8g5aKe5Yqg5YCN5pWwXG4gIGFkZE11bHQoY29sb3IsIHBvcykge1xuICAgIC8vVE9ETzog5Yqo5oCB55Sf5oiQ5LiA5Liq5Zu+54mHIOenu+WKqOWIsG11bHRMYWJlbOS4iiDmnIlidWdcbiAgICAvLyBpZiAodGhpcy5tdWx0UHJvcFBvb2wuc2l6ZSgpID4gMCkge1xuICAgIC8vICAgbGV0IG11bHRQcm9wID0gdGhpcy5tdWx0UHJvcFBvb2wuZ2V0KClcbiAgICAvLyAgIG11bHRQcm9wLnBhcmVudCA9IHRoaXMubWFpblNjb3JlTGFiZWwubm9kZVxuICAgIC8vICAgbXVsdFByb3AueCA9IHBvcy54XG4gICAgLy8gICBtdWx0UHJvcC55ID0gcG9zLnlcbiAgICAvLyAgIG11bHRQcm9wLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gdGhpcy5fZ2FtZS5wcm9wU3ByaXRlRnJhbWVbY29sb3IgLSAxXVxuICAgIC8vICAgbXVsdFByb3AucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLm1vdmVUbygwLjIsIDE4NywgMCksIGNjLmNhbGxGdW5jKCgpID0+IHtcbiAgICAvLyAgICAgdGhpcy5tdWx0UHJvcFBvb2wucHV0KG11bHRQcm9wKVxuICAgIC8vICAgfSkpKVxuICAgIC8vIH1cbiAgICBpZiAodGhpcy5tdWx0aXBsZSA8IHRoaXMuX2NvbnRyb2xsZXIuY29uZmlnLmpzb24ubWF4TXVsdGlwbGUpIHtcbiAgICAgIHRoaXMubXVsdGlwbGUgKj0gMlxuICAgICAgdGhpcy5zaG93TXVsdExhYmVsKClcbiAgICB9XG4gIH0sXG4gIC8vIOWFs+mXreWAjeaVsOeahOaVsOWtl+aYvuekulxuICBjbG9zZU11bHRMYWJlbCgpIHtcbiAgICB0aGlzLm11bHRpcGxlID0gMVxuICAgIHRoaXMubXVsdExhYmVsLm5vZGUuYWN0aXZlID0gZmFsc2VcbiAgfSxcbiAgc2hvd011bHRMYWJlbCgpIHtcbiAgICB0aGlzLm11bHRMYWJlbC5ub2RlLnNjYWxlID0gMC41XG4gICAgdGhpcy5tdWx0TGFiZWwuc3RyaW5nID0gdGhpcy5tdWx0aXBsZVxuICAgIHRoaXMubXVsdExhYmVsLm5vZGUuYWN0aXZlID0gdHJ1ZVxuICAgIHRoaXMubXVsdExhYmVsLm5vZGUucnVuQWN0aW9uKEFDLnBvcE91dCgwLjMpKVxuICB9LFxuICAvLyDlop7liqDliIbmlbDlgI3mlbBcbiAgaW5pdEN1cnJlbnRTY29yZUxhYmVsKCkge1xuICAgIHRoaXMubWFpblNjb3JlTGFiZWwubm9kZS5hY3RpdmUgPSB0cnVlXG4gICAgdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlLnggPSAwXG4gICAgdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlLnkgPSAwXG4gICAgdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlLnNjYWxlID0gMVxuICB9LFxuICAvLyDnlJ/miJDlsI/nmoTliIbmlbDoioLngrlcbiAgb25DdXJyZW50U2NvcmVMYWJlbChudW0sIHBvcywgY2FsbGJhY2spIHtcbiAgICAvLyBUT0RPOiDlop7liqDkuIDkuKrmkpLoirHnibnmlYhcbiAgICB0aGlzLm1haW5TY29yZUxhYmVsLnN0cmluZyA9IG51bVxuICAgIGxldCBhY3Rpb24gPSBjYy5zcGF3bihjYy5tb3ZlVG8oMC4yLCBwb3MueCwgcG9zLnkpLCBjYy5zY2FsZVRvKDAuMiwgMC40KSkuZWFzaW5nKGNjLmVhc2VCYWNrT3V0KCkpXG4gICAgbGV0IHNlcSA9IGNjLnNlcXVlbmNlKGFjdGlvbiwgY2FsbGJhY2spXG4gICAgdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlLnJ1bkFjdGlvbihzZXEpXG4gIH0sXG4gIC8vIOWNh+e6p1xuICBvbkxldmVsVXAoKSB7XG4gICAgdGhpcy5fY29udHJvbGxlci5wYWdlTWdyLmFkZFBhZ2UoMilcbiAgICB0aGlzLl9jb250cm9sbGVyLnBhZ2VNZ3IuYWRkUGFnZSgzKVxuICAgIHRoaXMuX2NvbnRyb2xsZXIubXVzaWNNYW5hZ2VyLm9uV2luKClcbiAgICB0aGlzLnN1Y2Nlc3NEaWFsb2cuaW5pdCh0aGlzLCB0aGlzLmxldmVsLCB0aGlzLmxldmVsRGF0YSwgdGhpcy5zY29yZSkgLy/ljYfnuqfkuYvlkI7nmoTnrYnnuqdcbiAgICB0aGlzLmNoYXJhY3Rlck1nci5vbkxldmVsVXAoKVxuICAgIHRoaXMuY2hhcmFjdGVyTWdyLm9uU3VjY2Vzc0RpYWxvZyh0aGlzLmxldmVsKVxuICAgIHRoaXMuX2dhbWUuX3N0YXR1cyA9IDJcbiAgICBpZiAodGhpcy5fY29udHJvbGxlci5zb2NpYWwubm9kZS5hY3RpdmUpIHtcbiAgICAgIHRoaXMuX2NvbnRyb2xsZXIuc29jaWFsLm9wZW5CYW5uZXJBZHYoKVxuICAgIH1cbiAgfSxcbiAgLy8g562J57qn6ZmQ5Yi2XG4gIGxldmVsTGltaXQoKSB7XG4gICAgLy9jb25zb2xlLmxvZygn562J57qn6L6+5Yiw5LiK6ZmQJylcbiAgICB0aGlzLmhpZGVOZXh0TGV2ZWxEYXRhKClcbiAgfSxcbiAgLy8g54K55Ye75Y2H57qn5oyJ6ZKuXG4gIG9uTGV2ZWxVcEJ1dHRvbihkb3VibGUpIHtcbiAgICBjb25zb2xlLmxvZyhkb3VibGUpXG4gICAgaWYgKHRoaXMuaXNMZXZlbFVwKSB7XG4gICAgICByZXR1cm5cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pc0xldmVsVXAgPSB0cnVlXG4gICAgfVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5pc0xldmVsVXAgPSBmYWxzZVxuICAgIH0sIDUwMClcbiAgICBpZiAoZG91YmxlICYmIGRvdWJsZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBkb3VibGUgPSAxXG4gICAgfSBlbHNlIHtcbiAgICAgIGRvdWJsZSA9IGRvdWJsZSB8fCAxXG4gICAgfVxuICAgIHRoaXMuX2NvbnRyb2xsZXIucGFnZU1nci5vbk9wZW5QYWdlKDEpXG4gICAgdGhpcy5pbml0Q3VycmVudFNjb3JlTGFiZWwoKVxuICAgIHRoaXMubWFpblNjb3JlTGFiZWwuc3RyaW5nID0gdGhpcy5sZXZlbERhdGFbdGhpcy5sZXZlbCAtIDJdLnN0ZXAgKiBkb3VibGVcbiAgICB0aGlzLmNoYXJhY3Rlck1nci5vbkxldmVsVXBCdG4odGhpcy5sZXZlbClcbiAgICB0aGlzLm5hbWVMYWJlbC5zdHJpbmcgPSB0aGlzLmxldmVsRGF0YVt0aGlzLmxldmVsIC0gMV0ubmFtZVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5vbkN1cnJlbnRTY29yZUxhYmVsKHRoaXMubGV2ZWxEYXRhW3RoaXMubGV2ZWwgLSAyXS5zdGVwICogZG91YmxlLCB7XG4gICAgICAgIHg6IC0yNDgsXG4gICAgICAgIHk6IDM1MFxuICAgICAgfSwgY2MuY2FsbEZ1bmMoKCkgPT4ge1xuICAgICAgICAvLyB0aGlzLnRpcEJveC5pbml0KHRoaXMpIOavj+asoeWNh+e6p+WwseWSj+ivl1xuICAgICAgICB0aGlzLm9uU3RlcCh0aGlzLmxldmVsRGF0YVt0aGlzLmxldmVsIC0gMl0uc3RlcCAqIGRvdWJsZSkudGhlbigpXG4gICAgICAgIHRoaXMuX2dhbWUuX3N0YXR1cyA9IDFcbiAgICAgICAgdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlLmFjdGl2ZSA9IGZhbHNlXG4gICAgICB9KSlcbiAgICB9LCAzMDApO1xuICAgIHRoaXMuc2hvd05leHRMZXZlbERhdGEoKVxuICAgIHRoaXMuY2hlY2tMZXZlbFVwKClcbiAgfSxcbiAgLy8gdG9kbzog5paw5aKe5LiA5LiqIOWKqOeUuyDmlbDlrZfkuIrmta7lkoznvKnmlL5cbiAgc2hvd1N0ZXBBbmkobnVtKSB7XG4gICAgdGhpcy5zdGVwQW5pTGFiZWwuc3RyaW5nID0gJysnICsgKG51bSArICcnKVxuICAgIHRoaXMuc3RlcEFuaUxhYmVsLm5vZGUueCA9IC0yNDhcbiAgICB0aGlzLnN0ZXBBbmlMYWJlbC5ub2RlLnkgPSA0MDBcbiAgICB0aGlzLnN0ZXBBbmlMYWJlbC5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShjYy50b2dnbGVWaXNpYmlsaXR5KCksIGNjLm1vdmVCeSgwLjYsIDAsIDYwKSwgY2MudG9nZ2xlVmlzaWJpbGl0eSgpKSlcbiAgICBsZXQgYWN0aW9uID0gY2Muc2VxdWVuY2UoY2Muc2NhbGVUbygwLjIsIDAuOCksIEFDLnBvcE91dCgwLjgpKVxuICAgIHRoaXMubGVmdFN0ZXBMYWJlbC5ub2RlLnBhcmVudC5ydW5BY3Rpb24oYWN0aW9uKVxuICB9LFxuICAvLyDmuLjmiI/nu5PmnZ9cbiAgLy8gdG9kbyDlpI3mtLtcbiAgb25HYW1lT3Zlcihpc1RydWUpIHtcbiAgICBpc1RydWUgPSBpc1RydWUgfHwgMFxuICAgIGlmICh0aGlzLl9nYW1lLl9zdGF0dXMgIT0gMyAmJiAoaXNUcnVlIHx8IHRoaXMucmV2aXZlVGltZSA+PSAzKSkge1xuICAgICAgdGhpcy5fZ2FtZS5nYW1lT3ZlcigpXG4gICAgICB0aGlzLnVwZGF0ZUZhaWxQYWdlKClcbiAgICAgIGlmICh0aGlzLl9jb250cm9sbGVyLnNvY2lhbC5ub2RlLmFjdGl2ZSkge1xuICAgICAgICAvLyDku4XkuIrkvKDliIbmlbBcbiAgICAgICAgdGhpcy5fY29udHJvbGxlci5zb2NpYWwub25HYW1lT3Zlcih0aGlzLmxldmVsLCB0aGlzLnNjb3JlKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWlzVHJ1ZSkge1xuICAgICAgdGhpcy5fZ2FtZS5hc2tSZXZpdmUoKVxuICAgIH1cbiAgfSxcbiAgb25Eb3VibGVTdGVwQnRuKCkge1xuICAgIGlmICh0aGlzLl9jb250cm9sbGVyLnNvY2lhbC5ub2RlLmFjdGl2ZSkge1xuICAgICAgdGhpcy5fY29udHJvbGxlci5zb2NpYWwub25SZXZpdmVCdXR0b24oMClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbkxldmVsVXBCdXR0b24oMilcbiAgICB9XG4gIH0sXG4gIG9uRG91YmxlU3RlcCgpIHtcbiAgICB0aGlzLm9uTGV2ZWxVcEJ1dHRvbigyKVxuICB9LFxuICBvblJldml2ZSgpIHtcbiAgICB0aGlzLnJldml2ZVRpbWUgKz0gMVxuICAgIHRoaXMub25TdGVwKDUpLnRoZW4oKVxuICB9LFxuICAvLyDlsZXnpLrkuIvkuIDnuqfnmoTkv6Hmga9cbiAgc2hvd05leHRMZXZlbERhdGEoKSB7XG4gICAgbGV0IG5leHRMZXZlbERhdGEgPSB0aGlzLmxldmVsRGF0YVt0aGlzLmxldmVsXVxuICB9LFxuICAvLyDovr7liLDmnIDpq5jnuqfkuYvlkI4g6ZqQ6JePXG4gIGhpZGVOZXh0TGV2ZWxEYXRhKCkge1xuXG4gIH0sXG4gIHVwZGF0ZUZhaWxQYWdlKCkge1xuICAgIHRoaXMuZmFpbFNjb3JlLnN0cmluZyA9IFwiIFwiICsgKHRoaXMuc2NvcmUgKyAnJylcbiAgICB0aGlzLmNoYXJhY3Rlck1nci5vbkZhaWwodGhpcy5sZXZlbClcbiAgICB0aGlzLmZhaWxOYW1lLnN0cmluZyA9IHRoaXMubGV2ZWxEYXRhW3RoaXMubGV2ZWwgLSAxXS5uYW1lXG4gICAgLy90aGlzLmZhaWxIaWdoU2NvcmUuc3RyaW5nID0gXCLmraPlnKjojrflj5bmgqjnmoTmnIDpq5jliIYuLi5cIlxuICB9LFxuXG59KTsiXX0=