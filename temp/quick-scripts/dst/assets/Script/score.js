
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/score.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '72f7acBwR1I474pejqfLV0j', 'score');
// Script/score.js

"use strict";

/**
 * @author heyuchang
 * @file  UI 分数控制器
 */
var AC = require('GameAct');

cc.Class({
  "extends": cc.Component,
  properties: {
    scorePrefab: cc.Prefab,
    scoreParticlePrefab: cc.Prefab,
    mainScoreLabel: cc.Label,
    successDialog: require('successDialog'),
    characterMgr: require('character'),
    failDialog: cc.Node,
    multPropPrefab: cc.Prefab,
    // progressBar: require('progress'),
    // leftStepLabel: cc.Label,
    chainSpriteFrameArr: [cc.SpriteFrame],
    stepAniLabel: cc.Label,
    //提示小框
    tipBox: require('tipBox')
  },
  init: function init(g) {
    this._game = g;
    this._controller = g._controller;
    this.score = 0;
    this.leftStep = this._controller.config.json.originStep;
    this.chain = 1;
    this.level = 1;
    this.reviveTime = 0;
    this.closeMultLabel();
    this.levelData = g._controller.gameData.json.levelData;
    this.nameLabel.string = "萌心悦";
    this.progressBar.init(0, this.levelData[this.level - 1], this.level);
    this.leftStepLabel.string = this.leftStep;
    this.stepAniLabel.node.runAction(cc.hide());
    this.scoreTimer = [];
    this.currentAddedScore = 0;
    this.mainScoreLabel.node.active = false;
    this.characterMgr.showHeroCharacter(this.level);
    this.hideChainSprite();
    this.tipBox.init(this, 0);

    if (this._controller.social.node.active) {
      var height = this._controller.social.getHighestLevel();

      if (height) {
        this.onStep(this.levelData[+height - 1].giftStep);
      }
    }
  },
  start: function start() {
    this.generatePool();
    this.bindNode();
  },
  generatePool: function generatePool() {
    this.scorePool = new cc.NodePool();

    for (var i = 0; i < 20; i++) {
      var score = cc.instantiate(this.scorePrefab);
      this.scorePool.put(score);
    }

    this.scoreParticlePool = new cc.NodePool();

    for (var _i = 0; _i < 20; _i++) {
      var scoreParticle = cc.instantiate(this.scoreParticlePrefab);
      this.scoreParticlePool.put(scoreParticle);
    }

    this.multPropPool = new cc.NodePool();

    for (var _i2 = 0; _i2 < 3; _i2++) {
      var multProp = cc.instantiate(this.multPropPrefab);
      this.multPropPool.put(multProp);
    }
  },
  // 实例化单个方块
  instantiateScore: function instantiateScore(self, num, pos) {
    var score = null;

    if (self.scorePool && self.scorePool.size() > 0) {
      score = self.scorePool.get();
    } else {
      score = cc.instantiate(self.scorePrefab);
    }

    score.parent = this.scoreContainer;
    score.getComponent('scoreCell').init(self, num, pos);
    var scoreParticle = null;

    if (self.scoreParticlePool && self.scoreParticlePool.size() > 0) {
      scoreParticle = self.scoreParticlePool.get();
    } else {
      scoreParticle = cc.instantiate(self.scoreParticlePrefab);
    }

    scoreParticle.parent = this.scoreContainer;
    scoreParticle.getComponent('scoreParticle').init(self, pos, this._controller.config.json.scoreParticleTime);
  },
  bindNode: function bindNode() {
    this.leftStepLabel = this.node.getChildByName('UI').getChildByName('leftStepNode').getChildByName('Label').getComponent(cc.Label);
    this.progressBar = this.node.getChildByName('UI').getChildByName('scoreNode').getChildByName('progressBar').getComponent('progress');
    this.scoreContainer = this.node.getChildByName('UI').getChildByName('scoreGroup');
    this.multLabel = this.mainScoreLabel.node.getChildByName('mult').getComponent(cc.Label);
    this.nameLabel = this.node.getChildByName('UI').getChildByName('scoreNode').getChildByName('progressBar').getChildByName('name').getComponent(cc.Label); // 失败时更新失败UI

    this.chainSprite = this.node.getChildByName('UI').getChildByName('chainSprite').getComponent(cc.Sprite);
    this.failScore = this.failDialog.getChildByName('info').getChildByName('score').getComponent(cc.Label);
    this.failName = this.failDialog.getChildByName('info').getChildByName('level').getComponent(cc.Label);
    this.failSprite = this.failDialog.getChildByName('info').getChildByName('sprite').getComponent(cc.Sprite);
    this.failHighScore = this.failDialog.getChildByName('info').getChildByName('highScore').getComponent(cc.Label);
  },
  //--------------------- 分数控制 ---------------------
  // 增加 减少步数并且刷新UI
  onStep: function onStep(num) {
    var _this = this;

    this.leftStep += num;
    return new Promise(function (resolve, reject) {
      if (_this.leftStep < 0) {
        _this.leftStep = 0;

        _this.onGameOver();

        resolve(false);
      } else {
        resolve(true);
      }

      _this.leftStepLabel.string = _this.leftStep;

      if (num > 0) {
        _this.showStepAni(num);
      }
    });
  },
  //增加分数总控制 获取连击
  addScore: function addScore(pos, score) {
    var _this2 = this;

    score = score || this._controller.config.json.scoreBase; // 一次消除可以叠chain

    if (this.chainTimer) {
      clearTimeout(this.chainTimer);
    }

    this.initCurrentScoreLabel();
    this.chainTimer = setTimeout(function () {
      _this2.onCurrentScoreLabel(_this2.currentAddedScore, {
        x: -60,
        y: 355
      }, cc.callFunc(function () {
        _this2.score += _this2.currentAddedScore * _this2.multiple;

        _this2.checkLevelUp();

        _this2.chain = 1;

        _this2.closeMultLabel();

        _this2.hideChainSprite();

        _this2.currentAddedScore = 0;
        _this2.mainScoreLabel.node.active = false;
      }, _this2));
    }, 500 / 1 // (cc.game.getFrameRate() / 60)
    );
    var addScore = score == this._controller.config.json.scoreBase ? score + (this.chain > 16 ? 16 : this.chain - 1) * 10 : score; // let addScore = score == 10 ? score * (this.chain > 10 ? 10 : this.chain) : score

    this.currentAddedScore += addScore;
    this.mainScoreLabel.string = this.currentAddedScore;
    this.instantiateScore(this, addScore, pos);
    this.chain++;
    this.checkChain();
  },
  // 判断连击
  checkChain: function checkChain() {
    var _this3 = this;

    if (this.checkChainTimer) {
      clearTimeout(this.checkChainTimer);
    }

    this.checkChainTimer = setTimeout(function () {
      var config = _this3._controller.config.json.chainConfig;

      for (var i = 0; i < config.length; i++) {
        if (_this3.chain <= config[i].max && _this3.chain >= config[i].min) {
          //  console.log(config[i].text)
          _this3.showChainSprite(i);

          return;
        }
      }
    }, 200);
  },
  showChainSprite: function showChainSprite(id) {
    this.chainSprite.spriteFrame = this.chainSpriteFrameArr[id];
    this.chainSprite.node.scale = 0.5;
    this.chainSprite.node.active = true;
    this.chainSprite.node.runAction(AC.popOut(0.3));
  },
  hideChainSprite: function hideChainSprite() {
    this.chainSprite.node.active = false;
  },
  checkLevelUp: function checkLevelUp() {
    if (this.level < this.levelData.length && this.score >= this.levelData[this.level - 1].score) {
      this.level++;
      this.level > this.levelData.length + 1 ? this.levelLimit() : this.onLevelUp();
    }

    this.progressBar.init(this.score, this.levelData[this.level - 1], this.level);
  },
  // 增加倍数
  addMult: function addMult(color, pos) {
    //TODO: 动态生成一个图片 移动到multLabel上 有bug
    // if (this.multPropPool.size() > 0) {
    //   let multProp = this.multPropPool.get()
    //   multProp.parent = this.mainScoreLabel.node
    //   multProp.x = pos.x
    //   multProp.y = pos.y
    //   multProp.getComponent(cc.Sprite).spriteFrame = this._game.propSpriteFrame[color - 1]
    //   multProp.runAction(cc.sequence(cc.moveTo(0.2, 187, 0), cc.callFunc(() => {
    //     this.multPropPool.put(multProp)
    //   })))
    // }
    if (this.multiple < this._controller.config.json.maxMultiple) {
      this.multiple *= 2;
      this.showMultLabel();
    }
  },
  // 关闭倍数的数字显示
  closeMultLabel: function closeMultLabel() {
    this.multiple = 1;
    this.multLabel.node.active = false;
  },
  showMultLabel: function showMultLabel() {
    this.multLabel.node.scale = 0.5;
    this.multLabel.string = this.multiple;
    this.multLabel.node.active = true;
    this.multLabel.node.runAction(AC.popOut(0.3));
  },
  // 增加分数倍数
  initCurrentScoreLabel: function initCurrentScoreLabel() {
    this.mainScoreLabel.node.active = true;
    this.mainScoreLabel.node.x = 0;
    this.mainScoreLabel.node.y = 0;
    this.mainScoreLabel.node.scale = 1;
  },
  // 生成小的分数节点
  onCurrentScoreLabel: function onCurrentScoreLabel(num, pos, callback) {
    // TODO: 增加一个撒花特效
    this.mainScoreLabel.string = num;
    var action = cc.spawn(cc.moveTo(0.2, pos.x, pos.y), cc.scaleTo(0.2, 0.4)).easing(cc.easeBackOut());
    var seq = cc.sequence(action, callback);
    this.mainScoreLabel.node.runAction(seq);
  },
  // 升级
  onLevelUp: function onLevelUp() {
    this._controller.pageMgr.addPage(2);

    this._controller.pageMgr.addPage(3);

    this._controller.musicMgr.onWin();

    this.successDialog.init(this, this.level, this.levelData, this.score); //升级之后的等级

    this.characterMgr.onLevelUp();
    this.characterMgr.onSuccessDialog(this.level);
    this._game._status = 2;

    if (this._controller.social.node.active) {
      this._controller.social.openBannerAdv();
    }
  },
  // 等级限制
  levelLimit: function levelLimit() {
    //console.log('等级达到上限')
    this.hideNextLevelData();
  },
  // 点击升级按钮
  onLevelUpButton: function onLevelUpButton(_double) {
    var _this4 = this;

    console.log(_double);

    if (this.isLevelUp) {
      return;
    } else {
      this.isLevelUp = true;
    }

    setTimeout(function () {
      _this4.isLevelUp = false;
    }, 500);

    if (_double && _double.currentTarget) {
      _double = 1;
    } else {
      _double = _double || 1;
    }

    this._controller.pageMgr.onOpenPage(1);

    this.initCurrentScoreLabel();
    this.mainScoreLabel.string = this.levelData[this.level - 2].step * _double;
    this.characterMgr.onLevelUpBtn(this.level);
    this.nameLabel.string = this.levelData[this.level - 1].name;
    setTimeout(function () {
      _this4.onCurrentScoreLabel(_this4.levelData[_this4.level - 2].step * _double, {
        x: -248,
        y: 350
      }, cc.callFunc(function () {
        // this.tipBox.init(this) 每次升级就咏诗
        _this4.onStep(_this4.levelData[_this4.level - 2].step * _double).then();

        _this4._game._status = 1;
        _this4.mainScoreLabel.node.active = false;
      }));
    }, 300);
    this.showNextLevelData();
    this.checkLevelUp();
  },
  // todo: 新增一个 动画 数字上浮和缩放
  showStepAni: function showStepAni(num) {
    this.stepAniLabel.string = '+' + (num + '');
    this.stepAniLabel.node.x = -248;
    this.stepAniLabel.node.y = 400;
    this.stepAniLabel.node.runAction(cc.sequence(cc.toggleVisibility(), cc.moveBy(0.6, 0, 60), cc.toggleVisibility()));
    var action = cc.sequence(cc.scaleTo(0.2, 0.8), AC.popOut(0.8));
    this.leftStepLabel.node.parent.runAction(action);
  },
  // 游戏结束
  // todo 复活
  onGameOver: function onGameOver(isTrue) {
    isTrue = isTrue || 0;

    if (this._game._status != 3 && (isTrue || this.reviveTime >= 3)) {
      this._game.gameOver();

      this.updateFailPage();

      if (this._controller.social.node.active) {
        // 仅上传分数
        this._controller.social.onGameOver(this.level, this.score);
      }
    } else if (!isTrue) {
      this._game.askRevive();
    }
  },
  onDoubleStepBtn: function onDoubleStepBtn() {
    if (this._controller.social.node.active) {
      this._controller.social.onReviveButton(0);
    } else {
      this.onLevelUpButton(2);
    }
  },
  onDoubleStep: function onDoubleStep() {
    this.onLevelUpButton(2);
  },
  onRevive: function onRevive() {
    this.reviveTime += 1;
    this.onStep(5).then();
  },
  // 展示下一级的信息
  showNextLevelData: function showNextLevelData() {
    var nextLevelData = this.levelData[this.level];
  },
  // 达到最高级之后 隐藏
  hideNextLevelData: function hideNextLevelData() {},
  updateFailPage: function updateFailPage() {
    this.failScore.string = " " + (this.score + '');
    this.characterMgr.onFail(this.level);
    this.failName.string = this.levelData[this.level - 1].name; //this.failHighScore.string = "正在获取您的最高分..."
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxzY29yZS5qcyJdLCJuYW1lcyI6WyJBQyIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsInNjb3JlUHJlZmFiIiwiUHJlZmFiIiwic2NvcmVQYXJ0aWNsZVByZWZhYiIsIm1haW5TY29yZUxhYmVsIiwiTGFiZWwiLCJzdWNjZXNzRGlhbG9nIiwiY2hhcmFjdGVyTWdyIiwiZmFpbERpYWxvZyIsIk5vZGUiLCJtdWx0UHJvcFByZWZhYiIsImNoYWluU3ByaXRlRnJhbWVBcnIiLCJTcHJpdGVGcmFtZSIsInN0ZXBBbmlMYWJlbCIsInRpcEJveCIsImluaXQiLCJnIiwiX2dhbWUiLCJfY29udHJvbGxlciIsInNjb3JlIiwibGVmdFN0ZXAiLCJjb25maWciLCJqc29uIiwib3JpZ2luU3RlcCIsImNoYWluIiwibGV2ZWwiLCJyZXZpdmVUaW1lIiwiY2xvc2VNdWx0TGFiZWwiLCJsZXZlbERhdGEiLCJnYW1lRGF0YSIsIm5hbWVMYWJlbCIsInN0cmluZyIsInByb2dyZXNzQmFyIiwibGVmdFN0ZXBMYWJlbCIsIm5vZGUiLCJydW5BY3Rpb24iLCJoaWRlIiwic2NvcmVUaW1lciIsImN1cnJlbnRBZGRlZFNjb3JlIiwiYWN0aXZlIiwic2hvd0hlcm9DaGFyYWN0ZXIiLCJoaWRlQ2hhaW5TcHJpdGUiLCJzb2NpYWwiLCJoZWlnaHQiLCJnZXRIaWdoZXN0TGV2ZWwiLCJvblN0ZXAiLCJnaWZ0U3RlcCIsInN0YXJ0IiwiZ2VuZXJhdGVQb29sIiwiYmluZE5vZGUiLCJzY29yZVBvb2wiLCJOb2RlUG9vbCIsImkiLCJpbnN0YW50aWF0ZSIsInB1dCIsInNjb3JlUGFydGljbGVQb29sIiwic2NvcmVQYXJ0aWNsZSIsIm11bHRQcm9wUG9vbCIsIm11bHRQcm9wIiwiaW5zdGFudGlhdGVTY29yZSIsInNlbGYiLCJudW0iLCJwb3MiLCJzaXplIiwiZ2V0IiwicGFyZW50Iiwic2NvcmVDb250YWluZXIiLCJnZXRDb21wb25lbnQiLCJzY29yZVBhcnRpY2xlVGltZSIsImdldENoaWxkQnlOYW1lIiwibXVsdExhYmVsIiwiY2hhaW5TcHJpdGUiLCJTcHJpdGUiLCJmYWlsU2NvcmUiLCJmYWlsTmFtZSIsImZhaWxTcHJpdGUiLCJmYWlsSGlnaFNjb3JlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJvbkdhbWVPdmVyIiwic2hvd1N0ZXBBbmkiLCJhZGRTY29yZSIsInNjb3JlQmFzZSIsImNoYWluVGltZXIiLCJjbGVhclRpbWVvdXQiLCJpbml0Q3VycmVudFNjb3JlTGFiZWwiLCJzZXRUaW1lb3V0Iiwib25DdXJyZW50U2NvcmVMYWJlbCIsIngiLCJ5IiwiY2FsbEZ1bmMiLCJtdWx0aXBsZSIsImNoZWNrTGV2ZWxVcCIsImNoZWNrQ2hhaW4iLCJjaGVja0NoYWluVGltZXIiLCJjaGFpbkNvbmZpZyIsImxlbmd0aCIsIm1heCIsIm1pbiIsInNob3dDaGFpblNwcml0ZSIsImlkIiwic3ByaXRlRnJhbWUiLCJzY2FsZSIsInBvcE91dCIsImxldmVsTGltaXQiLCJvbkxldmVsVXAiLCJhZGRNdWx0IiwiY29sb3IiLCJtYXhNdWx0aXBsZSIsInNob3dNdWx0TGFiZWwiLCJjYWxsYmFjayIsImFjdGlvbiIsInNwYXduIiwibW92ZVRvIiwic2NhbGVUbyIsImVhc2luZyIsImVhc2VCYWNrT3V0Iiwic2VxIiwic2VxdWVuY2UiLCJwYWdlTWdyIiwiYWRkUGFnZSIsIm11c2ljTWdyIiwib25XaW4iLCJvblN1Y2Nlc3NEaWFsb2ciLCJfc3RhdHVzIiwib3BlbkJhbm5lckFkdiIsImhpZGVOZXh0TGV2ZWxEYXRhIiwib25MZXZlbFVwQnV0dG9uIiwiZG91YmxlIiwiY29uc29sZSIsImxvZyIsImlzTGV2ZWxVcCIsImN1cnJlbnRUYXJnZXQiLCJvbk9wZW5QYWdlIiwic3RlcCIsIm9uTGV2ZWxVcEJ0biIsIm5hbWUiLCJ0aGVuIiwic2hvd05leHRMZXZlbERhdGEiLCJ0b2dnbGVWaXNpYmlsaXR5IiwibW92ZUJ5IiwiaXNUcnVlIiwiZ2FtZU92ZXIiLCJ1cGRhdGVGYWlsUGFnZSIsImFza1Jldml2ZSIsIm9uRG91YmxlU3RlcEJ0biIsIm9uUmV2aXZlQnV0dG9uIiwib25Eb3VibGVTdGVwIiwib25SZXZpdmUiLCJuZXh0TGV2ZWxEYXRhIiwib25GYWlsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBSUEsSUFBSUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFoQjs7QUFFQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDUCxhQUFTRCxFQUFFLENBQUNFLFNBREw7QUFFUEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1ZDLElBQUFBLFdBQVcsRUFBRUosRUFBRSxDQUFDSyxNQUROO0FBRVZDLElBQUFBLG1CQUFtQixFQUFFTixFQUFFLENBQUNLLE1BRmQ7QUFHVkUsSUFBQUEsY0FBYyxFQUFFUCxFQUFFLENBQUNRLEtBSFQ7QUFJVkMsSUFBQUEsYUFBYSxFQUFFVixPQUFPLENBQUMsZUFBRCxDQUpaO0FBS1ZXLElBQUFBLFlBQVksRUFBRVgsT0FBTyxDQUFDLFdBQUQsQ0FMWDtBQU1WWSxJQUFBQSxVQUFVLEVBQUVYLEVBQUUsQ0FBQ1ksSUFOTDtBQU9WQyxJQUFBQSxjQUFjLEVBQUViLEVBQUUsQ0FBQ0ssTUFQVDtBQVFWO0FBQ0E7QUFDQVMsSUFBQUEsbUJBQW1CLEVBQUUsQ0FBQ2QsRUFBRSxDQUFDZSxXQUFKLENBVlg7QUFXVkMsSUFBQUEsWUFBWSxFQUFFaEIsRUFBRSxDQUFDUSxLQVhQO0FBYVY7QUFDQVMsSUFBQUEsTUFBTSxFQUFFbEIsT0FBTyxDQUFDLFFBQUQ7QUFkTCxHQUZMO0FBa0JQbUIsRUFBQUEsSUFsQk8sZ0JBa0JGQyxDQWxCRSxFQWtCQztBQUNOLFNBQUtDLEtBQUwsR0FBYUQsQ0FBYjtBQUNBLFNBQUtFLFdBQUwsR0FBbUJGLENBQUMsQ0FBQ0UsV0FBckI7QUFDQSxTQUFLQyxLQUFMLEdBQWEsQ0FBYjtBQUNBLFNBQUtDLFFBQUwsR0FBZ0IsS0FBS0YsV0FBTCxDQUFpQkcsTUFBakIsQ0FBd0JDLElBQXhCLENBQTZCQyxVQUE3QztBQUNBLFNBQUtDLEtBQUwsR0FBYSxDQUFiO0FBQ0EsU0FBS0MsS0FBTCxHQUFhLENBQWI7QUFDQSxTQUFLQyxVQUFMLEdBQWtCLENBQWxCO0FBQ0EsU0FBS0MsY0FBTDtBQUNBLFNBQUtDLFNBQUwsR0FBaUJaLENBQUMsQ0FBQ0UsV0FBRixDQUFjVyxRQUFkLENBQXVCUCxJQUF2QixDQUE0Qk0sU0FBN0M7QUFDQSxTQUFLRSxTQUFMLENBQWVDLE1BQWYsR0FBd0IsS0FBeEI7QUFDQSxTQUFLQyxXQUFMLENBQWlCakIsSUFBakIsQ0FBc0IsQ0FBdEIsRUFBeUIsS0FBS2EsU0FBTCxDQUFlLEtBQUtILEtBQUwsR0FBYSxDQUE1QixDQUF6QixFQUF5RCxLQUFLQSxLQUE5RDtBQUNBLFNBQUtRLGFBQUwsQ0FBbUJGLE1BQW5CLEdBQTRCLEtBQUtYLFFBQWpDO0FBQ0EsU0FBS1AsWUFBTCxDQUFrQnFCLElBQWxCLENBQXVCQyxTQUF2QixDQUFpQ3RDLEVBQUUsQ0FBQ3VDLElBQUgsRUFBakM7QUFDQSxTQUFLQyxVQUFMLEdBQWtCLEVBQWxCO0FBQ0EsU0FBS0MsaUJBQUwsR0FBeUIsQ0FBekI7QUFDQSxTQUFLbEMsY0FBTCxDQUFvQjhCLElBQXBCLENBQXlCSyxNQUF6QixHQUFrQyxLQUFsQztBQUNBLFNBQUtoQyxZQUFMLENBQWtCaUMsaUJBQWxCLENBQW9DLEtBQUtmLEtBQXpDO0FBQ0EsU0FBS2dCLGVBQUw7QUFFQSxTQUFLM0IsTUFBTCxDQUFZQyxJQUFaLENBQWlCLElBQWpCLEVBQXVCLENBQXZCOztBQUNBLFFBQUksS0FBS0csV0FBTCxDQUFpQndCLE1BQWpCLENBQXdCUixJQUF4QixDQUE2QkssTUFBakMsRUFBeUM7QUFDdkMsVUFBSUksTUFBTSxHQUFHLEtBQUt6QixXQUFMLENBQWlCd0IsTUFBakIsQ0FBd0JFLGVBQXhCLEVBQWI7O0FBQ0EsVUFBSUQsTUFBSixFQUFZO0FBQ1YsYUFBS0UsTUFBTCxDQUFZLEtBQUtqQixTQUFMLENBQWUsQ0FBQ2UsTUFBRCxHQUFVLENBQXpCLEVBQTRCRyxRQUF4QztBQUNEO0FBQ0Y7QUFDRixHQTdDTTtBQThDUEMsRUFBQUEsS0E5Q08sbUJBOENDO0FBQ04sU0FBS0MsWUFBTDtBQUNBLFNBQUtDLFFBQUw7QUFDRCxHQWpETTtBQWtEUEQsRUFBQUEsWUFsRE8sMEJBa0RRO0FBQ2IsU0FBS0UsU0FBTCxHQUFpQixJQUFJckQsRUFBRSxDQUFDc0QsUUFBUCxFQUFqQjs7QUFDQSxTQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUcsRUFBcEIsRUFBd0JBLENBQUMsRUFBekIsRUFBNkI7QUFDM0IsVUFBSWpDLEtBQUssR0FBR3RCLEVBQUUsQ0FBQ3dELFdBQUgsQ0FBZSxLQUFLcEQsV0FBcEIsQ0FBWjtBQUNBLFdBQUtpRCxTQUFMLENBQWVJLEdBQWYsQ0FBbUJuQyxLQUFuQjtBQUNEOztBQUNELFNBQUtvQyxpQkFBTCxHQUF5QixJQUFJMUQsRUFBRSxDQUFDc0QsUUFBUCxFQUF6Qjs7QUFDQSxTQUFLLElBQUlDLEVBQUMsR0FBRyxDQUFiLEVBQWdCQSxFQUFDLEdBQUcsRUFBcEIsRUFBd0JBLEVBQUMsRUFBekIsRUFBNkI7QUFDM0IsVUFBSUksYUFBYSxHQUFHM0QsRUFBRSxDQUFDd0QsV0FBSCxDQUFlLEtBQUtsRCxtQkFBcEIsQ0FBcEI7QUFDQSxXQUFLb0QsaUJBQUwsQ0FBdUJELEdBQXZCLENBQTJCRSxhQUEzQjtBQUNEOztBQUNELFNBQUtDLFlBQUwsR0FBb0IsSUFBSTVELEVBQUUsQ0FBQ3NELFFBQVAsRUFBcEI7O0FBQ0EsU0FBSyxJQUFJQyxHQUFDLEdBQUcsQ0FBYixFQUFnQkEsR0FBQyxHQUFHLENBQXBCLEVBQXVCQSxHQUFDLEVBQXhCLEVBQTRCO0FBQzFCLFVBQUlNLFFBQVEsR0FBRzdELEVBQUUsQ0FBQ3dELFdBQUgsQ0FBZSxLQUFLM0MsY0FBcEIsQ0FBZjtBQUNBLFdBQUsrQyxZQUFMLENBQWtCSCxHQUFsQixDQUFzQkksUUFBdEI7QUFDRDtBQUNGLEdBbEVNO0FBbUVQO0FBQ0FDLEVBQUFBLGdCQXBFTyw0QkFvRVVDLElBcEVWLEVBb0VnQkMsR0FwRWhCLEVBb0VxQkMsR0FwRXJCLEVBb0UwQjtBQUMvQixRQUFJM0MsS0FBSyxHQUFHLElBQVo7O0FBQ0EsUUFBSXlDLElBQUksQ0FBQ1YsU0FBTCxJQUFrQlUsSUFBSSxDQUFDVixTQUFMLENBQWVhLElBQWYsS0FBd0IsQ0FBOUMsRUFBaUQ7QUFDL0M1QyxNQUFBQSxLQUFLLEdBQUd5QyxJQUFJLENBQUNWLFNBQUwsQ0FBZWMsR0FBZixFQUFSO0FBQ0QsS0FGRCxNQUVPO0FBQ0w3QyxNQUFBQSxLQUFLLEdBQUd0QixFQUFFLENBQUN3RCxXQUFILENBQWVPLElBQUksQ0FBQzNELFdBQXBCLENBQVI7QUFDRDs7QUFDRGtCLElBQUFBLEtBQUssQ0FBQzhDLE1BQU4sR0FBZSxLQUFLQyxjQUFwQjtBQUNBL0MsSUFBQUEsS0FBSyxDQUFDZ0QsWUFBTixDQUFtQixXQUFuQixFQUFnQ3BELElBQWhDLENBQXFDNkMsSUFBckMsRUFBMkNDLEdBQTNDLEVBQWdEQyxHQUFoRDtBQUVBLFFBQUlOLGFBQWEsR0FBRyxJQUFwQjs7QUFDQSxRQUFJSSxJQUFJLENBQUNMLGlCQUFMLElBQTBCSyxJQUFJLENBQUNMLGlCQUFMLENBQXVCUSxJQUF2QixLQUFnQyxDQUE5RCxFQUFpRTtBQUMvRFAsTUFBQUEsYUFBYSxHQUFHSSxJQUFJLENBQUNMLGlCQUFMLENBQXVCUyxHQUF2QixFQUFoQjtBQUNELEtBRkQsTUFFTztBQUNMUixNQUFBQSxhQUFhLEdBQUczRCxFQUFFLENBQUN3RCxXQUFILENBQWVPLElBQUksQ0FBQ3pELG1CQUFwQixDQUFoQjtBQUNEOztBQUNEcUQsSUFBQUEsYUFBYSxDQUFDUyxNQUFkLEdBQXVCLEtBQUtDLGNBQTVCO0FBQ0FWLElBQUFBLGFBQWEsQ0FBQ1csWUFBZCxDQUEyQixlQUEzQixFQUE0Q3BELElBQTVDLENBQWlENkMsSUFBakQsRUFBdURFLEdBQXZELEVBQTRELEtBQUs1QyxXQUFMLENBQWlCRyxNQUFqQixDQUF3QkMsSUFBeEIsQ0FBNkI4QyxpQkFBekY7QUFDRCxHQXRGTTtBQXVGUG5CLEVBQUFBLFFBdkZPLHNCQXVGSTtBQUNULFNBQUtoQixhQUFMLEdBQXFCLEtBQUtDLElBQUwsQ0FBVW1DLGNBQVYsQ0FBeUIsSUFBekIsRUFBK0JBLGNBQS9CLENBQThDLGNBQTlDLEVBQThEQSxjQUE5RCxDQUE2RSxPQUE3RSxFQUFzRkYsWUFBdEYsQ0FBbUd0RSxFQUFFLENBQUNRLEtBQXRHLENBQXJCO0FBQ0EsU0FBSzJCLFdBQUwsR0FBbUIsS0FBS0UsSUFBTCxDQUFVbUMsY0FBVixDQUF5QixJQUF6QixFQUErQkEsY0FBL0IsQ0FBOEMsV0FBOUMsRUFBMkRBLGNBQTNELENBQTBFLGFBQTFFLEVBQXlGRixZQUF6RixDQUFzRyxVQUF0RyxDQUFuQjtBQUNBLFNBQUtELGNBQUwsR0FBc0IsS0FBS2hDLElBQUwsQ0FBVW1DLGNBQVYsQ0FBeUIsSUFBekIsRUFBK0JBLGNBQS9CLENBQThDLFlBQTlDLENBQXRCO0FBQ0EsU0FBS0MsU0FBTCxHQUFpQixLQUFLbEUsY0FBTCxDQUFvQjhCLElBQXBCLENBQXlCbUMsY0FBekIsQ0FBd0MsTUFBeEMsRUFBZ0RGLFlBQWhELENBQTZEdEUsRUFBRSxDQUFDUSxLQUFoRSxDQUFqQjtBQUNBLFNBQUt5QixTQUFMLEdBQWlCLEtBQUtJLElBQUwsQ0FBVW1DLGNBQVYsQ0FBeUIsSUFBekIsRUFBK0JBLGNBQS9CLENBQThDLFdBQTlDLEVBQTJEQSxjQUEzRCxDQUEwRSxhQUExRSxFQUF5RkEsY0FBekYsQ0FBd0csTUFBeEcsRUFBZ0hGLFlBQWhILENBQTZIdEUsRUFBRSxDQUFDUSxLQUFoSSxDQUFqQixDQUxTLENBTVQ7O0FBQ0EsU0FBS2tFLFdBQUwsR0FBbUIsS0FBS3JDLElBQUwsQ0FBVW1DLGNBQVYsQ0FBeUIsSUFBekIsRUFBK0JBLGNBQS9CLENBQThDLGFBQTlDLEVBQTZERixZQUE3RCxDQUEwRXRFLEVBQUUsQ0FBQzJFLE1BQTdFLENBQW5CO0FBQ0EsU0FBS0MsU0FBTCxHQUFpQixLQUFLakUsVUFBTCxDQUFnQjZELGNBQWhCLENBQStCLE1BQS9CLEVBQXVDQSxjQUF2QyxDQUFzRCxPQUF0RCxFQUErREYsWUFBL0QsQ0FBNEV0RSxFQUFFLENBQUNRLEtBQS9FLENBQWpCO0FBQ0EsU0FBS3FFLFFBQUwsR0FBZ0IsS0FBS2xFLFVBQUwsQ0FBZ0I2RCxjQUFoQixDQUErQixNQUEvQixFQUF1Q0EsY0FBdkMsQ0FBc0QsT0FBdEQsRUFBK0RGLFlBQS9ELENBQTRFdEUsRUFBRSxDQUFDUSxLQUEvRSxDQUFoQjtBQUNBLFNBQUtzRSxVQUFMLEdBQWtCLEtBQUtuRSxVQUFMLENBQWdCNkQsY0FBaEIsQ0FBK0IsTUFBL0IsRUFBdUNBLGNBQXZDLENBQXNELFFBQXRELEVBQWdFRixZQUFoRSxDQUE2RXRFLEVBQUUsQ0FBQzJFLE1BQWhGLENBQWxCO0FBQ0EsU0FBS0ksYUFBTCxHQUFxQixLQUFLcEUsVUFBTCxDQUFnQjZELGNBQWhCLENBQStCLE1BQS9CLEVBQXVDQSxjQUF2QyxDQUFzRCxXQUF0RCxFQUFtRUYsWUFBbkUsQ0FBZ0Z0RSxFQUFFLENBQUNRLEtBQW5GLENBQXJCO0FBQ0QsR0FuR007QUFvR1A7QUFDQTtBQUNBd0MsRUFBQUEsTUF0R08sa0JBc0dBZ0IsR0F0R0EsRUFzR0s7QUFBQTs7QUFDVixTQUFLekMsUUFBTCxJQUFpQnlDLEdBQWpCO0FBQ0EsV0FBTyxJQUFJZ0IsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN0QyxVQUFJLEtBQUksQ0FBQzNELFFBQUwsR0FBZ0IsQ0FBcEIsRUFBdUI7QUFDckIsUUFBQSxLQUFJLENBQUNBLFFBQUwsR0FBZ0IsQ0FBaEI7O0FBQ0EsUUFBQSxLQUFJLENBQUM0RCxVQUFMOztBQUNBRixRQUFBQSxPQUFPLENBQUMsS0FBRCxDQUFQO0FBQ0QsT0FKRCxNQUlPO0FBQ0xBLFFBQUFBLE9BQU8sQ0FBQyxJQUFELENBQVA7QUFDRDs7QUFDRCxNQUFBLEtBQUksQ0FBQzdDLGFBQUwsQ0FBbUJGLE1BQW5CLEdBQTRCLEtBQUksQ0FBQ1gsUUFBakM7O0FBQ0EsVUFBSXlDLEdBQUcsR0FBRyxDQUFWLEVBQWE7QUFDWCxRQUFBLEtBQUksQ0FBQ29CLFdBQUwsQ0FBaUJwQixHQUFqQjtBQUNEO0FBQ0YsS0FaTSxDQUFQO0FBYUQsR0FySE07QUF1SFA7QUFDQXFCLEVBQUFBLFFBeEhPLG9CQXdIRXBCLEdBeEhGLEVBd0hPM0MsS0F4SFAsRUF3SGM7QUFBQTs7QUFDbkJBLElBQUFBLEtBQUssR0FBR0EsS0FBSyxJQUFJLEtBQUtELFdBQUwsQ0FBaUJHLE1BQWpCLENBQXdCQyxJQUF4QixDQUE2QjZELFNBQTlDLENBRG1CLENBRW5COztBQUNBLFFBQUksS0FBS0MsVUFBVCxFQUFxQjtBQUNuQkMsTUFBQUEsWUFBWSxDQUFDLEtBQUtELFVBQU4sQ0FBWjtBQUNEOztBQUNELFNBQUtFLHFCQUFMO0FBQ0EsU0FBS0YsVUFBTCxHQUFrQkcsVUFBVSxDQUFDLFlBQU07QUFDL0IsTUFBQSxNQUFJLENBQUNDLG1CQUFMLENBQXlCLE1BQUksQ0FBQ2xELGlCQUE5QixFQUFpRDtBQUMvQ21ELFFBQUFBLENBQUMsRUFBRSxDQUFDLEVBRDJDO0FBRS9DQyxRQUFBQSxDQUFDLEVBQUU7QUFGNEMsT0FBakQsRUFHRzdGLEVBQUUsQ0FBQzhGLFFBQUgsQ0FBWSxZQUFNO0FBQ25CLFFBQUEsTUFBSSxDQUFDeEUsS0FBTCxJQUFjLE1BQUksQ0FBQ21CLGlCQUFMLEdBQXlCLE1BQUksQ0FBQ3NELFFBQTVDOztBQUNBLFFBQUEsTUFBSSxDQUFDQyxZQUFMOztBQUNBLFFBQUEsTUFBSSxDQUFDckUsS0FBTCxHQUFhLENBQWI7O0FBQ0EsUUFBQSxNQUFJLENBQUNHLGNBQUw7O0FBQ0EsUUFBQSxNQUFJLENBQUNjLGVBQUw7O0FBQ0EsUUFBQSxNQUFJLENBQUNILGlCQUFMLEdBQXlCLENBQXpCO0FBQ0EsUUFBQSxNQUFJLENBQUNsQyxjQUFMLENBQW9COEIsSUFBcEIsQ0FBeUJLLE1BQXpCLEdBQWtDLEtBQWxDO0FBQ0QsT0FSRSxFQVFBLE1BUkEsQ0FISDtBQVlELEtBYnlCLEVBYXZCLE1BQU0sQ0FiaUIsQ0FjMUI7QUFkMEIsS0FBNUI7QUFnQkEsUUFBSTJDLFFBQVEsR0FBRy9ELEtBQUssSUFBSSxLQUFLRCxXQUFMLENBQWlCRyxNQUFqQixDQUF3QkMsSUFBeEIsQ0FBNkI2RCxTQUF0QyxHQUFtRGhFLEtBQUssR0FBRyxDQUFDLEtBQUtLLEtBQUwsR0FBYSxFQUFiLEdBQWtCLEVBQWxCLEdBQXdCLEtBQUtBLEtBQUwsR0FBYSxDQUF0QyxJQUE0QyxFQUF2RyxHQUE2R0wsS0FBNUgsQ0F2Qm1CLENBd0JuQjs7QUFDQSxTQUFLbUIsaUJBQUwsSUFBMEI0QyxRQUExQjtBQUNBLFNBQUs5RSxjQUFMLENBQW9CMkIsTUFBcEIsR0FBNkIsS0FBS08saUJBQWxDO0FBQ0EsU0FBS3FCLGdCQUFMLENBQXNCLElBQXRCLEVBQTRCdUIsUUFBNUIsRUFBc0NwQixHQUF0QztBQUNBLFNBQUt0QyxLQUFMO0FBQ0EsU0FBS3NFLFVBQUw7QUFDRCxHQXRKTTtBQXVKUDtBQUNBQSxFQUFBQSxVQXhKTyx3QkF3Sk07QUFBQTs7QUFDWCxRQUFJLEtBQUtDLGVBQVQsRUFBMEI7QUFDeEJWLE1BQUFBLFlBQVksQ0FBQyxLQUFLVSxlQUFOLENBQVo7QUFDRDs7QUFDRCxTQUFLQSxlQUFMLEdBQXVCUixVQUFVLENBQUMsWUFBTTtBQUN0QyxVQUFJbEUsTUFBTSxHQUFHLE1BQUksQ0FBQ0gsV0FBTCxDQUFpQkcsTUFBakIsQ0FBd0JDLElBQXhCLENBQTZCMEUsV0FBMUM7O0FBQ0EsV0FBSyxJQUFJNUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRy9CLE1BQU0sQ0FBQzRFLE1BQTNCLEVBQW1DN0MsQ0FBQyxFQUFwQyxFQUF3QztBQUN0QyxZQUFJLE1BQUksQ0FBQzVCLEtBQUwsSUFBY0gsTUFBTSxDQUFDK0IsQ0FBRCxDQUFOLENBQVU4QyxHQUF4QixJQUErQixNQUFJLENBQUMxRSxLQUFMLElBQWNILE1BQU0sQ0FBQytCLENBQUQsQ0FBTixDQUFVK0MsR0FBM0QsRUFBZ0U7QUFDOUQ7QUFDQSxVQUFBLE1BQUksQ0FBQ0MsZUFBTCxDQUFxQmhELENBQXJCOztBQUNBO0FBQ0Q7QUFDRjtBQUNGLEtBVGdDLEVBUzlCLEdBVDhCLENBQWpDO0FBVUQsR0F0S007QUF1S1BnRCxFQUFBQSxlQXZLTywyQkF1S1NDLEVBdktULEVBdUthO0FBQ2xCLFNBQUs5QixXQUFMLENBQWlCK0IsV0FBakIsR0FBK0IsS0FBSzNGLG1CQUFMLENBQXlCMEYsRUFBekIsQ0FBL0I7QUFDQSxTQUFLOUIsV0FBTCxDQUFpQnJDLElBQWpCLENBQXNCcUUsS0FBdEIsR0FBOEIsR0FBOUI7QUFDQSxTQUFLaEMsV0FBTCxDQUFpQnJDLElBQWpCLENBQXNCSyxNQUF0QixHQUErQixJQUEvQjtBQUNBLFNBQUtnQyxXQUFMLENBQWlCckMsSUFBakIsQ0FBc0JDLFNBQXRCLENBQWdDeEMsRUFBRSxDQUFDNkcsTUFBSCxDQUFVLEdBQVYsQ0FBaEM7QUFDRCxHQTVLTTtBQTZLUC9ELEVBQUFBLGVBN0tPLDZCQTZLVztBQUNoQixTQUFLOEIsV0FBTCxDQUFpQnJDLElBQWpCLENBQXNCSyxNQUF0QixHQUErQixLQUEvQjtBQUNELEdBL0tNO0FBZ0xQc0QsRUFBQUEsWUFoTE8sMEJBZ0xRO0FBQ2IsUUFBSSxLQUFLcEUsS0FBTCxHQUFhLEtBQUtHLFNBQUwsQ0FBZXFFLE1BQTVCLElBQXNDLEtBQUs5RSxLQUFMLElBQWMsS0FBS1MsU0FBTCxDQUFlLEtBQUtILEtBQUwsR0FBYSxDQUE1QixFQUErQk4sS0FBdkYsRUFBOEY7QUFDNUYsV0FBS00sS0FBTDtBQUNBLFdBQUtBLEtBQUwsR0FBYyxLQUFLRyxTQUFMLENBQWVxRSxNQUFmLEdBQXdCLENBQXRDLEdBQTJDLEtBQUtRLFVBQUwsRUFBM0MsR0FBK0QsS0FBS0MsU0FBTCxFQUEvRDtBQUNEOztBQUNELFNBQUsxRSxXQUFMLENBQWlCakIsSUFBakIsQ0FBc0IsS0FBS0ksS0FBM0IsRUFBa0MsS0FBS1MsU0FBTCxDQUFlLEtBQUtILEtBQUwsR0FBYSxDQUE1QixDQUFsQyxFQUFrRSxLQUFLQSxLQUF2RTtBQUNELEdBdExNO0FBdUxQO0FBQ0FrRixFQUFBQSxPQXhMTyxtQkF3TENDLEtBeExELEVBd0xROUMsR0F4TFIsRUF3TGE7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQUksS0FBSzhCLFFBQUwsR0FBZ0IsS0FBSzFFLFdBQUwsQ0FBaUJHLE1BQWpCLENBQXdCQyxJQUF4QixDQUE2QnVGLFdBQWpELEVBQThEO0FBQzVELFdBQUtqQixRQUFMLElBQWlCLENBQWpCO0FBQ0EsV0FBS2tCLGFBQUw7QUFDRDtBQUNGLEdBeE1NO0FBeU1QO0FBQ0FuRixFQUFBQSxjQTFNTyw0QkEwTVU7QUFDZixTQUFLaUUsUUFBTCxHQUFnQixDQUFoQjtBQUNBLFNBQUt0QixTQUFMLENBQWVwQyxJQUFmLENBQW9CSyxNQUFwQixHQUE2QixLQUE3QjtBQUNELEdBN01NO0FBOE1QdUUsRUFBQUEsYUE5TU8sMkJBOE1TO0FBQ2QsU0FBS3hDLFNBQUwsQ0FBZXBDLElBQWYsQ0FBb0JxRSxLQUFwQixHQUE0QixHQUE1QjtBQUNBLFNBQUtqQyxTQUFMLENBQWV2QyxNQUFmLEdBQXdCLEtBQUs2RCxRQUE3QjtBQUNBLFNBQUt0QixTQUFMLENBQWVwQyxJQUFmLENBQW9CSyxNQUFwQixHQUE2QixJQUE3QjtBQUNBLFNBQUsrQixTQUFMLENBQWVwQyxJQUFmLENBQW9CQyxTQUFwQixDQUE4QnhDLEVBQUUsQ0FBQzZHLE1BQUgsQ0FBVSxHQUFWLENBQTlCO0FBQ0QsR0FuTk07QUFvTlA7QUFDQWxCLEVBQUFBLHFCQXJOTyxtQ0FxTmlCO0FBQ3RCLFNBQUtsRixjQUFMLENBQW9COEIsSUFBcEIsQ0FBeUJLLE1BQXpCLEdBQWtDLElBQWxDO0FBQ0EsU0FBS25DLGNBQUwsQ0FBb0I4QixJQUFwQixDQUF5QnVELENBQXpCLEdBQTZCLENBQTdCO0FBQ0EsU0FBS3JGLGNBQUwsQ0FBb0I4QixJQUFwQixDQUF5QndELENBQXpCLEdBQTZCLENBQTdCO0FBQ0EsU0FBS3RGLGNBQUwsQ0FBb0I4QixJQUFwQixDQUF5QnFFLEtBQXpCLEdBQWlDLENBQWpDO0FBQ0QsR0ExTk07QUEyTlA7QUFDQWYsRUFBQUEsbUJBNU5PLCtCQTROYTNCLEdBNU5iLEVBNE5rQkMsR0E1TmxCLEVBNE51QmlELFFBNU52QixFQTROaUM7QUFDdEM7QUFDQSxTQUFLM0csY0FBTCxDQUFvQjJCLE1BQXBCLEdBQTZCOEIsR0FBN0I7QUFDQSxRQUFJbUQsTUFBTSxHQUFHbkgsRUFBRSxDQUFDb0gsS0FBSCxDQUFTcEgsRUFBRSxDQUFDcUgsTUFBSCxDQUFVLEdBQVYsRUFBZXBELEdBQUcsQ0FBQzJCLENBQW5CLEVBQXNCM0IsR0FBRyxDQUFDNEIsQ0FBMUIsQ0FBVCxFQUF1QzdGLEVBQUUsQ0FBQ3NILE9BQUgsQ0FBVyxHQUFYLEVBQWdCLEdBQWhCLENBQXZDLEVBQTZEQyxNQUE3RCxDQUFvRXZILEVBQUUsQ0FBQ3dILFdBQUgsRUFBcEUsQ0FBYjtBQUNBLFFBQUlDLEdBQUcsR0FBR3pILEVBQUUsQ0FBQzBILFFBQUgsQ0FBWVAsTUFBWixFQUFvQkQsUUFBcEIsQ0FBVjtBQUNBLFNBQUszRyxjQUFMLENBQW9COEIsSUFBcEIsQ0FBeUJDLFNBQXpCLENBQW1DbUYsR0FBbkM7QUFDRCxHQWxPTTtBQW1PUDtBQUNBWixFQUFBQSxTQXBPTyx1QkFvT0s7QUFDVixTQUFLeEYsV0FBTCxDQUFpQnNHLE9BQWpCLENBQXlCQyxPQUF6QixDQUFpQyxDQUFqQzs7QUFDQSxTQUFLdkcsV0FBTCxDQUFpQnNHLE9BQWpCLENBQXlCQyxPQUF6QixDQUFpQyxDQUFqQzs7QUFDQSxTQUFLdkcsV0FBTCxDQUFpQndHLFFBQWpCLENBQTBCQyxLQUExQjs7QUFDQSxTQUFLckgsYUFBTCxDQUFtQlMsSUFBbkIsQ0FBd0IsSUFBeEIsRUFBOEIsS0FBS1UsS0FBbkMsRUFBMEMsS0FBS0csU0FBL0MsRUFBMEQsS0FBS1QsS0FBL0QsRUFKVSxDQUk0RDs7QUFDdEUsU0FBS1osWUFBTCxDQUFrQm1HLFNBQWxCO0FBQ0EsU0FBS25HLFlBQUwsQ0FBa0JxSCxlQUFsQixDQUFrQyxLQUFLbkcsS0FBdkM7QUFDQSxTQUFLUixLQUFMLENBQVc0RyxPQUFYLEdBQXFCLENBQXJCOztBQUNBLFFBQUksS0FBSzNHLFdBQUwsQ0FBaUJ3QixNQUFqQixDQUF3QlIsSUFBeEIsQ0FBNkJLLE1BQWpDLEVBQXlDO0FBQ3ZDLFdBQUtyQixXQUFMLENBQWlCd0IsTUFBakIsQ0FBd0JvRixhQUF4QjtBQUNEO0FBQ0YsR0EvT007QUFnUFA7QUFDQXJCLEVBQUFBLFVBalBPLHdCQWlQTTtBQUNYO0FBQ0EsU0FBS3NCLGlCQUFMO0FBQ0QsR0FwUE07QUFxUFA7QUFDQUMsRUFBQUEsZUF0UE8sMkJBc1BTQyxPQXRQVCxFQXNQaUI7QUFBQTs7QUFDdEJDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixPQUFaOztBQUNBLFFBQUksS0FBS0csU0FBVCxFQUFvQjtBQUNsQjtBQUNELEtBRkQsTUFFTztBQUNMLFdBQUtBLFNBQUwsR0FBaUIsSUFBakI7QUFDRDs7QUFDRDdDLElBQUFBLFVBQVUsQ0FBQyxZQUFNO0FBQ2YsTUFBQSxNQUFJLENBQUM2QyxTQUFMLEdBQWlCLEtBQWpCO0FBQ0QsS0FGUyxFQUVQLEdBRk8sQ0FBVjs7QUFHQSxRQUFJSCxPQUFNLElBQUlBLE9BQU0sQ0FBQ0ksYUFBckIsRUFBb0M7QUFDbENKLE1BQUFBLE9BQU0sR0FBRyxDQUFUO0FBQ0QsS0FGRCxNQUVPO0FBQ0xBLE1BQUFBLE9BQU0sR0FBR0EsT0FBTSxJQUFJLENBQW5CO0FBQ0Q7O0FBQ0QsU0FBSy9HLFdBQUwsQ0FBaUJzRyxPQUFqQixDQUF5QmMsVUFBekIsQ0FBb0MsQ0FBcEM7O0FBQ0EsU0FBS2hELHFCQUFMO0FBQ0EsU0FBS2xGLGNBQUwsQ0FBb0IyQixNQUFwQixHQUE2QixLQUFLSCxTQUFMLENBQWUsS0FBS0gsS0FBTCxHQUFhLENBQTVCLEVBQStCOEcsSUFBL0IsR0FBc0NOLE9BQW5FO0FBQ0EsU0FBSzFILFlBQUwsQ0FBa0JpSSxZQUFsQixDQUErQixLQUFLL0csS0FBcEM7QUFDQSxTQUFLSyxTQUFMLENBQWVDLE1BQWYsR0FBd0IsS0FBS0gsU0FBTCxDQUFlLEtBQUtILEtBQUwsR0FBYSxDQUE1QixFQUErQmdILElBQXZEO0FBQ0FsRCxJQUFBQSxVQUFVLENBQUMsWUFBTTtBQUNmLE1BQUEsTUFBSSxDQUFDQyxtQkFBTCxDQUF5QixNQUFJLENBQUM1RCxTQUFMLENBQWUsTUFBSSxDQUFDSCxLQUFMLEdBQWEsQ0FBNUIsRUFBK0I4RyxJQUEvQixHQUFzQ04sT0FBL0QsRUFBdUU7QUFDckV4QyxRQUFBQSxDQUFDLEVBQUUsQ0FBQyxHQURpRTtBQUVyRUMsUUFBQUEsQ0FBQyxFQUFFO0FBRmtFLE9BQXZFLEVBR0c3RixFQUFFLENBQUM4RixRQUFILENBQVksWUFBTTtBQUNuQjtBQUNBLFFBQUEsTUFBSSxDQUFDOUMsTUFBTCxDQUFZLE1BQUksQ0FBQ2pCLFNBQUwsQ0FBZSxNQUFJLENBQUNILEtBQUwsR0FBYSxDQUE1QixFQUErQjhHLElBQS9CLEdBQXNDTixPQUFsRCxFQUEwRFMsSUFBMUQ7O0FBQ0EsUUFBQSxNQUFJLENBQUN6SCxLQUFMLENBQVc0RyxPQUFYLEdBQXFCLENBQXJCO0FBQ0EsUUFBQSxNQUFJLENBQUN6SCxjQUFMLENBQW9COEIsSUFBcEIsQ0FBeUJLLE1BQXpCLEdBQWtDLEtBQWxDO0FBQ0QsT0FMRSxDQUhIO0FBU0QsS0FWUyxFQVVQLEdBVk8sQ0FBVjtBQVdBLFNBQUtvRyxpQkFBTDtBQUNBLFNBQUs5QyxZQUFMO0FBQ0QsR0F2Uk07QUF3UlA7QUFDQVosRUFBQUEsV0F6Uk8sdUJBeVJLcEIsR0F6UkwsRUF5UlU7QUFDZixTQUFLaEQsWUFBTCxDQUFrQmtCLE1BQWxCLEdBQTJCLE9BQU84QixHQUFHLEdBQUcsRUFBYixDQUEzQjtBQUNBLFNBQUtoRCxZQUFMLENBQWtCcUIsSUFBbEIsQ0FBdUJ1RCxDQUF2QixHQUEyQixDQUFDLEdBQTVCO0FBQ0EsU0FBSzVFLFlBQUwsQ0FBa0JxQixJQUFsQixDQUF1QndELENBQXZCLEdBQTJCLEdBQTNCO0FBQ0EsU0FBSzdFLFlBQUwsQ0FBa0JxQixJQUFsQixDQUF1QkMsU0FBdkIsQ0FBaUN0QyxFQUFFLENBQUMwSCxRQUFILENBQVkxSCxFQUFFLENBQUMrSSxnQkFBSCxFQUFaLEVBQW1DL0ksRUFBRSxDQUFDZ0osTUFBSCxDQUFVLEdBQVYsRUFBZSxDQUFmLEVBQWtCLEVBQWxCLENBQW5DLEVBQTBEaEosRUFBRSxDQUFDK0ksZ0JBQUgsRUFBMUQsQ0FBakM7QUFDQSxRQUFJNUIsTUFBTSxHQUFHbkgsRUFBRSxDQUFDMEgsUUFBSCxDQUFZMUgsRUFBRSxDQUFDc0gsT0FBSCxDQUFXLEdBQVgsRUFBZ0IsR0FBaEIsQ0FBWixFQUFrQ3hILEVBQUUsQ0FBQzZHLE1BQUgsQ0FBVSxHQUFWLENBQWxDLENBQWI7QUFDQSxTQUFLdkUsYUFBTCxDQUFtQkMsSUFBbkIsQ0FBd0IrQixNQUF4QixDQUErQjlCLFNBQS9CLENBQXlDNkUsTUFBekM7QUFDRCxHQWhTTTtBQWlTUDtBQUNBO0FBQ0FoQyxFQUFBQSxVQW5TTyxzQkFtU0k4RCxNQW5TSixFQW1TWTtBQUNqQkEsSUFBQUEsTUFBTSxHQUFHQSxNQUFNLElBQUksQ0FBbkI7O0FBQ0EsUUFBSSxLQUFLN0gsS0FBTCxDQUFXNEcsT0FBWCxJQUFzQixDQUF0QixLQUE0QmlCLE1BQU0sSUFBSSxLQUFLcEgsVUFBTCxJQUFtQixDQUF6RCxDQUFKLEVBQWlFO0FBQy9ELFdBQUtULEtBQUwsQ0FBVzhILFFBQVg7O0FBQ0EsV0FBS0MsY0FBTDs7QUFDQSxVQUFJLEtBQUs5SCxXQUFMLENBQWlCd0IsTUFBakIsQ0FBd0JSLElBQXhCLENBQTZCSyxNQUFqQyxFQUF5QztBQUN2QztBQUNBLGFBQUtyQixXQUFMLENBQWlCd0IsTUFBakIsQ0FBd0JzQyxVQUF4QixDQUFtQyxLQUFLdkQsS0FBeEMsRUFBK0MsS0FBS04sS0FBcEQ7QUFDRDtBQUNGLEtBUEQsTUFPTyxJQUFJLENBQUMySCxNQUFMLEVBQWE7QUFDbEIsV0FBSzdILEtBQUwsQ0FBV2dJLFNBQVg7QUFDRDtBQUNGLEdBL1NNO0FBZ1RQQyxFQUFBQSxlQWhUTyw2QkFnVFc7QUFDaEIsUUFBSSxLQUFLaEksV0FBTCxDQUFpQndCLE1BQWpCLENBQXdCUixJQUF4QixDQUE2QkssTUFBakMsRUFBeUM7QUFDdkMsV0FBS3JCLFdBQUwsQ0FBaUJ3QixNQUFqQixDQUF3QnlHLGNBQXhCLENBQXVDLENBQXZDO0FBQ0QsS0FGRCxNQUVPO0FBQ0wsV0FBS25CLGVBQUwsQ0FBcUIsQ0FBckI7QUFDRDtBQUNGLEdBdFRNO0FBdVRQb0IsRUFBQUEsWUF2VE8sMEJBdVRRO0FBQ2IsU0FBS3BCLGVBQUwsQ0FBcUIsQ0FBckI7QUFDRCxHQXpUTTtBQTBUUHFCLEVBQUFBLFFBMVRPLHNCQTBUSTtBQUNULFNBQUszSCxVQUFMLElBQW1CLENBQW5CO0FBQ0EsU0FBS21CLE1BQUwsQ0FBWSxDQUFaLEVBQWU2RixJQUFmO0FBQ0QsR0E3VE07QUE4VFA7QUFDQUMsRUFBQUEsaUJBL1RPLCtCQStUYTtBQUNsQixRQUFJVyxhQUFhLEdBQUcsS0FBSzFILFNBQUwsQ0FBZSxLQUFLSCxLQUFwQixDQUFwQjtBQUNELEdBalVNO0FBa1VQO0FBQ0FzRyxFQUFBQSxpQkFuVU8sK0JBbVVhLENBRW5CLENBclVNO0FBc1VQaUIsRUFBQUEsY0F0VU8sNEJBc1VVO0FBQ2YsU0FBS3ZFLFNBQUwsQ0FBZTFDLE1BQWYsR0FBd0IsT0FBTyxLQUFLWixLQUFMLEdBQWEsRUFBcEIsQ0FBeEI7QUFDQSxTQUFLWixZQUFMLENBQWtCZ0osTUFBbEIsQ0FBeUIsS0FBSzlILEtBQTlCO0FBQ0EsU0FBS2lELFFBQUwsQ0FBYzNDLE1BQWQsR0FBdUIsS0FBS0gsU0FBTCxDQUFlLEtBQUtILEtBQUwsR0FBYSxDQUE1QixFQUErQmdILElBQXRELENBSGUsQ0FJZjtBQUNEO0FBM1VNLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBoZXl1Y2hhbmdcbiAqIEBmaWxlICBVSSDliIbmlbDmjqfliLblmahcbiAqL1xudmFyIEFDID0gcmVxdWlyZSgnR2FtZUFjdCcpXG5cbmNjLkNsYXNzKHtcbiAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuICBwcm9wZXJ0aWVzOiB7XG4gICAgc2NvcmVQcmVmYWI6IGNjLlByZWZhYixcbiAgICBzY29yZVBhcnRpY2xlUHJlZmFiOiBjYy5QcmVmYWIsXG4gICAgbWFpblNjb3JlTGFiZWw6IGNjLkxhYmVsLFxuICAgIHN1Y2Nlc3NEaWFsb2c6IHJlcXVpcmUoJ3N1Y2Nlc3NEaWFsb2cnKSxcbiAgICBjaGFyYWN0ZXJNZ3I6IHJlcXVpcmUoJ2NoYXJhY3RlcicpLFxuICAgIGZhaWxEaWFsb2c6IGNjLk5vZGUsXG4gICAgbXVsdFByb3BQcmVmYWI6IGNjLlByZWZhYixcbiAgICAvLyBwcm9ncmVzc0JhcjogcmVxdWlyZSgncHJvZ3Jlc3MnKSxcbiAgICAvLyBsZWZ0U3RlcExhYmVsOiBjYy5MYWJlbCxcbiAgICBjaGFpblNwcml0ZUZyYW1lQXJyOiBbY2MuU3ByaXRlRnJhbWVdLFxuICAgIHN0ZXBBbmlMYWJlbDogY2MuTGFiZWwsXG5cbiAgICAvL+aPkOekuuWwj+ahhlxuICAgIHRpcEJveDogcmVxdWlyZSgndGlwQm94JylcbiAgfSxcbiAgaW5pdChnKSB7XG4gICAgdGhpcy5fZ2FtZSA9IGdcbiAgICB0aGlzLl9jb250cm9sbGVyID0gZy5fY29udHJvbGxlclxuICAgIHRoaXMuc2NvcmUgPSAwXG4gICAgdGhpcy5sZWZ0U3RlcCA9IHRoaXMuX2NvbnRyb2xsZXIuY29uZmlnLmpzb24ub3JpZ2luU3RlcFxuICAgIHRoaXMuY2hhaW4gPSAxXG4gICAgdGhpcy5sZXZlbCA9IDFcbiAgICB0aGlzLnJldml2ZVRpbWUgPSAwXG4gICAgdGhpcy5jbG9zZU11bHRMYWJlbCgpXG4gICAgdGhpcy5sZXZlbERhdGEgPSBnLl9jb250cm9sbGVyLmdhbWVEYXRhLmpzb24ubGV2ZWxEYXRhXG4gICAgdGhpcy5uYW1lTGFiZWwuc3RyaW5nID0gXCLokIzlv4PmgqZcIlxuICAgIHRoaXMucHJvZ3Jlc3NCYXIuaW5pdCgwLCB0aGlzLmxldmVsRGF0YVt0aGlzLmxldmVsIC0gMV0sIHRoaXMubGV2ZWwpXG4gICAgdGhpcy5sZWZ0U3RlcExhYmVsLnN0cmluZyA9IHRoaXMubGVmdFN0ZXBcbiAgICB0aGlzLnN0ZXBBbmlMYWJlbC5ub2RlLnJ1bkFjdGlvbihjYy5oaWRlKCkpXG4gICAgdGhpcy5zY29yZVRpbWVyID0gW11cbiAgICB0aGlzLmN1cnJlbnRBZGRlZFNjb3JlID0gMFxuICAgIHRoaXMubWFpblNjb3JlTGFiZWwubm9kZS5hY3RpdmUgPSBmYWxzZVxuICAgIHRoaXMuY2hhcmFjdGVyTWdyLnNob3dIZXJvQ2hhcmFjdGVyKHRoaXMubGV2ZWwpXG4gICAgdGhpcy5oaWRlQ2hhaW5TcHJpdGUoKVxuXG4gICAgdGhpcy50aXBCb3guaW5pdCh0aGlzLCAwKVxuICAgIGlmICh0aGlzLl9jb250cm9sbGVyLnNvY2lhbC5ub2RlLmFjdGl2ZSkge1xuICAgICAgbGV0IGhlaWdodCA9IHRoaXMuX2NvbnRyb2xsZXIuc29jaWFsLmdldEhpZ2hlc3RMZXZlbCgpXG4gICAgICBpZiAoaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMub25TdGVwKHRoaXMubGV2ZWxEYXRhWytoZWlnaHQgLSAxXS5naWZ0U3RlcClcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIHN0YXJ0KCkge1xuICAgIHRoaXMuZ2VuZXJhdGVQb29sKClcbiAgICB0aGlzLmJpbmROb2RlKClcbiAgfSxcbiAgZ2VuZXJhdGVQb29sKCkge1xuICAgIHRoaXMuc2NvcmVQb29sID0gbmV3IGNjLk5vZGVQb29sKClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpKyspIHtcbiAgICAgIGxldCBzY29yZSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuc2NvcmVQcmVmYWIpXG4gICAgICB0aGlzLnNjb3JlUG9vbC5wdXQoc2NvcmUpXG4gICAgfVxuICAgIHRoaXMuc2NvcmVQYXJ0aWNsZVBvb2wgPSBuZXcgY2MuTm9kZVBvb2woKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjA7IGkrKykge1xuICAgICAgbGV0IHNjb3JlUGFydGljbGUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLnNjb3JlUGFydGljbGVQcmVmYWIpXG4gICAgICB0aGlzLnNjb3JlUGFydGljbGVQb29sLnB1dChzY29yZVBhcnRpY2xlKVxuICAgIH1cbiAgICB0aGlzLm11bHRQcm9wUG9vbCA9IG5ldyBjYy5Ob2RlUG9vbCgpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIGxldCBtdWx0UHJvcCA9IGNjLmluc3RhbnRpYXRlKHRoaXMubXVsdFByb3BQcmVmYWIpXG4gICAgICB0aGlzLm11bHRQcm9wUG9vbC5wdXQobXVsdFByb3ApXG4gICAgfVxuICB9LFxuICAvLyDlrp7kvovljJbljZXkuKrmlrnlnZdcbiAgaW5zdGFudGlhdGVTY29yZShzZWxmLCBudW0sIHBvcykge1xuICAgIGxldCBzY29yZSA9IG51bGxcbiAgICBpZiAoc2VsZi5zY29yZVBvb2wgJiYgc2VsZi5zY29yZVBvb2wuc2l6ZSgpID4gMCkge1xuICAgICAgc2NvcmUgPSBzZWxmLnNjb3JlUG9vbC5nZXQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBzY29yZSA9IGNjLmluc3RhbnRpYXRlKHNlbGYuc2NvcmVQcmVmYWIpXG4gICAgfVxuICAgIHNjb3JlLnBhcmVudCA9IHRoaXMuc2NvcmVDb250YWluZXJcbiAgICBzY29yZS5nZXRDb21wb25lbnQoJ3Njb3JlQ2VsbCcpLmluaXQoc2VsZiwgbnVtLCBwb3MpXG5cbiAgICBsZXQgc2NvcmVQYXJ0aWNsZSA9IG51bGxcbiAgICBpZiAoc2VsZi5zY29yZVBhcnRpY2xlUG9vbCAmJiBzZWxmLnNjb3JlUGFydGljbGVQb29sLnNpemUoKSA+IDApIHtcbiAgICAgIHNjb3JlUGFydGljbGUgPSBzZWxmLnNjb3JlUGFydGljbGVQb29sLmdldCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNjb3JlUGFydGljbGUgPSBjYy5pbnN0YW50aWF0ZShzZWxmLnNjb3JlUGFydGljbGVQcmVmYWIpXG4gICAgfVxuICAgIHNjb3JlUGFydGljbGUucGFyZW50ID0gdGhpcy5zY29yZUNvbnRhaW5lclxuICAgIHNjb3JlUGFydGljbGUuZ2V0Q29tcG9uZW50KCdzY29yZVBhcnRpY2xlJykuaW5pdChzZWxmLCBwb3MsIHRoaXMuX2NvbnRyb2xsZXIuY29uZmlnLmpzb24uc2NvcmVQYXJ0aWNsZVRpbWUpXG4gIH0sXG4gIGJpbmROb2RlKCkge1xuICAgIHRoaXMubGVmdFN0ZXBMYWJlbCA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZSgnVUknKS5nZXRDaGlsZEJ5TmFtZSgnbGVmdFN0ZXBOb2RlJykuZ2V0Q2hpbGRCeU5hbWUoJ0xhYmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKVxuICAgIHRoaXMucHJvZ3Jlc3NCYXIgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ1VJJykuZ2V0Q2hpbGRCeU5hbWUoJ3Njb3JlTm9kZScpLmdldENoaWxkQnlOYW1lKCdwcm9ncmVzc0JhcicpLmdldENvbXBvbmVudCgncHJvZ3Jlc3MnKVxuICAgIHRoaXMuc2NvcmVDb250YWluZXIgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ1VJJykuZ2V0Q2hpbGRCeU5hbWUoJ3Njb3JlR3JvdXAnKVxuICAgIHRoaXMubXVsdExhYmVsID0gdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlLmdldENoaWxkQnlOYW1lKCdtdWx0JykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKVxuICAgIHRoaXMubmFtZUxhYmVsID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKCdVSScpLmdldENoaWxkQnlOYW1lKCdzY29yZU5vZGUnKS5nZXRDaGlsZEJ5TmFtZSgncHJvZ3Jlc3NCYXInKS5nZXRDaGlsZEJ5TmFtZSgnbmFtZScpLmdldENvbXBvbmVudChjYy5MYWJlbClcbiAgICAvLyDlpLHotKXml7bmm7TmlrDlpLHotKVVSVxuICAgIHRoaXMuY2hhaW5TcHJpdGUgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ1VJJykuZ2V0Q2hpbGRCeU5hbWUoJ2NoYWluU3ByaXRlJykuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSlcbiAgICB0aGlzLmZhaWxTY29yZSA9IHRoaXMuZmFpbERpYWxvZy5nZXRDaGlsZEJ5TmFtZSgnaW5mbycpLmdldENoaWxkQnlOYW1lKCdzY29yZScpLmdldENvbXBvbmVudChjYy5MYWJlbClcbiAgICB0aGlzLmZhaWxOYW1lID0gdGhpcy5mYWlsRGlhbG9nLmdldENoaWxkQnlOYW1lKCdpbmZvJykuZ2V0Q2hpbGRCeU5hbWUoJ2xldmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKVxuICAgIHRoaXMuZmFpbFNwcml0ZSA9IHRoaXMuZmFpbERpYWxvZy5nZXRDaGlsZEJ5TmFtZSgnaW5mbycpLmdldENoaWxkQnlOYW1lKCdzcHJpdGUnKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKVxuICAgIHRoaXMuZmFpbEhpZ2hTY29yZSA9IHRoaXMuZmFpbERpYWxvZy5nZXRDaGlsZEJ5TmFtZSgnaW5mbycpLmdldENoaWxkQnlOYW1lKCdoaWdoU2NvcmUnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpXG4gIH0sXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tIOWIhuaVsOaOp+WItiAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8g5aKe5YqgIOWHj+WwkeatpeaVsOW5tuS4lOWIt+aWsFVJXG4gIG9uU3RlcChudW0pIHtcbiAgICB0aGlzLmxlZnRTdGVwICs9IG51bVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAodGhpcy5sZWZ0U3RlcCA8IDApIHtcbiAgICAgICAgdGhpcy5sZWZ0U3RlcCA9IDBcbiAgICAgICAgdGhpcy5vbkdhbWVPdmVyKClcbiAgICAgICAgcmVzb2x2ZShmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUodHJ1ZSlcbiAgICAgIH1cbiAgICAgIHRoaXMubGVmdFN0ZXBMYWJlbC5zdHJpbmcgPSB0aGlzLmxlZnRTdGVwXG4gICAgICBpZiAobnVtID4gMCkge1xuICAgICAgICB0aGlzLnNob3dTdGVwQW5pKG51bSlcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuXG4gIC8v5aKe5Yqg5YiG5pWw5oC75o6n5Yi2IOiOt+WPlui/nuWHu1xuICBhZGRTY29yZShwb3MsIHNjb3JlKSB7XG4gICAgc2NvcmUgPSBzY29yZSB8fCB0aGlzLl9jb250cm9sbGVyLmNvbmZpZy5qc29uLnNjb3JlQmFzZVxuICAgIC8vIOS4gOasoea2iOmZpOWPr+S7peWPoGNoYWluXG4gICAgaWYgKHRoaXMuY2hhaW5UaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2hhaW5UaW1lcilcbiAgICB9XG4gICAgdGhpcy5pbml0Q3VycmVudFNjb3JlTGFiZWwoKVxuICAgIHRoaXMuY2hhaW5UaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLm9uQ3VycmVudFNjb3JlTGFiZWwodGhpcy5jdXJyZW50QWRkZWRTY29yZSwge1xuICAgICAgICAgIHg6IC02MCxcbiAgICAgICAgICB5OiAzNTVcbiAgICAgICAgfSwgY2MuY2FsbEZ1bmMoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc2NvcmUgKz0gdGhpcy5jdXJyZW50QWRkZWRTY29yZSAqIHRoaXMubXVsdGlwbGVcbiAgICAgICAgICB0aGlzLmNoZWNrTGV2ZWxVcCgpXG4gICAgICAgICAgdGhpcy5jaGFpbiA9IDFcbiAgICAgICAgICB0aGlzLmNsb3NlTXVsdExhYmVsKClcbiAgICAgICAgICB0aGlzLmhpZGVDaGFpblNwcml0ZSgpXG4gICAgICAgICAgdGhpcy5jdXJyZW50QWRkZWRTY29yZSA9IDBcbiAgICAgICAgICB0aGlzLm1haW5TY29yZUxhYmVsLm5vZGUuYWN0aXZlID0gZmFsc2VcbiAgICAgICAgfSwgdGhpcykpXG4gICAgICB9LCA1MDAgLyAxXG4gICAgICAvLyAoY2MuZ2FtZS5nZXRGcmFtZVJhdGUoKSAvIDYwKVxuICAgIClcbiAgICBsZXQgYWRkU2NvcmUgPSBzY29yZSA9PSB0aGlzLl9jb250cm9sbGVyLmNvbmZpZy5qc29uLnNjb3JlQmFzZSA/IChzY29yZSArICh0aGlzLmNoYWluID4gMTYgPyAxNiA6ICh0aGlzLmNoYWluIC0gMSkpICogMTApIDogc2NvcmVcbiAgICAvLyBsZXQgYWRkU2NvcmUgPSBzY29yZSA9PSAxMCA/IHNjb3JlICogKHRoaXMuY2hhaW4gPiAxMCA/IDEwIDogdGhpcy5jaGFpbikgOiBzY29yZVxuICAgIHRoaXMuY3VycmVudEFkZGVkU2NvcmUgKz0gYWRkU2NvcmVcbiAgICB0aGlzLm1haW5TY29yZUxhYmVsLnN0cmluZyA9IHRoaXMuY3VycmVudEFkZGVkU2NvcmVcbiAgICB0aGlzLmluc3RhbnRpYXRlU2NvcmUodGhpcywgYWRkU2NvcmUsIHBvcylcbiAgICB0aGlzLmNoYWluKytcbiAgICB0aGlzLmNoZWNrQ2hhaW4oKVxuICB9LFxuICAvLyDliKTmlq3ov57lh7tcbiAgY2hlY2tDaGFpbigpIHtcbiAgICBpZiAodGhpcy5jaGVja0NoYWluVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNoZWNrQ2hhaW5UaW1lcilcbiAgICB9XG4gICAgdGhpcy5jaGVja0NoYWluVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGxldCBjb25maWcgPSB0aGlzLl9jb250cm9sbGVyLmNvbmZpZy5qc29uLmNoYWluQ29uZmlnXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbmZpZy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAodGhpcy5jaGFpbiA8PSBjb25maWdbaV0ubWF4ICYmIHRoaXMuY2hhaW4gPj0gY29uZmlnW2ldLm1pbikge1xuICAgICAgICAgIC8vICBjb25zb2xlLmxvZyhjb25maWdbaV0udGV4dClcbiAgICAgICAgICB0aGlzLnNob3dDaGFpblNwcml0ZShpKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwgMjAwKVxuICB9LFxuICBzaG93Q2hhaW5TcHJpdGUoaWQpIHtcbiAgICB0aGlzLmNoYWluU3ByaXRlLnNwcml0ZUZyYW1lID0gdGhpcy5jaGFpblNwcml0ZUZyYW1lQXJyW2lkXVxuICAgIHRoaXMuY2hhaW5TcHJpdGUubm9kZS5zY2FsZSA9IDAuNVxuICAgIHRoaXMuY2hhaW5TcHJpdGUubm9kZS5hY3RpdmUgPSB0cnVlXG4gICAgdGhpcy5jaGFpblNwcml0ZS5ub2RlLnJ1bkFjdGlvbihBQy5wb3BPdXQoMC4zKSlcbiAgfSxcbiAgaGlkZUNoYWluU3ByaXRlKCkge1xuICAgIHRoaXMuY2hhaW5TcHJpdGUubm9kZS5hY3RpdmUgPSBmYWxzZVxuICB9LFxuICBjaGVja0xldmVsVXAoKSB7XG4gICAgaWYgKHRoaXMubGV2ZWwgPCB0aGlzLmxldmVsRGF0YS5sZW5ndGggJiYgdGhpcy5zY29yZSA+PSB0aGlzLmxldmVsRGF0YVt0aGlzLmxldmVsIC0gMV0uc2NvcmUpIHtcbiAgICAgIHRoaXMubGV2ZWwrK1xuICAgICAgdGhpcy5sZXZlbCA+ICh0aGlzLmxldmVsRGF0YS5sZW5ndGggKyAxKSA/IHRoaXMubGV2ZWxMaW1pdCgpIDogdGhpcy5vbkxldmVsVXAoKVxuICAgIH1cbiAgICB0aGlzLnByb2dyZXNzQmFyLmluaXQodGhpcy5zY29yZSwgdGhpcy5sZXZlbERhdGFbdGhpcy5sZXZlbCAtIDFdLCB0aGlzLmxldmVsKVxuICB9LFxuICAvLyDlop7liqDlgI3mlbBcbiAgYWRkTXVsdChjb2xvciwgcG9zKSB7XG4gICAgLy9UT0RPOiDliqjmgIHnlJ/miJDkuIDkuKrlm77niYcg56e75Yqo5YiwbXVsdExhYmVs5LiKIOaciWJ1Z1xuICAgIC8vIGlmICh0aGlzLm11bHRQcm9wUG9vbC5zaXplKCkgPiAwKSB7XG4gICAgLy8gICBsZXQgbXVsdFByb3AgPSB0aGlzLm11bHRQcm9wUG9vbC5nZXQoKVxuICAgIC8vICAgbXVsdFByb3AucGFyZW50ID0gdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlXG4gICAgLy8gICBtdWx0UHJvcC54ID0gcG9zLnhcbiAgICAvLyAgIG11bHRQcm9wLnkgPSBwb3MueVxuICAgIC8vICAgbXVsdFByb3AuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSB0aGlzLl9nYW1lLnByb3BTcHJpdGVGcmFtZVtjb2xvciAtIDFdXG4gICAgLy8gICBtdWx0UHJvcC5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MubW92ZVRvKDAuMiwgMTg3LCAwKSwgY2MuY2FsbEZ1bmMoKCkgPT4ge1xuICAgIC8vICAgICB0aGlzLm11bHRQcm9wUG9vbC5wdXQobXVsdFByb3ApXG4gICAgLy8gICB9KSkpXG4gICAgLy8gfVxuICAgIGlmICh0aGlzLm11bHRpcGxlIDwgdGhpcy5fY29udHJvbGxlci5jb25maWcuanNvbi5tYXhNdWx0aXBsZSkge1xuICAgICAgdGhpcy5tdWx0aXBsZSAqPSAyXG4gICAgICB0aGlzLnNob3dNdWx0TGFiZWwoKVxuICAgIH1cbiAgfSxcbiAgLy8g5YWz6Zet5YCN5pWw55qE5pWw5a2X5pi+56S6XG4gIGNsb3NlTXVsdExhYmVsKCkge1xuICAgIHRoaXMubXVsdGlwbGUgPSAxXG4gICAgdGhpcy5tdWx0TGFiZWwubm9kZS5hY3RpdmUgPSBmYWxzZVxuICB9LFxuICBzaG93TXVsdExhYmVsKCkge1xuICAgIHRoaXMubXVsdExhYmVsLm5vZGUuc2NhbGUgPSAwLjVcbiAgICB0aGlzLm11bHRMYWJlbC5zdHJpbmcgPSB0aGlzLm11bHRpcGxlXG4gICAgdGhpcy5tdWx0TGFiZWwubm9kZS5hY3RpdmUgPSB0cnVlXG4gICAgdGhpcy5tdWx0TGFiZWwubm9kZS5ydW5BY3Rpb24oQUMucG9wT3V0KDAuMykpXG4gIH0sXG4gIC8vIOWinuWKoOWIhuaVsOWAjeaVsFxuICBpbml0Q3VycmVudFNjb3JlTGFiZWwoKSB7XG4gICAgdGhpcy5tYWluU2NvcmVMYWJlbC5ub2RlLmFjdGl2ZSA9IHRydWVcbiAgICB0aGlzLm1haW5TY29yZUxhYmVsLm5vZGUueCA9IDBcbiAgICB0aGlzLm1haW5TY29yZUxhYmVsLm5vZGUueSA9IDBcbiAgICB0aGlzLm1haW5TY29yZUxhYmVsLm5vZGUuc2NhbGUgPSAxXG4gIH0sXG4gIC8vIOeUn+aIkOWwj+eahOWIhuaVsOiKgueCuVxuICBvbkN1cnJlbnRTY29yZUxhYmVsKG51bSwgcG9zLCBjYWxsYmFjaykge1xuICAgIC8vIFRPRE86IOWinuWKoOS4gOS4quaSkuiKseeJueaViFxuICAgIHRoaXMubWFpblNjb3JlTGFiZWwuc3RyaW5nID0gbnVtXG4gICAgbGV0IGFjdGlvbiA9IGNjLnNwYXduKGNjLm1vdmVUbygwLjIsIHBvcy54LCBwb3MueSksIGNjLnNjYWxlVG8oMC4yLCAwLjQpKS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoKSlcbiAgICBsZXQgc2VxID0gY2Muc2VxdWVuY2UoYWN0aW9uLCBjYWxsYmFjaylcbiAgICB0aGlzLm1haW5TY29yZUxhYmVsLm5vZGUucnVuQWN0aW9uKHNlcSlcbiAgfSxcbiAgLy8g5Y2H57qnXG4gIG9uTGV2ZWxVcCgpIHtcbiAgICB0aGlzLl9jb250cm9sbGVyLnBhZ2VNZ3IuYWRkUGFnZSgyKVxuICAgIHRoaXMuX2NvbnRyb2xsZXIucGFnZU1nci5hZGRQYWdlKDMpXG4gICAgdGhpcy5fY29udHJvbGxlci5tdXNpY01nci5vbldpbigpXG4gICAgdGhpcy5zdWNjZXNzRGlhbG9nLmluaXQodGhpcywgdGhpcy5sZXZlbCwgdGhpcy5sZXZlbERhdGEsIHRoaXMuc2NvcmUpIC8v5Y2H57qn5LmL5ZCO55qE562J57qnXG4gICAgdGhpcy5jaGFyYWN0ZXJNZ3Iub25MZXZlbFVwKClcbiAgICB0aGlzLmNoYXJhY3Rlck1nci5vblN1Y2Nlc3NEaWFsb2codGhpcy5sZXZlbClcbiAgICB0aGlzLl9nYW1lLl9zdGF0dXMgPSAyXG4gICAgaWYgKHRoaXMuX2NvbnRyb2xsZXIuc29jaWFsLm5vZGUuYWN0aXZlKSB7XG4gICAgICB0aGlzLl9jb250cm9sbGVyLnNvY2lhbC5vcGVuQmFubmVyQWR2KClcbiAgICB9XG4gIH0sXG4gIC8vIOetiee6p+mZkOWItlxuICBsZXZlbExpbWl0KCkge1xuICAgIC8vY29uc29sZS5sb2coJ+etiee6p+i+vuWIsOS4iumZkCcpXG4gICAgdGhpcy5oaWRlTmV4dExldmVsRGF0YSgpXG4gIH0sXG4gIC8vIOeCueWHu+WNh+e6p+aMiemSrlxuICBvbkxldmVsVXBCdXR0b24oZG91YmxlKSB7XG4gICAgY29uc29sZS5sb2coZG91YmxlKVxuICAgIGlmICh0aGlzLmlzTGV2ZWxVcCkge1xuICAgICAgcmV0dXJuXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaXNMZXZlbFVwID0gdHJ1ZVxuICAgIH1cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuaXNMZXZlbFVwID0gZmFsc2VcbiAgICB9LCA1MDApXG4gICAgaWYgKGRvdWJsZSAmJiBkb3VibGUuY3VycmVudFRhcmdldCkge1xuICAgICAgZG91YmxlID0gMVxuICAgIH0gZWxzZSB7XG4gICAgICBkb3VibGUgPSBkb3VibGUgfHwgMVxuICAgIH1cbiAgICB0aGlzLl9jb250cm9sbGVyLnBhZ2VNZ3Iub25PcGVuUGFnZSgxKVxuICAgIHRoaXMuaW5pdEN1cnJlbnRTY29yZUxhYmVsKClcbiAgICB0aGlzLm1haW5TY29yZUxhYmVsLnN0cmluZyA9IHRoaXMubGV2ZWxEYXRhW3RoaXMubGV2ZWwgLSAyXS5zdGVwICogZG91YmxlXG4gICAgdGhpcy5jaGFyYWN0ZXJNZ3Iub25MZXZlbFVwQnRuKHRoaXMubGV2ZWwpXG4gICAgdGhpcy5uYW1lTGFiZWwuc3RyaW5nID0gdGhpcy5sZXZlbERhdGFbdGhpcy5sZXZlbCAtIDFdLm5hbWVcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMub25DdXJyZW50U2NvcmVMYWJlbCh0aGlzLmxldmVsRGF0YVt0aGlzLmxldmVsIC0gMl0uc3RlcCAqIGRvdWJsZSwge1xuICAgICAgICB4OiAtMjQ4LFxuICAgICAgICB5OiAzNTBcbiAgICAgIH0sIGNjLmNhbGxGdW5jKCgpID0+IHtcbiAgICAgICAgLy8gdGhpcy50aXBCb3guaW5pdCh0aGlzKSDmr4/mrKHljYfnuqflsLHlko/or5dcbiAgICAgICAgdGhpcy5vblN0ZXAodGhpcy5sZXZlbERhdGFbdGhpcy5sZXZlbCAtIDJdLnN0ZXAgKiBkb3VibGUpLnRoZW4oKVxuICAgICAgICB0aGlzLl9nYW1lLl9zdGF0dXMgPSAxXG4gICAgICAgIHRoaXMubWFpblNjb3JlTGFiZWwubm9kZS5hY3RpdmUgPSBmYWxzZVxuICAgICAgfSkpXG4gICAgfSwgMzAwKTtcbiAgICB0aGlzLnNob3dOZXh0TGV2ZWxEYXRhKClcbiAgICB0aGlzLmNoZWNrTGV2ZWxVcCgpXG4gIH0sXG4gIC8vIHRvZG86IOaWsOWinuS4gOS4qiDliqjnlLsg5pWw5a2X5LiK5rWu5ZKM57yp5pS+XG4gIHNob3dTdGVwQW5pKG51bSkge1xuICAgIHRoaXMuc3RlcEFuaUxhYmVsLnN0cmluZyA9ICcrJyArIChudW0gKyAnJylcbiAgICB0aGlzLnN0ZXBBbmlMYWJlbC5ub2RlLnggPSAtMjQ4XG4gICAgdGhpcy5zdGVwQW5pTGFiZWwubm9kZS55ID0gNDAwXG4gICAgdGhpcy5zdGVwQW5pTGFiZWwubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MudG9nZ2xlVmlzaWJpbGl0eSgpLCBjYy5tb3ZlQnkoMC42LCAwLCA2MCksIGNjLnRvZ2dsZVZpc2liaWxpdHkoKSkpXG4gICAgbGV0IGFjdGlvbiA9IGNjLnNlcXVlbmNlKGNjLnNjYWxlVG8oMC4yLCAwLjgpLCBBQy5wb3BPdXQoMC44KSlcbiAgICB0aGlzLmxlZnRTdGVwTGFiZWwubm9kZS5wYXJlbnQucnVuQWN0aW9uKGFjdGlvbilcbiAgfSxcbiAgLy8g5ri45oiP57uT5p2fXG4gIC8vIHRvZG8g5aSN5rS7XG4gIG9uR2FtZU92ZXIoaXNUcnVlKSB7XG4gICAgaXNUcnVlID0gaXNUcnVlIHx8IDBcbiAgICBpZiAodGhpcy5fZ2FtZS5fc3RhdHVzICE9IDMgJiYgKGlzVHJ1ZSB8fCB0aGlzLnJldml2ZVRpbWUgPj0gMykpIHtcbiAgICAgIHRoaXMuX2dhbWUuZ2FtZU92ZXIoKVxuICAgICAgdGhpcy51cGRhdGVGYWlsUGFnZSgpXG4gICAgICBpZiAodGhpcy5fY29udHJvbGxlci5zb2NpYWwubm9kZS5hY3RpdmUpIHtcbiAgICAgICAgLy8g5LuF5LiK5Lyg5YiG5pWwXG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIuc29jaWFsLm9uR2FtZU92ZXIodGhpcy5sZXZlbCwgdGhpcy5zY29yZSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFpc1RydWUpIHtcbiAgICAgIHRoaXMuX2dhbWUuYXNrUmV2aXZlKClcbiAgICB9XG4gIH0sXG4gIG9uRG91YmxlU3RlcEJ0bigpIHtcbiAgICBpZiAodGhpcy5fY29udHJvbGxlci5zb2NpYWwubm9kZS5hY3RpdmUpIHtcbiAgICAgIHRoaXMuX2NvbnRyb2xsZXIuc29jaWFsLm9uUmV2aXZlQnV0dG9uKDApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub25MZXZlbFVwQnV0dG9uKDIpXG4gICAgfVxuICB9LFxuICBvbkRvdWJsZVN0ZXAoKSB7XG4gICAgdGhpcy5vbkxldmVsVXBCdXR0b24oMilcbiAgfSxcbiAgb25SZXZpdmUoKSB7XG4gICAgdGhpcy5yZXZpdmVUaW1lICs9IDFcbiAgICB0aGlzLm9uU3RlcCg1KS50aGVuKClcbiAgfSxcbiAgLy8g5bGV56S65LiL5LiA57qn55qE5L+h5oGvXG4gIHNob3dOZXh0TGV2ZWxEYXRhKCkge1xuICAgIGxldCBuZXh0TGV2ZWxEYXRhID0gdGhpcy5sZXZlbERhdGFbdGhpcy5sZXZlbF1cbiAgfSxcbiAgLy8g6L6+5Yiw5pyA6auY57qn5LmL5ZCOIOmakOiXj1xuICBoaWRlTmV4dExldmVsRGF0YSgpIHtcblxuICB9LFxuICB1cGRhdGVGYWlsUGFnZSgpIHtcbiAgICB0aGlzLmZhaWxTY29yZS5zdHJpbmcgPSBcIiBcIiArICh0aGlzLnNjb3JlICsgJycpXG4gICAgdGhpcy5jaGFyYWN0ZXJNZ3Iub25GYWlsKHRoaXMubGV2ZWwpXG4gICAgdGhpcy5mYWlsTmFtZS5zdHJpbmcgPSB0aGlzLmxldmVsRGF0YVt0aGlzLmxldmVsIC0gMV0ubmFtZVxuICAgIC8vdGhpcy5mYWlsSGlnaFNjb3JlLnN0cmluZyA9IFwi5q2j5Zyo6I635Y+W5oKo55qE5pyA6auY5YiGLi4uXCJcbiAgfSxcblxufSk7Il19