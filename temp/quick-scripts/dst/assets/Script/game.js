
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/game.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '47c77yOeKpPiJVINXipHohs', 'game');
// Script/game.js

"use strict";

/**
 * @author heyuchang
 * @file 游戏控制
 */
var AC = require('GameAct');

cc.Class({
  "extends": cc.Component,
  properties: {
    statusType: 0,
    //0 未开始 1 游戏开始 2 游戏暂停 3 游戏结束 4 下落状态 5无法触摸状态
    blockPrefab: cc.Prefab,
    blockSprite: [cc.SpriteFrame],
    //todo: 换成动态生成 暂不处理
    warningSpriteFrame: [cc.SpriteFrame],
    propSpriteFrame: [cc.SpriteFrame],
    checkMgr: require("elementCheck"),
    revivePage: cc.Node
  },
  start: function start() {
    this.bindNode();
    this.generatePrefabPool();
    this.loadRes();
  },
  loadRes: function loadRes() {},
  init: function init(c) {
    this._gameController = c;
    this._gameScore = c.scoreMgr;
    this.rowCfgNum = c.config.json.rowCfgNum;
    this.gapCfgNum = c.config.json.gapCfgNum;
    this.animaCfgSpeed = c.config.json.gapCfgNum;
    this.blockClsWidth = (730 - (this.rowCfgNum + 1) * this.gapCfgNum) / this.rowCfgNum;
    this.reviveTimer = null;
  },
  // 动态获取需要动态控制的组件
  bindNode: function bindNode() {
    this.blocksContainer = this.node.getChildByName('map');
  },
  //---------------- 游戏控制 ---------------------
  // 游戏开始
  gameStart: function gameStart() {
    var _this = this;

    this.recoveryAllBlocks().then();

    this._gameScore.init(this);

    this.gameMapInit(this.rowCfgNum).then(function (result) {
      _this.statusType = 1;
    });
  },
  // 初始化地图
  gameMapInit: function gameMapInit(num) {
    var _this2 = this;

    this.map = [];
    var self = this; // 生成两个随机的对象数组

    var a, b, c, d;

    do {
      a = Math.floor(Math.random() * num);
      b = Math.floor(Math.random() * num);
      c = Math.floor(1 + Math.random() * (num - 1)) - 1;
      d = Math.floor(Math.random() * num);
    } while (a === c && b === d);

    return new Promise(function (resolve, reject) {
      for (var i = 0; i < num; i++) {
        _this2.map[i] = [];

        for (var j = 0; j < num; j++) {
          var itemType = i === a && j === b ? 1 : i === c && j === d ? 2 : 0;
          self.map[i][j] = self.instantiateBlock(self, {
            x: j,
            y: i,
            width: self.blockClsWidth,
            startTime: (i + j + 1) * self._gameController.config.json.startAnimationTime / num * 2
          }, self.blocksContainer, itemType);
        }
      }

      _this2.checkMgr.init(self);

      setTimeout(function () {
        resolve('200 OK');

        _this2.checkMgr.elementCheck(self);
      }, self._gameController.config.json.startAnimationTime * num / 2 / 1);
    });
  },
  //防抖动 判断是否需要检测下落
  checkNeedFall: function checkNeedFall() {
    var _this3 = this;

    if (this.checkNeedFallTimer) {
      clearTimeout(this.checkNeedFallTimer);
    }

    this.checkNeedFallTimer = setTimeout(function () {
      if (_this3.statusType == 5) {
        _this3.statusType = 4;

        _this3.onFall();
      }
    }, 300 / 1 // (cc.game.getFrameRate() / 60)
    );
  },
  onFall: function onFall() {
    var _this4 = this;

    // 调用 checkGenerateProp 方法并返回 Promise，然后在 Promise 成功时执行后续操作
    return this.checkGenerateProp(this._gameScore.chain).then(function () {
      // 用于记录每列可下落的方块数量
      var canFall; // 从每一列的最下面开始往上遍历

      for (var j = _this4.rowCfgNum - 1; j >= 0; j--) {
        canFall = 0; // 从每一列的底部往上遍历每一行

        for (var i = _this4.rowCfgNum - 1; i >= 0; i--) {
          // 如果当前方块状态类型为 2
          if (_this4.map[i][j].getComponent('element').statusType === 2) {
            // 将当前方块放入方块池中
            _this4.blockPool.put(_this4.map[i][j]); // 将当前位置的方块设置为 null


            _this4.map[i][j] = null; // 增加可下落的方块数量

            canFall++;
          } else if (canFall !== 0) {
            // 如果有可下落的方块且当前方块不是状态类型为 2 的方块
            // 将当前方块移动到下方的空位
            _this4.map[i + canFall][j] = _this4.map[i][j]; // 将当前位置的方块设置为 null

            _this4.map[i][j] = null; // 让当前方块执行下落动作，传入下落的距离和新位置

            _this4.map[i + canFall][j].getComponent('element').playFallAction(canFall, {
              x: j,
              y: i + canFall
            });
          }
        } // 对于每一列中可下落的空位，生成新的方块并执行下落动作


        for (var k = 0; k < canFall; k++) {
          _this4.map[k][j] = _this4.instantiateBlock(_this4, {
            x: j,
            y: k,
            width: _this4.blockClsWidth,
            startTime: null
          }, _this4.blocksContainer, '', {
            x: j,
            y: -canFall + k
          });

          _this4.map[k][j].getComponent('element').playFallAction(canFall, null);
        }
      } // 设置超时，超时后执行检查和元素检查，并设置状态类型


      setTimeout(function () {
        _this4.checkMgr.init(_this4);

        _this4.checkMgr.elementCheck(_this4);

        _this4.statusType = 1;
      }, 250);
    });
  },
  gameOver: function gameOver() {
    this.statusType = 3;

    this._gameController.pageManager.addPage(2);

    this._gameController.pageManager.addPage(4);

    if (this._gameController.social.node.active) {
      this._gameController.social.closeBannerAdv();
    }
  },
  // todo 复活
  askRevive: function askRevive() {
    var _this5 = this;

    this._gameController.pageManager.addPage(2);

    this._gameController.pageManager.addPage(5);

    this.revivePage.active = true;
    this.revivePage.getChildByName('askRevive').active = true;
    this.revivePage.getChildByName('successRevive').active = false;
    this.rangeSprite = this.revivePage.getChildByName('askRevive').getChildByName('numBg').getChildByName('sprite').getComponent(cc.Sprite);
    this.rangeSprite.fillRange = 1;
    this.isRangeAction = true;
    var numLabel = this.revivePage.getChildByName('askRevive').getChildByName('numBg').getChildByName('num').getComponent(cc.Label);
    numLabel.string = 9;

    if (this.reviveTimer) {
      clearInterval(this.reviveTimer);
    }

    this.reviveTimer = setInterval(function () {
      if (+numLabel.string > 0) {
        numLabel.string--;
        _this5.rangeSprite.fillRange = 1;
      } else {
        _this5.onSkipRevive();
      }
    }, 1000);
  },
  onReviveButton: function onReviveButton() {
    clearInterval(this.reviveTimer);
    this.isRangeAction = false;

    if (this._gameController.social.node.active) {
      this._gameController.social.onReviveButton(1);
    } else {
      this.showReviveSuccess();
    }
  },
  showReviveSuccess: function showReviveSuccess() {
    //console.log('打开复活成功页面')
    this.revivePage.getChildByName('askRevive').active = false;
    this.revivePage.getChildByName('successRevive').active = true;
  },
  onReviveCertainBtn: function onReviveCertainBtn() {
    this._gameController.pageManager.removePage(2);

    this.revivePage.active = false;
    this.statusType = 1;

    this._gameScore.onRevive();
  },
  update: function update() {
    if (this.isRangeAction) {
      this.rangeSprite.fillRange -= 1 / 60;
    }
  },
  onSkipRevive: function onSkipRevive() {
    clearInterval(this.reviveTimer);
    this._gameController.pageManager.pages[5].active = false;

    this._gameScore.onGameOver(true);

    this.isRangeAction = false;
  },
  restart: function restart() {
    var _this6 = this;

    this._gameController.pageManager.onOpenPage(1);

    this.recoveryAllBlocks().then(function () {
      _this6.gameStart();
    });
  },
  // -----------------道具相关---------------
  // 储存用户点击时的方块 用于生成道具
  onUserTouched: function onUserTouched(iid, jid, itemType, color, warning, pos) {
    this.target = {
      i: iid,
      j: jid,
      color: color,
      itemType: itemType,
      x: pos.x,
      y: pos.y,
      warning: warning
    };
  },
  // 生成道具 type 1为双倍倍数 2为炸弹 3为加五百
  generatePropItem: function generatePropItem(type) {
    var _this7 = this;

    return new Promise(function (resolve, reject) {
      // 是否做道具生成动画
      _this7.map[_this7.target.i][_this7.target.j] = _this7.instantiateBlock(_this7, {
        x: _this7.target.j,
        y: _this7.target.i,
        color: _this7.target.color,
        width: _this7.blockClsWidth,
        startTime: null
      }, _this7.blocksContainer, type);
      setTimeout(function () {
        resolve();
      }, 300);
    });
  },
  checkGenerateProp: function checkGenerateProp(chain) {
    var _this8 = this;

    return new Promise(function (resolve, reject) {
      if (_this8.target.warning) {
        _this8.generatePropItem(_this8.target.warning).then(function () {
          resolve();
          return;
        });
      }

      resolve();
    });
  },
  onItem: function onItem(type, color, pos) {
    switch (type) {
      case 1:
        // 分数翻倍 最高八倍
        this._gameScore.tipBox.init(this._gameScore, 1);

        this._gameScore.addMult(color, pos);

        this._gameController.musicManager.onDouble();

        for (var i = 0; i < this.rowCfgNum; i++) {
          //行
          for (var j = 0; j < this.rowCfgNum; j++) {
            //列
            if (this.map[i][j] && this.map[i][j].getComponent('element').statusType == 1) {
              var distance = Math.sqrt(Math.pow(pos.x - this.map[i][j].x, 2) + Math.pow(pos.y - this.map[i][j].y, 2));

              if (distance != 0) {
                this.map[i][j].getComponent('element').surfaceAction(distance);
              }
            }
          }
        }

        break;

      case 2:
        // 炸弹 消除同种颜色的
        this._gameScore.tipBox.init(this._gameScore, 2);

        this.node.runAction(AC.shackAction(0.1, 10));

        if (this._gameController.social.node.active) {
          this._gameController.social.onShakePhone();
        }

        this.isPropChain = true;

        this._gameController.musicManager.onBoom();

        for (var _i = 0; _i < this.rowCfgNum; _i++) {
          //行
          for (var _j = 0; _j < this.rowCfgNum; _j++) {
            //列
            if (this.map[_i][_j] && this.map[_i][_j].getComponent('element').color == color && this.map[_i][_j] && this.map[_i][_j].getComponent('element').statusType != 2) {
              this.map[_i][_j].getComponent('element').onTouched(color, false, true);
            } else {
              this.map[_i][_j].runAction(AC.rockAction(0.2, 10));
            }
          }
        }

        break;

      case 3:
        //:  加步数
        this._gameScore.tipBox.init(this._gameScore, 4);

        this._gameController.musicManager.onDouble();

        for (var _i2 = 0; _i2 < this.rowCfgNum; _i2++) {
          //行
          for (var _j2 = 0; _j2 < this.rowCfgNum; _j2++) {
            //列
            if (this.map[_i2][_j2] && this.map[_i2][_j2].getComponent('element').statusType == 1) {
              var _distance = Math.sqrt(Math.pow(pos.x - this.map[_i2][_j2].x, 2) + Math.pow(pos.y - this.map[_i2][_j2].y, 2));

              if (_distance != 0) {
                this.map[_i2][_j2].getComponent('element').surfaceAction(_distance);
              }
            }
          }
        }

        this._gameScore.onStep(3).then();

        break;

      case 4:
        // : 消除全部单身的方块
        this._gameScore.tipBox.init(this._gameScore, 5);

        this.isPropChain = true;

        this._gameController.musicManager.onMagic();

        for (var _i3 = 0; _i3 < this.rowCfgNum; _i3++) {
          //行
          for (var _j3 = 0; _j3 < this.rowCfgNum; _j3++) {
            //列
            if (this.map[_i3][_j3] && this.map[_i3][_j3].getComponent('element').isSingle && this.map[_i3][_j3] && this.map[_i3][_j3].getComponent('element').statusType != 2) {
              var _distance2 = Math.sqrt(Math.pow(pos.x - this.map[_i3][_j3].x, 2) + Math.pow(pos.y - this.map[_i3][_j3].y, 2));

              this.map[_i3][_j3].getComponent('element').onTouched(color, false, true, _distance2);

              console.log("魔法棒触发的点", _i3, _j3, this.map[_i3][_j3].getComponent('element').color, this.map[_i3][_j3].getComponent('element').isSingle);
            }
          }
        }

        break;
    }
  },
  //--------------------- 预制体实例化---------------------
  // 生成对象池
  generatePrefabPool: function generatePrefabPool() {
    this.blockPool = new cc.NodePool();

    for (var i = 0; i < Math.pow(this.rowCfgNum, 2); i++) {
      var block = cc.instantiate(this.blockPrefab);
      this.blockPool.put(block);
    }
  },
  // 实例化单个方块
  instantiateBlock: function instantiateBlock(self, data, parent, itemType, pos) {
    itemType = itemType ? itemType : 0;

    if (itemType != 0) {// console.log("道具节点数据", data, itemType)
    }

    var block = null;

    if (self.blockPool && self.blockPool.size() > 0) {
      block = self.blockPool.get();
    } else {
      block = cc.instantiate(self.blockPrefab);
    }

    block.parent = parent;
    block.scale = 1;
    block.x = 0;
    block.y = 0;
    block.getComponent('element').init(self, data, this.blockClsWidth, itemType, pos);
    return block;
  },
  // 回收所有节点
  recoveryAllBlocks: function recoveryAllBlocks() {
    var _this9 = this;

    return new Promise(function (resolve, reject) {
      var children = _this9.blocksContainer.children;

      if (children.length != 0) {
        var length = children.length; //   console.log(length)

        for (var i = 0; i < length; i++) {
          _this9.blockPool.put(children[0]);
        }

        for (var _i4 = 0; _i4 < _this9.rowCfgNum; _i4++) {
          for (var j = 0; j < _this9.rowCfgNum; j++) {
            _this9.map[_i4][j] = null;
          }
        }
      }

      resolve('');
    });
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxnYW1lLmpzIl0sIm5hbWVzIjpbIkFDIiwicmVxdWlyZSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwic3RhdHVzVHlwZSIsImJsb2NrUHJlZmFiIiwiUHJlZmFiIiwiYmxvY2tTcHJpdGUiLCJTcHJpdGVGcmFtZSIsIndhcm5pbmdTcHJpdGVGcmFtZSIsInByb3BTcHJpdGVGcmFtZSIsImNoZWNrTWdyIiwicmV2aXZlUGFnZSIsIk5vZGUiLCJzdGFydCIsImJpbmROb2RlIiwiZ2VuZXJhdGVQcmVmYWJQb29sIiwibG9hZFJlcyIsImluaXQiLCJjIiwiX2dhbWVDb250cm9sbGVyIiwiX2dhbWVTY29yZSIsInNjb3JlTWdyIiwicm93Q2ZnTnVtIiwiY29uZmlnIiwianNvbiIsImdhcENmZ051bSIsImFuaW1hQ2ZnU3BlZWQiLCJibG9ja0Nsc1dpZHRoIiwicmV2aXZlVGltZXIiLCJibG9ja3NDb250YWluZXIiLCJub2RlIiwiZ2V0Q2hpbGRCeU5hbWUiLCJnYW1lU3RhcnQiLCJyZWNvdmVyeUFsbEJsb2NrcyIsInRoZW4iLCJnYW1lTWFwSW5pdCIsInJlc3VsdCIsIm51bSIsIm1hcCIsInNlbGYiLCJhIiwiYiIsImQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImkiLCJqIiwiaXRlbVR5cGUiLCJpbnN0YW50aWF0ZUJsb2NrIiwieCIsInkiLCJ3aWR0aCIsInN0YXJ0VGltZSIsInN0YXJ0QW5pbWF0aW9uVGltZSIsInNldFRpbWVvdXQiLCJlbGVtZW50Q2hlY2siLCJjaGVja05lZWRGYWxsIiwiY2hlY2tOZWVkRmFsbFRpbWVyIiwiY2xlYXJUaW1lb3V0Iiwib25GYWxsIiwiY2hlY2tHZW5lcmF0ZVByb3AiLCJjaGFpbiIsImNhbkZhbGwiLCJnZXRDb21wb25lbnQiLCJibG9ja1Bvb2wiLCJwdXQiLCJwbGF5RmFsbEFjdGlvbiIsImsiLCJnYW1lT3ZlciIsInBhZ2VNYW5hZ2VyIiwiYWRkUGFnZSIsInNvY2lhbCIsImFjdGl2ZSIsImNsb3NlQmFubmVyQWR2IiwiYXNrUmV2aXZlIiwicmFuZ2VTcHJpdGUiLCJTcHJpdGUiLCJmaWxsUmFuZ2UiLCJpc1JhbmdlQWN0aW9uIiwibnVtTGFiZWwiLCJMYWJlbCIsInN0cmluZyIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIm9uU2tpcFJldml2ZSIsIm9uUmV2aXZlQnV0dG9uIiwic2hvd1Jldml2ZVN1Y2Nlc3MiLCJvblJldml2ZUNlcnRhaW5CdG4iLCJyZW1vdmVQYWdlIiwib25SZXZpdmUiLCJ1cGRhdGUiLCJwYWdlcyIsIm9uR2FtZU92ZXIiLCJyZXN0YXJ0Iiwib25PcGVuUGFnZSIsIm9uVXNlclRvdWNoZWQiLCJpaWQiLCJqaWQiLCJjb2xvciIsIndhcm5pbmciLCJwb3MiLCJ0YXJnZXQiLCJnZW5lcmF0ZVByb3BJdGVtIiwidHlwZSIsIm9uSXRlbSIsInRpcEJveCIsImFkZE11bHQiLCJtdXNpY01hbmFnZXIiLCJvbkRvdWJsZSIsImRpc3RhbmNlIiwic3FydCIsInBvdyIsInN1cmZhY2VBY3Rpb24iLCJydW5BY3Rpb24iLCJzaGFja0FjdGlvbiIsIm9uU2hha2VQaG9uZSIsImlzUHJvcENoYWluIiwib25Cb29tIiwib25Ub3VjaGVkIiwicm9ja0FjdGlvbiIsIm9uU3RlcCIsIm9uTWFnaWMiLCJpc1NpbmdsZSIsImNvbnNvbGUiLCJsb2ciLCJOb2RlUG9vbCIsImJsb2NrIiwiaW5zdGFudGlhdGUiLCJkYXRhIiwicGFyZW50Iiwic2l6ZSIsImdldCIsInNjYWxlIiwiY2hpbGRyZW4iLCJsZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFJQSxJQUFJQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQWhCOztBQUNBQyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNQLGFBQVNELEVBQUUsQ0FBQ0UsU0FETDtBQUVQQyxFQUFBQSxVQUFVLEVBQUU7QUFD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LENBQVA7QUFDRCxLQWZNLENBQVA7QUFnQkQ7QUFsWE0sQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEBhdXRob3IgaGV5dWNoYW5nXHJcbiAqIEBmaWxlIOa4uOaIj+aOp+WItlxyXG4gKi9cclxudmFyIEFDID0gcmVxdWlyZSgnR2FtZUFjdCcpXHJcbmNjLkNsYXNzKHtcclxuICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgcHJvcGVydGllczoge1xyXG4gICAgc3RhdHVzVHlwZTogMCwgLy8wIOacquW8gOWniyAxIOa4uOaIj+W8gOWniyAyIOa4uOaIj+aaguWBnCAzIOa4uOaIj+e7k+adnyA0IOS4i+iQveeKtuaAgSA15peg5rOV6Kem5pG454q25oCBXHJcbiAgICBibG9ja1ByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgYmxvY2tTcHJpdGU6IFtjYy5TcHJpdGVGcmFtZV0sIC8vdG9kbzog5o2i5oiQ5Yqo5oCB55Sf5oiQIOaaguS4jeWkhOeQhlxyXG4gICAgd2FybmluZ1Nwcml0ZUZyYW1lOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgcHJvcFNwcml0ZUZyYW1lOiBbY2MuU3ByaXRlRnJhbWVdLFxyXG4gICAgY2hlY2tNZ3I6IHJlcXVpcmUoXCJlbGVtZW50Q2hlY2tcIiksXHJcbiAgICByZXZpdmVQYWdlOiBjYy5Ob2RlLFxyXG4gIH0sXHJcbiAgc3RhcnQoKSB7XHJcbiAgICB0aGlzLmJpbmROb2RlKClcclxuICAgIHRoaXMuZ2VuZXJhdGVQcmVmYWJQb29sKClcclxuICAgIHRoaXMubG9hZFJlcygpXHJcbiAgfSxcclxuICBsb2FkUmVzKCkge1xyXG5cclxuICB9LFxyXG4gIGluaXQoYykge1xyXG4gICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIgPSBjXHJcbiAgICB0aGlzLl9nYW1lU2NvcmUgPSBjLnNjb3JlTWdyXHJcbiAgICB0aGlzLnJvd0NmZ051bSA9IGMuY29uZmlnLmpzb24ucm93Q2ZnTnVtXHJcbiAgICB0aGlzLmdhcENmZ051bSA9IGMuY29uZmlnLmpzb24uZ2FwQ2ZnTnVtXHJcbiAgICB0aGlzLmFuaW1hQ2ZnU3BlZWQgPSBjLmNvbmZpZy5qc29uLmdhcENmZ051bVxyXG4gICAgdGhpcy5ibG9ja0Nsc1dpZHRoID0gKDczMCAtICh0aGlzLnJvd0NmZ051bSArIDEpICogdGhpcy5nYXBDZmdOdW0pIC8gdGhpcy5yb3dDZmdOdW1cclxuICAgIHRoaXMucmV2aXZlVGltZXIgPSBudWxsXHJcbiAgfSxcclxuICAvLyDliqjmgIHojrflj5bpnIDopoHliqjmgIHmjqfliLbnmoTnu4Tku7ZcclxuICBiaW5kTm9kZSgpIHtcclxuICAgIHRoaXMuYmxvY2tzQ29udGFpbmVyID0gdGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKCdtYXAnKVxyXG4gIH0sXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tIOa4uOaIj+aOp+WItiAtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyDmuLjmiI/lvIDlp4tcclxuICBnYW1lU3RhcnQoKSB7XHJcbiAgICB0aGlzLnJlY292ZXJ5QWxsQmxvY2tzKCkudGhlbigpXHJcbiAgICB0aGlzLl9nYW1lU2NvcmUuaW5pdCh0aGlzKVxyXG4gICAgdGhpcy5nYW1lTWFwSW5pdCh0aGlzLnJvd0NmZ051bSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgIHRoaXMuc3RhdHVzVHlwZSA9IDFcclxuICAgIH0pXHJcblxyXG4gIH0sXHJcbiAgLy8g5Yid5aeL5YyW5Zyw5Zu+XHJcbiAgZ2FtZU1hcEluaXQobnVtKSB7XHJcbiAgICB0aGlzLm1hcCA9IFtdO1xyXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgLy8g55Sf5oiQ5Lik5Liq6ZqP5py655qE5a+56LGh5pWw57uEXHJcbiAgICBsZXQgYSwgYiwgYywgZDtcclxuICAgIGRvIHtcclxuICAgICAgYSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG51bSk7XHJcbiAgICAgIGIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBudW0pO1xyXG4gICAgICBjID0gTWF0aC5mbG9vcigxICsgTWF0aC5yYW5kb20oKSAqIChudW0gLSAxKSkgLSAxO1xyXG4gICAgICBkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtKTtcclxuICAgIH0gd2hpbGUgKGEgPT09IGMgJiYgYiA9PT0gZCk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW07IGkrKykge1xyXG4gICAgICAgIHRoaXMubWFwW2ldID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW07IGorKykge1xyXG4gICAgICAgICAgbGV0IGl0ZW1UeXBlID0gKGkgPT09IGEgJiYgaiA9PT0gYikgPyAxIDogKGkgPT09IGMgJiYgaiA9PT0gZCkgPyAyIDogMDtcclxuICAgICAgICAgIHNlbGYubWFwW2ldW2pdID0gc2VsZi5pbnN0YW50aWF0ZUJsb2NrKHNlbGYsIHtcclxuICAgICAgICAgICAgeDogaixcclxuICAgICAgICAgICAgeTogaSxcclxuICAgICAgICAgICAgd2lkdGg6IHNlbGYuYmxvY2tDbHNXaWR0aCxcclxuICAgICAgICAgICAgc3RhcnRUaW1lOiAoaSArIGogKyAxKSAqIHNlbGYuX2dhbWVDb250cm9sbGVyLmNvbmZpZy5qc29uLnN0YXJ0QW5pbWF0aW9uVGltZSAvIG51bSAqIDJcclxuICAgICAgICAgIH0sIHNlbGYuYmxvY2tzQ29udGFpbmVyLCBpdGVtVHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuY2hlY2tNZ3IuaW5pdChzZWxmKTtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZSgnMjAwIE9LJyk7XHJcbiAgICAgICAgdGhpcy5jaGVja01nci5lbGVtZW50Q2hlY2soc2VsZik7XHJcbiAgICAgIH0sIHNlbGYuX2dhbWVDb250cm9sbGVyLmNvbmZpZy5qc29uLnN0YXJ0QW5pbWF0aW9uVGltZSAqIG51bSAvIDIgLyAxKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIC8v6Ziy5oqW5YqoIOWIpOaWreaYr+WQpumcgOimgeajgOa1i+S4i+iQvVxyXG4gIGNoZWNrTmVlZEZhbGwoKSB7XHJcbiAgICBpZiAodGhpcy5jaGVja05lZWRGYWxsVGltZXIpIHtcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2hlY2tOZWVkRmFsbFRpbWVyKVxyXG4gICAgfVxyXG4gICAgdGhpcy5jaGVja05lZWRGYWxsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzVHlwZSA9PSA1KSB7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNUeXBlID0gNFxyXG4gICAgICAgIHRoaXMub25GYWxsKClcclxuICAgICAgfVxyXG4gICAgfSwgMzAwIC8gMVxyXG4gICAgICAvLyAoY2MuZ2FtZS5nZXRGcmFtZVJhdGUoKSAvIDYwKVxyXG4gICAgKVxyXG4gIH0sXHJcbiAgb25GYWxsKCkge1xyXG4gICAgLy8g6LCD55SoIGNoZWNrR2VuZXJhdGVQcm9wIOaWueazleW5tui/lOWbniBQcm9taXNl77yM54S25ZCO5ZyoIFByb21pc2Ug5oiQ5Yqf5pe25omn6KGM5ZCO57ut5pON5L2cXHJcbiAgICByZXR1cm4gdGhpcy5jaGVja0dlbmVyYXRlUHJvcCh0aGlzLl9nYW1lU2NvcmUuY2hhaW4pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAvLyDnlKjkuo7orrDlvZXmr4/liJflj6/kuIvokL3nmoTmlrnlnZfmlbDph49cclxuICAgICAgbGV0IGNhbkZhbGw7XHJcbiAgICAgIC8vIOS7juavj+S4gOWIl+eahOacgOS4i+mdouW8gOWni+W+gOS4iumBjeWOhlxyXG4gICAgICBmb3IgKGxldCBqID0gdGhpcy5yb3dDZmdOdW0gLSAxOyBqID49IDA7IGotLSkge1xyXG4gICAgICAgIGNhbkZhbGwgPSAwO1xyXG4gICAgICAgIC8vIOS7juavj+S4gOWIl+eahOW6lemDqOW+gOS4iumBjeWOhuavj+S4gOihjFxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnJvd0NmZ051bSAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAvLyDlpoLmnpzlvZPliY3mlrnlnZfnirbmgIHnsbvlnovkuLogMlxyXG4gICAgICAgICAgaWYgKHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLnN0YXR1c1R5cGUgPT09IDIpIHtcclxuICAgICAgICAgICAgLy8g5bCG5b2T5YmN5pa55Z2X5pS+5YWl5pa55Z2X5rGg5LitXHJcbiAgICAgICAgICAgIHRoaXMuYmxvY2tQb29sLnB1dCh0aGlzLm1hcFtpXVtqXSk7XHJcbiAgICAgICAgICAgIC8vIOWwhuW9k+WJjeS9jee9rueahOaWueWdl+iuvue9ruS4uiBudWxsXHJcbiAgICAgICAgICAgIHRoaXMubWFwW2ldW2pdID0gbnVsbDtcclxuICAgICAgICAgICAgLy8g5aKe5Yqg5Y+v5LiL6JC955qE5pa55Z2X5pWw6YePXHJcbiAgICAgICAgICAgIGNhbkZhbGwrKztcclxuICAgICAgICAgIH0gZWxzZSBpZiAoY2FuRmFsbCAhPT0gMCkge1xyXG4gICAgICAgICAgICAvLyDlpoLmnpzmnInlj6/kuIvokL3nmoTmlrnlnZfkuJTlvZPliY3mlrnlnZfkuI3mmK/nirbmgIHnsbvlnovkuLogMiDnmoTmlrnlnZdcclxuICAgICAgICAgICAgLy8g5bCG5b2T5YmN5pa55Z2X56e75Yqo5Yiw5LiL5pa555qE56m65L2NXHJcbiAgICAgICAgICAgIHRoaXMubWFwW2kgKyBjYW5GYWxsXVtqXSA9IHRoaXMubWFwW2ldW2pdO1xyXG4gICAgICAgICAgICAvLyDlsIblvZPliY3kvY3nva7nmoTmlrnlnZforr7nva7kuLogbnVsbFxyXG4gICAgICAgICAgICB0aGlzLm1hcFtpXVtqXSA9IG51bGw7XHJcbiAgICAgICAgICAgIC8vIOiuqeW9k+WJjeaWueWdl+aJp+ihjOS4i+iQveWKqOS9nO+8jOS8oOWFpeS4i+iQveeahOi3neemu+WSjOaWsOS9jee9rlxyXG4gICAgICAgICAgICB0aGlzLm1hcFtpICsgY2FuRmFsbF1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50JykucGxheUZhbGxBY3Rpb24oY2FuRmFsbCwge1xyXG4gICAgICAgICAgICAgIHg6IGosXHJcbiAgICAgICAgICAgICAgeTogaSArIGNhbkZhbGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlr7nkuo7mr4/kuIDliJfkuK3lj6/kuIvokL3nmoTnqbrkvY3vvIznlJ/miJDmlrDnmoTmlrnlnZflubbmiafooYzkuIvokL3liqjkvZxcclxuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGNhbkZhbGw7IGsrKykge1xyXG4gICAgICAgICAgdGhpcy5tYXBba11bal0gPSB0aGlzLmluc3RhbnRpYXRlQmxvY2sodGhpcywge1xyXG4gICAgICAgICAgICB4OiBqLFxyXG4gICAgICAgICAgICB5OiBrLFxyXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5ibG9ja0Nsc1dpZHRoLFxyXG4gICAgICAgICAgICBzdGFydFRpbWU6IG51bGxcclxuICAgICAgICAgIH0sIHRoaXMuYmxvY2tzQ29udGFpbmVyLCAnJywge1xyXG4gICAgICAgICAgICB4OiBqLFxyXG4gICAgICAgICAgICB5OiAtY2FuRmFsbCArIGtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgdGhpcy5tYXBba11bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50JykucGxheUZhbGxBY3Rpb24oY2FuRmFsbCwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIOiuvue9rui2heaXtu+8jOi2heaXtuWQjuaJp+ihjOajgOafpeWSjOWFg+e0oOajgOafpe+8jOW5tuiuvue9rueKtuaAgeexu+Wei1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICB0aGlzLmNoZWNrTWdyLmluaXQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jaGVja01nci5lbGVtZW50Q2hlY2sodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNUeXBlID0gMTtcclxuICAgICAgfSwgMjUwKTtcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgZ2FtZU92ZXIoKSB7XHJcbiAgICB0aGlzLnN0YXR1c1R5cGUgPSAzXHJcbiAgICB0aGlzLl9nYW1lQ29udHJvbGxlci5wYWdlTWFuYWdlci5hZGRQYWdlKDIpXHJcbiAgICB0aGlzLl9nYW1lQ29udHJvbGxlci5wYWdlTWFuYWdlci5hZGRQYWdlKDQpXHJcbiAgICBpZiAodGhpcy5fZ2FtZUNvbnRyb2xsZXIuc29jaWFsLm5vZGUuYWN0aXZlKSB7XHJcbiAgICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLnNvY2lhbC5jbG9zZUJhbm5lckFkdigpXHJcbiAgICB9XHJcbiAgfSxcclxuICAvLyB0b2RvIOWkjea0u1xyXG4gIGFza1Jldml2ZSgpIHtcclxuICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLnBhZ2VNYW5hZ2VyLmFkZFBhZ2UoMilcclxuICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLnBhZ2VNYW5hZ2VyLmFkZFBhZ2UoNSlcclxuICAgIHRoaXMucmV2aXZlUGFnZS5hY3RpdmUgPSB0cnVlXHJcbiAgICB0aGlzLnJldml2ZVBhZ2UuZ2V0Q2hpbGRCeU5hbWUoJ2Fza1Jldml2ZScpLmFjdGl2ZSA9IHRydWVcclxuICAgIHRoaXMucmV2aXZlUGFnZS5nZXRDaGlsZEJ5TmFtZSgnc3VjY2Vzc1Jldml2ZScpLmFjdGl2ZSA9IGZhbHNlXHJcbiAgICB0aGlzLnJhbmdlU3ByaXRlID0gdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdhc2tSZXZpdmUnKS5nZXRDaGlsZEJ5TmFtZSgnbnVtQmcnKS5nZXRDaGlsZEJ5TmFtZSgnc3ByaXRlJykuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSlcclxuICAgIHRoaXMucmFuZ2VTcHJpdGUuZmlsbFJhbmdlID0gMVxyXG4gICAgdGhpcy5pc1JhbmdlQWN0aW9uID0gdHJ1ZVxyXG4gICAgbGV0IG51bUxhYmVsID0gdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdhc2tSZXZpdmUnKS5nZXRDaGlsZEJ5TmFtZSgnbnVtQmcnKS5nZXRDaGlsZEJ5TmFtZSgnbnVtJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKVxyXG4gICAgbnVtTGFiZWwuc3RyaW5nID0gOVxyXG4gICAgaWYgKHRoaXMucmV2aXZlVGltZXIpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJldml2ZVRpbWVyKVxyXG4gICAgfVxyXG4gICAgdGhpcy5yZXZpdmVUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgaWYgKCtudW1MYWJlbC5zdHJpbmcgPiAwKSB7XHJcbiAgICAgICAgbnVtTGFiZWwuc3RyaW5nLS1cclxuICAgICAgICB0aGlzLnJhbmdlU3ByaXRlLmZpbGxSYW5nZSA9IDFcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm9uU2tpcFJldml2ZSgpXHJcbiAgICAgIH1cclxuICAgIH0sIDEwMDApXHJcblxyXG4gIH0sXHJcbiAgb25SZXZpdmVCdXR0b24oKSB7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMucmV2aXZlVGltZXIpXHJcbiAgICB0aGlzLmlzUmFuZ2VBY3Rpb24gPSBmYWxzZVxyXG4gICAgaWYgKHRoaXMuX2dhbWVDb250cm9sbGVyLnNvY2lhbC5ub2RlLmFjdGl2ZSkge1xyXG4gICAgICB0aGlzLl9nYW1lQ29udHJvbGxlci5zb2NpYWwub25SZXZpdmVCdXR0b24oMSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuc2hvd1Jldml2ZVN1Y2Nlc3MoKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgc2hvd1Jldml2ZVN1Y2Nlc3MoKSB7XHJcbiAgICAvL2NvbnNvbGUubG9nKCfmiZPlvIDlpI3mtLvmiJDlip/pobXpnaInKVxyXG4gICAgdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdhc2tSZXZpdmUnKS5hY3RpdmUgPSBmYWxzZVxyXG4gICAgdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdzdWNjZXNzUmV2aXZlJykuYWN0aXZlID0gdHJ1ZVxyXG4gIH0sXHJcbiAgb25SZXZpdmVDZXJ0YWluQnRuKCkge1xyXG4gICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIucGFnZU1hbmFnZXIucmVtb3ZlUGFnZSgyKVxyXG4gICAgdGhpcy5yZXZpdmVQYWdlLmFjdGl2ZSA9IGZhbHNlXHJcbiAgICB0aGlzLnN0YXR1c1R5cGUgPSAxXHJcbiAgICB0aGlzLl9nYW1lU2NvcmUub25SZXZpdmUoKVxyXG4gIH0sXHJcbiAgdXBkYXRlKCkge1xyXG4gICAgaWYgKHRoaXMuaXNSYW5nZUFjdGlvbikge1xyXG4gICAgICB0aGlzLnJhbmdlU3ByaXRlLmZpbGxSYW5nZSAtPSAxIC8gNjBcclxuICAgIH1cclxuICB9LFxyXG4gIG9uU2tpcFJldml2ZSgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5yZXZpdmVUaW1lcilcclxuICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLnBhZ2VNYW5hZ2VyLnBhZ2VzWzVdLmFjdGl2ZSA9IGZhbHNlXHJcbiAgICB0aGlzLl9nYW1lU2NvcmUub25HYW1lT3Zlcih0cnVlKVxyXG4gICAgdGhpcy5pc1JhbmdlQWN0aW9uID0gZmFsc2VcclxuICB9LFxyXG4gIHJlc3RhcnQoKSB7XHJcbiAgICB0aGlzLl9nYW1lQ29udHJvbGxlci5wYWdlTWFuYWdlci5vbk9wZW5QYWdlKDEpXHJcbiAgICB0aGlzLnJlY292ZXJ5QWxsQmxvY2tzKCkudGhlbigoKSA9PiB7XHJcbiAgICAgIHRoaXMuZ2FtZVN0YXJ0KClcclxuICAgIH0pXHJcbiAgfSxcclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLemBk+WFt+ebuOWFsy0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIOWCqOWtmOeUqOaIt+eCueWHu+aXtueahOaWueWdlyDnlKjkuo7nlJ/miJDpgZPlhbdcclxuICBvblVzZXJUb3VjaGVkKGlpZCwgamlkLCBpdGVtVHlwZSwgY29sb3IsIHdhcm5pbmcsIHBvcykge1xyXG4gICAgdGhpcy50YXJnZXQgPSB7XHJcbiAgICAgIGk6IGlpZCxcclxuICAgICAgajogamlkLFxyXG4gICAgICBjb2xvcjogY29sb3IsXHJcbiAgICAgIGl0ZW1UeXBlOiBpdGVtVHlwZSxcclxuICAgICAgeDogcG9zLngsXHJcbiAgICAgIHk6IHBvcy55LFxyXG4gICAgICB3YXJuaW5nOiB3YXJuaW5nXHJcbiAgICB9XHJcbiAgfSxcclxuICAvLyDnlJ/miJDpgZPlhbcgdHlwZSAx5Li65Y+M5YCN5YCN5pWwIDLkuLrngrjlvLkgM+S4uuWKoOS6lOeZvlxyXG4gIGdlbmVyYXRlUHJvcEl0ZW0odHlwZSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgLy8g5piv5ZCm5YGa6YGT5YW355Sf5oiQ5Yqo55S7XHJcbiAgICAgIHRoaXMubWFwW3RoaXMudGFyZ2V0LmldW3RoaXMudGFyZ2V0LmpdID0gdGhpcy5pbnN0YW50aWF0ZUJsb2NrKHRoaXMsIHtcclxuICAgICAgICB4OiB0aGlzLnRhcmdldC5qLFxyXG4gICAgICAgIHk6IHRoaXMudGFyZ2V0LmksXHJcbiAgICAgICAgY29sb3I6IHRoaXMudGFyZ2V0LmNvbG9yLFxyXG4gICAgICAgIHdpZHRoOiB0aGlzLmJsb2NrQ2xzV2lkdGgsXHJcbiAgICAgICAgc3RhcnRUaW1lOiBudWxsXHJcbiAgICAgIH0sIHRoaXMuYmxvY2tzQ29udGFpbmVyLCB0eXBlKVxyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICByZXNvbHZlKClcclxuICAgICAgfSwgMzAwKVxyXG4gICAgfSlcclxuICB9LFxyXG4gIGNoZWNrR2VuZXJhdGVQcm9wKGNoYWluKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy50YXJnZXQud2FybmluZykge1xyXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQcm9wSXRlbSh0aGlzLnRhcmdldC53YXJuaW5nKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoKVxyXG4gICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICByZXNvbHZlKClcclxuICAgIH0pXHJcbiAgfSxcclxuICBvbkl0ZW0odHlwZSwgY29sb3IsIHBvcykge1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICAvLyDliIbmlbDnv7vlgI0g5pyA6auY5YWr5YCNXHJcbiAgICAgICAgdGhpcy5fZ2FtZVNjb3JlLnRpcEJveC5pbml0KHRoaXMuX2dhbWVTY29yZSwgMSlcclxuICAgICAgICB0aGlzLl9nYW1lU2NvcmUuYWRkTXVsdChjb2xvciwgcG9zKVxyXG4gICAgICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLm11c2ljTWFuYWdlci5vbkRvdWJsZSgpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvd0NmZ051bTsgaSsrKSB7IC8v6KGMXHJcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMucm93Q2ZnTnVtOyBqKyspIHsgLy/liJdcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwW2ldW2pdICYmIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLnN0YXR1c1R5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhwb3MueCAtIHRoaXMubWFwW2ldW2pdLngsIDIpICsgTWF0aC5wb3cocG9zLnkgLSB0aGlzLm1hcFtpXVtqXS55LCAyKSlcclxuICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50Jykuc3VyZmFjZUFjdGlvbihkaXN0YW5jZSlcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgMjpcclxuICAgICAgICAvLyDngrjlvLkg5raI6Zmk5ZCM56eN6aKc6Imy55qEXHJcbiAgICAgICAgdGhpcy5fZ2FtZVNjb3JlLnRpcEJveC5pbml0KHRoaXMuX2dhbWVTY29yZSwgMilcclxuICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKEFDLnNoYWNrQWN0aW9uKDAuMSwgMTApKVxyXG4gICAgICAgIGlmICh0aGlzLl9nYW1lQ29udHJvbGxlci5zb2NpYWwubm9kZS5hY3RpdmUpIHtcclxuICAgICAgICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLnNvY2lhbC5vblNoYWtlUGhvbmUoKVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUHJvcENoYWluID0gdHJ1ZVxyXG4gICAgICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLm11c2ljTWFuYWdlci5vbkJvb20oKVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3dDZmdOdW07IGkrKykgeyAvL+ihjFxyXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd0NmZ051bTsgaisrKSB7IC8v5YiXXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcFtpXVtqXSAmJiB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5jb2xvciA9PSBjb2xvciAmJiB0aGlzLm1hcFtpXVtqXSAmJiB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5zdGF0dXNUeXBlICE9IDIpIHtcclxuICAgICAgICAgICAgICB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5vblRvdWNoZWQoY29sb3IsIGZhbHNlLCB0cnVlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIHRoaXMubWFwW2ldW2pdLnJ1bkFjdGlvbihBQy5yb2NrQWN0aW9uKDAuMiwgMTApKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgMzogLy86ICDliqDmraXmlbBcclxuICAgICAgICB0aGlzLl9nYW1lU2NvcmUudGlwQm94LmluaXQodGhpcy5fZ2FtZVNjb3JlLCA0KVxyXG4gICAgICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLm11c2ljTWFuYWdlci5vbkRvdWJsZSgpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvd0NmZ051bTsgaSsrKSB7IC8v6KGMXHJcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMucm93Q2ZnTnVtOyBqKyspIHsgLy/liJdcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwW2ldW2pdICYmIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLnN0YXR1c1R5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhwb3MueCAtIHRoaXMubWFwW2ldW2pdLngsIDIpICsgTWF0aC5wb3cocG9zLnkgLSB0aGlzLm1hcFtpXVtqXS55LCAyKSlcclxuICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgIT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50Jykuc3VyZmFjZUFjdGlvbihkaXN0YW5jZSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fZ2FtZVNjb3JlLm9uU3RlcCgzKS50aGVuKClcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSA0OiAvLyA6IOa2iOmZpOWFqOmDqOWNlei6q+eahOaWueWdl1xyXG4gICAgICAgIHRoaXMuX2dhbWVTY29yZS50aXBCb3guaW5pdCh0aGlzLl9nYW1lU2NvcmUsIDUpXHJcbiAgICAgICAgdGhpcy5pc1Byb3BDaGFpbiA9IHRydWVcclxuICAgICAgICB0aGlzLl9nYW1lQ29udHJvbGxlci5tdXNpY01hbmFnZXIub25NYWdpYygpXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvd0NmZ051bTsgaSsrKSB7IC8v6KGMXHJcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMucm93Q2ZnTnVtOyBqKyspIHsgLy/liJdcclxuICAgICAgICAgICAgaWYgKHRoaXMubWFwW2ldW2pdICYmIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLmlzU2luZ2xlICYmIHRoaXMubWFwW2ldW2pdICYmIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLnN0YXR1c1R5cGUgIT0gMikge1xyXG4gICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhwb3MueCAtIHRoaXMubWFwW2ldW2pdLngsIDIpICsgTWF0aC5wb3cocG9zLnkgLSB0aGlzLm1hcFtpXVtqXS55LCAyKSlcclxuICAgICAgICAgICAgICB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5vblRvdWNoZWQoY29sb3IsIGZhbHNlLCB0cnVlLCBkaXN0YW5jZSlcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIumtlOazleajkuinpuWPkeeahOeCuVwiLCBpLCBqLCB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5jb2xvciwgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50JykuaXNTaW5nbGUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfSxcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLSDpooTliLbkvZPlrp7kvovljJYtLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyDnlJ/miJDlr7nosaHmsaBcclxuICBnZW5lcmF0ZVByZWZhYlBvb2woKSB7XHJcbiAgICB0aGlzLmJsb2NrUG9vbCA9IG5ldyBjYy5Ob2RlUG9vbCgpXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgucG93KHRoaXMucm93Q2ZnTnVtLCAyKTsgaSsrKSB7XHJcbiAgICAgIGxldCBibG9jayA9IGNjLmluc3RhbnRpYXRlKHRoaXMuYmxvY2tQcmVmYWIpXHJcbiAgICAgIHRoaXMuYmxvY2tQb29sLnB1dChibG9jaylcclxuICAgIH1cclxuICB9LFxyXG4gIC8vIOWunuS+i+WMluWNleS4quaWueWdl1xyXG4gIGluc3RhbnRpYXRlQmxvY2soc2VsZiwgZGF0YSwgcGFyZW50LCBpdGVtVHlwZSwgcG9zKSB7XHJcbiAgICBpdGVtVHlwZSA9IGl0ZW1UeXBlID8gaXRlbVR5cGUgOiAwXHJcbiAgICBpZiAoaXRlbVR5cGUgIT0gMCkge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhcIumBk+WFt+iKgueCueaVsOaNrlwiLCBkYXRhLCBpdGVtVHlwZSlcclxuICAgIH1cclxuICAgIGxldCBibG9jayA9IG51bGxcclxuICAgIGlmIChzZWxmLmJsb2NrUG9vbCAmJiBzZWxmLmJsb2NrUG9vbC5zaXplKCkgPiAwKSB7XHJcbiAgICAgIGJsb2NrID0gc2VsZi5ibG9ja1Bvb2wuZ2V0KClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJsb2NrID0gY2MuaW5zdGFudGlhdGUoc2VsZi5ibG9ja1ByZWZhYilcclxuICAgIH1cclxuICAgIGJsb2NrLnBhcmVudCA9IHBhcmVudFxyXG4gICAgYmxvY2suc2NhbGUgPSAxXHJcbiAgICBibG9jay54ID0gMFxyXG4gICAgYmxvY2sueSA9IDBcclxuICAgIGJsb2NrLmdldENvbXBvbmVudCgnZWxlbWVudCcpLmluaXQoc2VsZiwgZGF0YSwgdGhpcy5ibG9ja0Nsc1dpZHRoLCBpdGVtVHlwZSwgcG9zKVxyXG4gICAgcmV0dXJuIGJsb2NrXHJcbiAgfSxcclxuICAvLyDlm57mlLbmiYDmnInoioLngrlcclxuICByZWNvdmVyeUFsbEJsb2NrcygpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGxldCBjaGlsZHJlbiA9IHRoaXMuYmxvY2tzQ29udGFpbmVyLmNoaWxkcmVuXHJcbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggIT0gMCkge1xyXG4gICAgICAgIGxldCBsZW5ndGggPSBjaGlsZHJlbi5sZW5ndGhcclxuICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGxlbmd0aClcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB0aGlzLmJsb2NrUG9vbC5wdXQoY2hpbGRyZW5bMF0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3dDZmdOdW07IGkrKykge1xyXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd0NmZ051bTsgaisrKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwW2ldW2pdID0gbnVsbFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXNvbHZlKCcnKVxyXG4gICAgfSlcclxuICB9LFxyXG5cclxufSk7Il19