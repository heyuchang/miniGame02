
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/game.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '47c77yOeKpPiJVINXipHohs', 'game');
// Script/game.js

"use strict";

/**
 * @author heyuchang
 * @file 游戏控制
 */
var AC = require('GameAct');

cc.Class({
  "extends": cc.Component,
  properties: {
    _status: 0,
    //0 未开始 1 游戏开始 2 游戏暂停 3 游戏结束 4 下落状态 5无法触摸状态
    blockPrefab: cc.Prefab,
    blockSprite: [cc.SpriteFrame],
    //todo: 换成动态生成 暂不处理
    warningSpriteFrame: [cc.SpriteFrame],
    propSpriteFrame: [cc.SpriteFrame],
    checkMgr: require("elementCheck"),
    revivePage: cc.Node
  },
  start: function start() {
    this.bindNode();
    this.generatePrefabPool();
    this.loadRes();
  },
  loadRes: function loadRes() {},
  init: function init(c) {
    this._gameController = c;
    this._gameScore = c.scoreMgr;
    this.rowCfgNum = c.config.json.rowCfgNum;
    this.gapCfgNum = c.config.json.gapCfgNum;
    this.animaCfgSpeed = c.config.json.gapCfgNum;
    this.blockClsWidth = (730 - (this.rowCfgNum + 1) * this.gapCfgNum) / this.rowCfgNum;
    this.reviveTimer = null; //console.log(this.gapCfgNum)
    //console.log(this.blockClsWidth)
  },
  // 动态获取需要动态控制的组件
  bindNode: function bindNode() {
    this.blocksContainer = this.node.getChildByName('map');
  },
  //---------------- 游戏控制 ---------------------
  // 游戏开始
  gameStart: function gameStart() {
    var _this = this;

    this.recoveryAllBlocks().then();

    this._gameScore.init(this);

    this.mapSet(this.rowCfgNum).then(function (result) {
      // console.log('游戏状态改变', result)
      _this._status = 1;
    });
  },
  // 初始化地图
  mapSet: function mapSet(num) {
    var _this2 = this;

    this.map = new Array();
    var self = this; // 生成两个随机的对象数组

    var a = Math.floor(Math.random() * num);
    var b = Math.floor(Math.random() * num);
    var c = Math.floor(1 + Math.random() * (num - 1)) - 1;
    a == c ? c++ : '';
    var d = Math.floor(Math.random() * num);
    return new Promise(function (resolve, reject) {
      for (var i = 0; i < num; i++) {
        //行
        _this2.map[i] = new Array();

        for (var j = 0; j < num; j++) {
          //列
          var itemType = i == a && j == b ? 1 : i == c && j == d ? 2 : 0;
          self.map[i][j] = self.instantiateBlock(self, {
            x: j,
            y: i,
            width: self.blockClsWidth,
            startTime: (i + j + 1) * self._gameController.config.json.startAnimationTime / num * 2
          }, self.blocksContainer, itemType);
        }
      }

      _this2.checkMgr.init(_this2);

      setTimeout(function () {
        resolve('200 OK');

        _this2.checkMgr.elementCheck(_this2);
      }, self._gameController.config.json.startAnimationTime * num / 2 / 1 //  (cc.game.getFrameRate() / 60)
      );
    });
  },
  //防抖动 判断是否需要检测下落
  checkNeedFall: function checkNeedFall() {
    var _this3 = this;

    if (this.checkNeedFallTimer) {
      clearTimeout(this.checkNeedFallTimer);
    }

    this.checkNeedFallTimer = setTimeout(function () {
      if (_this3._status == 5) {
        _this3._status = 4;

        _this3.onFall();
      }
    }, 300 / 1 // (cc.game.getFrameRate() / 60)
    );
  },
  //方块下落
  onFall: function onFall() {
    var _this4 = this;

    this.checkGenerateProp(this._gameScore.chain).then(function () {
      var self = _this4;
      var canFall = 0; //从每一列的最下面一个开始往上判断
      //如果有空 就判断有几个空 然后让最上方的方块掉落下来

      for (var j = _this4.rowCfgNum - 1; j >= 0; j--) {
        canFall = 0;

        for (var i = _this4.rowCfgNum - 1; i >= 0; i--) {
          if (_this4.map[i][j].getComponent('element')._status == 2) {
            _this4.blockPool.put(_this4.map[i][j]);

            _this4.map[i][j] = null;
            canFall++;
          } else {
            if (canFall != 0) {
              _this4.map[i + canFall][j] = _this4.map[i][j];
              _this4.map[i][j] = null;

              _this4.map[i + canFall][j].getComponent('element').playFallAction(canFall, {
                x: j,
                y: i + canFall
              });
            }
          }
        }

        for (var k = 0; k < canFall; k++) {
          _this4.map[k][j] = _this4.instantiateBlock(_this4, {
            x: j,
            y: k,
            width: _this4.blockClsWidth,
            startTime: null
          }, _this4.blocksContainer, '', {
            x: j,
            y: -canFall + k
          });

          _this4.map[k][j].getComponent('element').playFallAction(canFall, null);
        }
      }

      setTimeout(function () {
        _this4.checkMgr.init(_this4);

        _this4.checkMgr.elementCheck(_this4);

        _this4._status = 1;
      }, 250);
    });
  },
  gameOver: function gameOver() {
    this._status = 3;

    this._gameController.pageManager.addPage(2);

    this._gameController.pageManager.addPage(4);

    if (this._gameController.social.node.active) {
      this._gameController.social.closeBannerAdv();
    }
  },
  // todo 复活
  askRevive: function askRevive() {
    var _this5 = this;

    this._gameController.pageManager.addPage(2);

    this._gameController.pageManager.addPage(5);

    this.revivePage.active = true;
    this.revivePage.getChildByName('askRevive').active = true;
    this.revivePage.getChildByName('successRevive').active = false;
    this.rangeSprite = this.revivePage.getChildByName('askRevive').getChildByName('numBg').getChildByName('sprite').getComponent(cc.Sprite);
    this.rangeSprite.fillRange = 1;
    this.isRangeAction = true;
    var numLabel = this.revivePage.getChildByName('askRevive').getChildByName('numBg').getChildByName('num').getComponent(cc.Label);
    numLabel.string = 9;

    if (this.reviveTimer) {
      clearInterval(this.reviveTimer);
    }

    this.reviveTimer = setInterval(function () {
      if (+numLabel.string > 0) {
        numLabel.string--;
        _this5.rangeSprite.fillRange = 1;
      } else {
        _this5.onSkipRevive();
      }
    }, 1000);
  },
  onReviveButton: function onReviveButton() {
    clearInterval(this.reviveTimer);
    this.isRangeAction = false;

    if (this._gameController.social.node.active) {
      this._gameController.social.onReviveButton(1);
    } else {
      this.showReviveSuccess();
    }
  },
  showReviveSuccess: function showReviveSuccess() {
    //console.log('打开复活成功页面')
    this.revivePage.getChildByName('askRevive').active = false;
    this.revivePage.getChildByName('successRevive').active = true;
  },
  onReviveCertainBtn: function onReviveCertainBtn() {
    this._gameController.pageManager.removePage(2);

    this.revivePage.active = false;
    this._status = 1;

    this._gameScore.onRevive();
  },
  update: function update() {
    if (this.isRangeAction) {
      this.rangeSprite.fillRange -= 1 / 60;
    }
  },
  onSkipRevive: function onSkipRevive() {
    clearInterval(this.reviveTimer);
    this._gameController.pageManager.pages[5].active = false;

    this._gameScore.onGameOver(true);

    this.isRangeAction = false;
  },
  restart: function restart() {
    var _this6 = this;

    this._gameController.pageManager.onOpenPage(1);

    this.recoveryAllBlocks().then(function () {
      _this6.gameStart();
    });
  },
  // -----------------道具相关---------------
  // 储存用户点击时的方块 用于生成道具
  onUserTouched: function onUserTouched(iid, jid, itemType, color, warning, pos) {
    this.target = {
      i: iid,
      j: jid,
      color: color,
      itemType: itemType,
      x: pos.x,
      y: pos.y,
      warning: warning
    };
  },
  // 生成道具 type 1为双倍倍数 2为炸弹 3为加五百
  generatePropItem: function generatePropItem(type) {
    var _this7 = this;

    return new Promise(function (resolve, reject) {
      // 是否做道具生成动画
      _this7.map[_this7.target.i][_this7.target.j] = _this7.instantiateBlock(_this7, {
        x: _this7.target.j,
        y: _this7.target.i,
        color: _this7.target.color,
        width: _this7.blockClsWidth,
        startTime: null
      }, _this7.blocksContainer, type);
      setTimeout(function () {
        resolve();
      }, 300);
    });
  },
  checkGenerateProp: function checkGenerateProp(chain) {
    var _this8 = this;

    return new Promise(function (resolve, reject) {
      if (_this8.target.warning) {
        _this8.generatePropItem(_this8.target.warning).then(function () {
          resolve();
          return;
        });
      }

      resolve();
    });
  },
  onItem: function onItem(type, color, pos) {
    switch (type) {
      case 1:
        // 分数翻倍 最高八倍
        this._gameScore.tipBox.init(this._gameScore, 1);

        this._gameScore.addMult(color, pos);

        this._gameController.musicManager.onDouble();

        for (var i = 0; i < this.rowCfgNum; i++) {
          //行
          for (var j = 0; j < this.rowCfgNum; j++) {
            //列
            if (this.map[i][j] && this.map[i][j].getComponent('element')._status == 1) {
              var distance = Math.sqrt(Math.pow(pos.x - this.map[i][j].x, 2) + Math.pow(pos.y - this.map[i][j].y, 2));

              if (distance != 0) {
                this.map[i][j].getComponent('element').surfaceAction(distance);
              }
            }
          }
        }

        break;

      case 2:
        // 炸弹 消除同种颜色的
        this._gameScore.tipBox.init(this._gameScore, 2);

        this.node.runAction(AC.shackAction(0.1, 10));

        if (this._gameController.social.node.active) {
          this._gameController.social.onShakePhone();
        }

        this.isPropChain = true;

        this._gameController.musicManager.onBoom();

        for (var _i = 0; _i < this.rowCfgNum; _i++) {
          //行
          for (var _j = 0; _j < this.rowCfgNum; _j++) {
            //列
            if (this.map[_i][_j] && this.map[_i][_j].getComponent('element').color == color && this.map[_i][_j] && this.map[_i][_j].getComponent('element')._status != 2) {
              this.map[_i][_j].getComponent('element').onTouched(color, false, true);
            } else {
              this.map[_i][_j].runAction(AC.rockAction(0.2, 10));
            }
          }
        }

        break;

      case 3:
        //:  加步数
        this._gameScore.tipBox.init(this._gameScore, 4);

        this._gameController.musicManager.onDouble();

        for (var _i2 = 0; _i2 < this.rowCfgNum; _i2++) {
          //行
          for (var _j2 = 0; _j2 < this.rowCfgNum; _j2++) {
            //列
            if (this.map[_i2][_j2] && this.map[_i2][_j2].getComponent('element')._status == 1) {
              var _distance = Math.sqrt(Math.pow(pos.x - this.map[_i2][_j2].x, 2) + Math.pow(pos.y - this.map[_i2][_j2].y, 2));

              if (_distance != 0) {
                this.map[_i2][_j2].getComponent('element').surfaceAction(_distance);
              }
            }
          }
        }

        this._gameScore.onStep(3).then();

        break;

      case 4:
        // : 消除全部单身的方块
        this._gameScore.tipBox.init(this._gameScore, 5);

        this.isPropChain = true;

        this._gameController.musicManager.onMagic();

        for (var _i3 = 0; _i3 < this.rowCfgNum; _i3++) {
          //行
          for (var _j3 = 0; _j3 < this.rowCfgNum; _j3++) {
            //列
            if (this.map[_i3][_j3] && this.map[_i3][_j3].getComponent('element').isSingle && this.map[_i3][_j3] && this.map[_i3][_j3].getComponent('element')._status != 2) {
              var _distance2 = Math.sqrt(Math.pow(pos.x - this.map[_i3][_j3].x, 2) + Math.pow(pos.y - this.map[_i3][_j3].y, 2));

              this.map[_i3][_j3].getComponent('element').onTouched(color, false, true, _distance2);

              console.log("魔法棒触发的点", _i3, _j3, this.map[_i3][_j3].getComponent('element').color, this.map[_i3][_j3].getComponent('element').isSingle);
            }
          }
        }

        break;
    }
  },
  //--------------------- 预制体实例化---------------------
  // 生成对象池
  generatePrefabPool: function generatePrefabPool() {
    this.blockPool = new cc.NodePool();

    for (var i = 0; i < Math.pow(this.rowCfgNum, 2); i++) {
      var block = cc.instantiate(this.blockPrefab);
      this.blockPool.put(block);
    }
  },
  // 实例化单个方块
  instantiateBlock: function instantiateBlock(self, data, parent, itemType, pos) {
    itemType = itemType ? itemType : 0;

    if (itemType != 0) {// console.log("道具节点数据", data, itemType)
    }

    var block = null;

    if (self.blockPool && self.blockPool.size() > 0) {
      block = self.blockPool.get();
    } else {
      block = cc.instantiate(self.blockPrefab);
    }

    block.parent = parent;
    block.scale = 1;
    block.x = 0;
    block.y = 0;
    block.getComponent('element').init(self, data, this.blockClsWidth, itemType, pos);
    return block;
  },
  // 回收所有节点
  recoveryAllBlocks: function recoveryAllBlocks() {
    var _this9 = this;

    return new Promise(function (resolve, reject) {
      var children = _this9.blocksContainer.children;

      if (children.length != 0) {
        var length = children.length; //   console.log(length)

        for (var i = 0; i < length; i++) {
          _this9.blockPool.put(children[0]);
        }

        for (var _i4 = 0; _i4 < _this9.rowCfgNum; _i4++) {
          for (var j = 0; j < _this9.rowCfgNum; j++) {
            _this9.map[_i4][j] = null;
          }
        }
      }

      resolve('');
    });
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxnYW1lLmpzIl0sIm5hbWVzIjpbIkFDIiwicmVxdWlyZSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiX3N0YXR1cyIsImJsb2NrUHJlZmFiIiwiUHJlZmFiIiwiYmxvY2tTcHJpdGUiLCJTcHJpdGVGcmFtZSIsIndhcm5pbmdTcHJpdGVGcmFtZSIsInByb3BTcHJpdGVGcmFtZSIsImNoZWNrTWdyIiwicmV2aXZlUGFnZSIsIk5vZGUiLCJzdGFydCIsImJpbmROb2RlIiwiZ2VuZXJhdGVQcmVmYWJQb29sIiwibG9hZFJlcyIsImluaXQiLCJjIiwiX2dhbWVDb250cm9sbGVyIiwiX2dhbWVTY29yZSIsInNjb3JlTWdyIiwicm93Q2ZnTnVtIiwiY29uZmlnIiwianNvbiIsImdhcENmZ051bSIsImFuaW1hQ2ZnU3BlZWQiLCJibG9ja0Nsc1dpZHRoIiwicmV2aXZlVGltZXIiLCJibG9ja3NDb250YWluZXIiLCJub2RlIiwiZ2V0Q2hpbGRCeU5hbWUiLCJnYW1lU3RhcnQiLCJyZWNvdmVyeUFsbEJsb2NrcyIsInRoZW4iLCJtYXBTZXQiLCJyZXN1bHQiLCJudW0iLCJtYXAiLCJBcnJheSIsInNlbGYiLCJhIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYiIsImQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImkiLCJqIiwiaXRlbVR5cGUiLCJpbnN0YW50aWF0ZUJsb2NrIiwieCIsInkiLCJ3aWR0aCIsInN0YXJ0VGltZSIsInN0YXJ0QW5pbWF0aW9uVGltZSIsInNldFRpbWVvdXQiLCJlbGVtZW50Q2hlY2siLCJjaGVja05lZWRGYWxsIiwiY2hlY2tOZWVkRmFsbFRpbWVyIiwiY2xlYXJUaW1lb3V0Iiwib25GYWxsIiwiY2hlY2tHZW5lcmF0ZVByb3AiLCJjaGFpbiIsImNhbkZhbGwiLCJnZXRDb21wb25lbnQiLCJibG9ja1Bvb2wiLCJwdXQiLCJwbGF5RmFsbEFjdGlvbiIsImsiLCJnYW1lT3ZlciIsInBhZ2VNYW5hZ2VyIiwiYWRkUGFnZSIsInNvY2lhbCIsImFjdGl2ZSIsImNsb3NlQmFubmVyQWR2IiwiYXNrUmV2aXZlIiwicmFuZ2VTcHJpdGUiLCJTcHJpdGUiLCJmaWxsUmFuZ2UiLCJpc1JhbmdlQWN0aW9uIiwibnVtTGFiZWwiLCJMYWJlbCIsInN0cmluZyIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIm9uU2tpcFJldml2ZSIsIm9uUmV2aXZlQnV0dG9uIiwic2hvd1Jldml2ZVN1Y2Nlc3MiLCJvblJldml2ZUNlcnRhaW5CdG4iLCJyZW1vdmVQYWdlIiwib25SZXZpdmUiLCJ1cGRhdGUiLCJwYWdlcyIsIm9uR2FtZU92ZXIiLCJyZXN0YXJ0Iiwib25PcGVuUGFnZSIsIm9uVXNlclRvdWNoZWQiLCJpaWQiLCJqaWQiLCJjb2xvciIsIndhcm5pbmciLCJwb3MiLCJ0YXJnZXQiLCJnZW5lcmF0ZVByb3BJdGVtIiwidHlwZSIsIm9uSXRlbSIsInRpcEJveCIsImFkZE11bHQiLCJtdXNpY01hbmFnZXIiLCJvbkRvdWJsZSIsImRpc3RhbmNlIiwic3FydCIsInBvdyIsInN1cmZhY2VBY3Rpb24iLCJydW5BY3Rpb24iLCJzaGFja0FjdGlvbiIsIm9uU2hha2VQaG9uZSIsImlzUHJvcENoYWluIiwib25Cb29tIiwib25Ub3VjaGVkIiwicm9ja0FjdGlvbiIsIm9uU3RlcCIsIm9uTWFnaWMiLCJpc1NpbmdsZSIsImNvbnNvbGUiLCJsb2ciLCJOb2RlUG9vbCIsImJsb2NrIiwiaW5zdGFudGlhdGUiLCJkYXRhIiwicGFyZW50Iiwic2l6ZSIsImdldCIsInNjYWxlIiwiY2hpbGRyZW4iLCJsZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFJQSxJQUFJQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQWhCOztBQUNBQyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNQLGFBQVNELEVBQUUsQ0FBQ0UsU0FETDtBQUVQQyxFQUFBQSxVQUFVLEVBQUU7QUFD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ZXl1Y2hhbmdcbiAqIEBmaWxlIOa4uOaIj+aOp+WItlxuICovXG52YXIgQUMgPSByZXF1aXJlKCdHYW1lQWN0JylcbmNjLkNsYXNzKHtcbiAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuICBwcm9wZXJ0aWVzOiB7XG4gICAgX3N0YXR1czogMCwgLy8wIOacquW8gOWniyAxIOa4uOaIj+W8gOWniyAyIOa4uOaIj+aaguWBnCAzIOa4uOaIj+e7k+adnyA0IOS4i+iQveeKtuaAgSA15peg5rOV6Kem5pG454q25oCBXG4gICAgYmxvY2tQcmVmYWI6IGNjLlByZWZhYixcbiAgICBibG9ja1Nwcml0ZTogW2NjLlNwcml0ZUZyYW1lXSwgLy90b2RvOiDmjaLmiJDliqjmgIHnlJ/miJAg5pqC5LiN5aSE55CGXG4gICAgd2FybmluZ1Nwcml0ZUZyYW1lOiBbY2MuU3ByaXRlRnJhbWVdLFxuICAgIHByb3BTcHJpdGVGcmFtZTogW2NjLlNwcml0ZUZyYW1lXSxcbiAgICBjaGVja01ncjogcmVxdWlyZShcImVsZW1lbnRDaGVja1wiKSxcbiAgICByZXZpdmVQYWdlOiBjYy5Ob2RlLFxuICB9LFxuICBzdGFydCgpIHtcbiAgICB0aGlzLmJpbmROb2RlKClcbiAgICB0aGlzLmdlbmVyYXRlUHJlZmFiUG9vbCgpXG4gICAgdGhpcy5sb2FkUmVzKClcbiAgfSxcbiAgbG9hZFJlcygpIHtcblxuICB9LFxuICBpbml0KGMpIHtcbiAgICB0aGlzLl9nYW1lQ29udHJvbGxlciA9IGNcbiAgICB0aGlzLl9nYW1lU2NvcmUgPSBjLnNjb3JlTWdyXG4gICAgdGhpcy5yb3dDZmdOdW0gPSBjLmNvbmZpZy5qc29uLnJvd0NmZ051bVxuICAgIHRoaXMuZ2FwQ2ZnTnVtID0gYy5jb25maWcuanNvbi5nYXBDZmdOdW1cbiAgICB0aGlzLmFuaW1hQ2ZnU3BlZWQgPSBjLmNvbmZpZy5qc29uLmdhcENmZ051bVxuICAgIHRoaXMuYmxvY2tDbHNXaWR0aCA9ICg3MzAgLSAodGhpcy5yb3dDZmdOdW0gKyAxKSAqIHRoaXMuZ2FwQ2ZnTnVtKSAvIHRoaXMucm93Q2ZnTnVtXG4gICAgdGhpcy5yZXZpdmVUaW1lciA9IG51bGxcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuZ2FwQ2ZnTnVtKVxuICAgIC8vY29uc29sZS5sb2codGhpcy5ibG9ja0Nsc1dpZHRoKVxuICB9LFxuICAvLyDliqjmgIHojrflj5bpnIDopoHliqjmgIHmjqfliLbnmoTnu4Tku7ZcbiAgYmluZE5vZGUoKSB7XG4gICAgdGhpcy5ibG9ja3NDb250YWluZXIgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ21hcCcpXG4gIH0sXG4gIC8vLS0tLS0tLS0tLS0tLS0tLSDmuLjmiI/mjqfliLYgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIOa4uOaIj+W8gOWni1xuICBnYW1lU3RhcnQoKSB7XG4gICAgdGhpcy5yZWNvdmVyeUFsbEJsb2NrcygpLnRoZW4oKVxuICAgIHRoaXMuX2dhbWVTY29yZS5pbml0KHRoaXMpXG4gICAgdGhpcy5tYXBTZXQodGhpcy5yb3dDZmdOdW0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgLy8gY29uc29sZS5sb2coJ+a4uOaIj+eKtuaAgeaUueWPmCcsIHJlc3VsdClcbiAgICAgIHRoaXMuX3N0YXR1cyA9IDFcbiAgICB9KVxuXG4gIH0sXG4gIC8vIOWIneWni+WMluWcsOWbvlxuICBtYXBTZXQobnVtKSB7XG4gICAgdGhpcy5tYXAgPSBuZXcgQXJyYXkoKVxuICAgIGxldCBzZWxmID0gdGhpc1xuICAgIC8vIOeUn+aIkOS4pOS4qumaj+acuueahOWvueixoeaVsOe7hFxuICAgIGxldCBhID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtKVxuICAgIGxldCBiID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtKVxuXG4gICAgbGV0IGMgPSBNYXRoLmZsb29yKDEgKyBNYXRoLnJhbmRvbSgpICogKG51bSAtIDEpKSAtIDFcbiAgICBhID09IGMgPyBjKysgOiAnJ1xuICAgIGxldCBkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbnVtKVxuXG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW07IGkrKykgeyAvL+ihjFxuICAgICAgICB0aGlzLm1hcFtpXSA9IG5ldyBBcnJheSgpXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbnVtOyBqKyspIHsgLy/liJdcbiAgICAgICAgICBsZXQgaXRlbVR5cGUgPSAoaSA9PSBhICYmIGogPT0gYikgPyAxIDogKGkgPT0gYyAmJiBqID09IGQpID8gMiA6IDBcbiAgICAgICAgICBzZWxmLm1hcFtpXVtqXSA9IHNlbGYuaW5zdGFudGlhdGVCbG9jayhzZWxmLCB7XG4gICAgICAgICAgICB4OiBqLFxuICAgICAgICAgICAgeTogaSxcbiAgICAgICAgICAgIHdpZHRoOiBzZWxmLmJsb2NrQ2xzV2lkdGgsXG4gICAgICAgICAgICBzdGFydFRpbWU6IChpICsgaiArIDEpICogc2VsZi5fZ2FtZUNvbnRyb2xsZXIuY29uZmlnLmpzb24uc3RhcnRBbmltYXRpb25UaW1lIC8gbnVtICogMlxuICAgICAgICAgIH0sIHNlbGYuYmxvY2tzQ29udGFpbmVyLCBpdGVtVHlwZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5jaGVja01nci5pbml0KHRoaXMpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKCcyMDAgT0snKTtcbiAgICAgICAgICB0aGlzLmNoZWNrTWdyLmVsZW1lbnRDaGVjayh0aGlzKVxuICAgICAgICB9LCBzZWxmLl9nYW1lQ29udHJvbGxlci5jb25maWcuanNvbi5zdGFydEFuaW1hdGlvblRpbWUgKiBudW0gLyAyIC8gMVxuICAgICAgICAvLyAgKGNjLmdhbWUuZ2V0RnJhbWVSYXRlKCkgLyA2MClcbiAgICAgIClcbiAgICB9KVxuICB9LFxuICAvL+mYsuaKluWKqCDliKTmlq3mmK/lkKbpnIDopoHmo4DmtYvkuIvokL1cbiAgY2hlY2tOZWVkRmFsbCgpIHtcbiAgICBpZiAodGhpcy5jaGVja05lZWRGYWxsVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNoZWNrTmVlZEZhbGxUaW1lcilcbiAgICB9XG4gICAgdGhpcy5jaGVja05lZWRGYWxsVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXR1cyA9PSA1KSB7XG4gICAgICAgICAgdGhpcy5fc3RhdHVzID0gNFxuICAgICAgICAgIHRoaXMub25GYWxsKClcbiAgICAgICAgfVxuICAgICAgfSwgMzAwIC8gMVxuICAgICAgLy8gKGNjLmdhbWUuZ2V0RnJhbWVSYXRlKCkgLyA2MClcbiAgICApXG4gIH0sXG4gIC8v5pa55Z2X5LiL6JC9XG4gIG9uRmFsbCgpIHtcbiAgICB0aGlzLmNoZWNrR2VuZXJhdGVQcm9wKHRoaXMuX2dhbWVTY29yZS5jaGFpbikudGhlbigoKSA9PiB7XG4gICAgICBsZXQgc2VsZiA9IHRoaXNcbiAgICAgIGxldCBjYW5GYWxsID0gMFxuICAgICAgLy/ku47mr4/kuIDliJfnmoTmnIDkuIvpnaLkuIDkuKrlvIDlp4vlvoDkuIrliKTmlq1cbiAgICAgIC8v5aaC5p6c5pyJ56m6IOWwseWIpOaWreacieWHoOS4quepuiDnhLblkI7orqnmnIDkuIrmlrnnmoTmlrnlnZfmjonokL3kuIvmnaVcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLnJvd0NmZ051bSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGNhbkZhbGwgPSAwXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnJvd0NmZ051bSAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLl9zdGF0dXMgPT0gMikge1xuICAgICAgICAgICAgdGhpcy5ibG9ja1Bvb2wucHV0KHRoaXMubWFwW2ldW2pdKVxuICAgICAgICAgICAgdGhpcy5tYXBbaV1bal0gPSBudWxsXG4gICAgICAgICAgICBjYW5GYWxsKytcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNhbkZhbGwgIT0gMCkge1xuICAgICAgICAgICAgICB0aGlzLm1hcFtpICsgY2FuRmFsbF1bal0gPSB0aGlzLm1hcFtpXVtqXVxuICAgICAgICAgICAgICB0aGlzLm1hcFtpXVtqXSA9IG51bGxcbiAgICAgICAgICAgICAgdGhpcy5tYXBbaSArIGNhbkZhbGxdW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLnBsYXlGYWxsQWN0aW9uKGNhbkZhbGwsIHtcbiAgICAgICAgICAgICAgICB4OiBqLFxuICAgICAgICAgICAgICAgIHk6IGkgKyBjYW5GYWxsLFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNhbkZhbGw7IGsrKykge1xuICAgICAgICAgIHRoaXMubWFwW2tdW2pdID0gdGhpcy5pbnN0YW50aWF0ZUJsb2NrKHRoaXMsIHtcbiAgICAgICAgICAgIHg6IGosXG4gICAgICAgICAgICB5OiBrLFxuICAgICAgICAgICAgd2lkdGg6IHRoaXMuYmxvY2tDbHNXaWR0aCxcbiAgICAgICAgICAgIHN0YXJ0VGltZTogbnVsbFxuICAgICAgICAgIH0sIHRoaXMuYmxvY2tzQ29udGFpbmVyLCAnJywge1xuICAgICAgICAgICAgeDogaixcbiAgICAgICAgICAgIHk6IC1jYW5GYWxsICsga1xuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5tYXBba11bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50JykucGxheUZhbGxBY3Rpb24oY2FuRmFsbCwgbnVsbClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY2hlY2tNZ3IuaW5pdCh0aGlzKVxuICAgICAgICB0aGlzLmNoZWNrTWdyLmVsZW1lbnRDaGVjayh0aGlzKVxuICAgICAgICB0aGlzLl9zdGF0dXMgPSAxXG4gICAgICB9LCAyNTApXG4gICAgfSlcbiAgfSxcbiAgZ2FtZU92ZXIoKSB7XG4gICAgdGhpcy5fc3RhdHVzID0gM1xuICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLnBhZ2VNYW5hZ2VyLmFkZFBhZ2UoMilcbiAgICB0aGlzLl9nYW1lQ29udHJvbGxlci5wYWdlTWFuYWdlci5hZGRQYWdlKDQpXG4gICAgaWYgKHRoaXMuX2dhbWVDb250cm9sbGVyLnNvY2lhbC5ub2RlLmFjdGl2ZSkge1xuICAgICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIuc29jaWFsLmNsb3NlQmFubmVyQWR2KClcbiAgICB9XG4gIH0sXG4gIC8vIHRvZG8g5aSN5rS7XG4gIGFza1Jldml2ZSgpIHtcbiAgICB0aGlzLl9nYW1lQ29udHJvbGxlci5wYWdlTWFuYWdlci5hZGRQYWdlKDIpXG4gICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIucGFnZU1hbmFnZXIuYWRkUGFnZSg1KVxuICAgIHRoaXMucmV2aXZlUGFnZS5hY3RpdmUgPSB0cnVlXG4gICAgdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdhc2tSZXZpdmUnKS5hY3RpdmUgPSB0cnVlXG4gICAgdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdzdWNjZXNzUmV2aXZlJykuYWN0aXZlID0gZmFsc2VcbiAgICB0aGlzLnJhbmdlU3ByaXRlID0gdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdhc2tSZXZpdmUnKS5nZXRDaGlsZEJ5TmFtZSgnbnVtQmcnKS5nZXRDaGlsZEJ5TmFtZSgnc3ByaXRlJykuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSlcbiAgICB0aGlzLnJhbmdlU3ByaXRlLmZpbGxSYW5nZSA9IDFcbiAgICB0aGlzLmlzUmFuZ2VBY3Rpb24gPSB0cnVlXG4gICAgbGV0IG51bUxhYmVsID0gdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdhc2tSZXZpdmUnKS5nZXRDaGlsZEJ5TmFtZSgnbnVtQmcnKS5nZXRDaGlsZEJ5TmFtZSgnbnVtJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKVxuICAgIG51bUxhYmVsLnN0cmluZyA9IDlcbiAgICBpZiAodGhpcy5yZXZpdmVUaW1lcikge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJldml2ZVRpbWVyKVxuICAgIH1cbiAgICB0aGlzLnJldml2ZVRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaWYgKCtudW1MYWJlbC5zdHJpbmcgPiAwKSB7XG4gICAgICAgIG51bUxhYmVsLnN0cmluZy0tXG4gICAgICAgIHRoaXMucmFuZ2VTcHJpdGUuZmlsbFJhbmdlID0gMVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vblNraXBSZXZpdmUoKVxuICAgICAgfVxuICAgIH0sIDEwMDApXG5cbiAgfSxcbiAgb25SZXZpdmVCdXR0b24oKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJldml2ZVRpbWVyKVxuICAgIHRoaXMuaXNSYW5nZUFjdGlvbiA9IGZhbHNlXG4gICAgaWYgKHRoaXMuX2dhbWVDb250cm9sbGVyLnNvY2lhbC5ub2RlLmFjdGl2ZSkge1xuICAgICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIuc29jaWFsLm9uUmV2aXZlQnV0dG9uKDEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2hvd1Jldml2ZVN1Y2Nlc3MoKVxuICAgIH1cbiAgfSxcbiAgc2hvd1Jldml2ZVN1Y2Nlc3MoKSB7XG4gICAgLy9jb25zb2xlLmxvZygn5omT5byA5aSN5rS75oiQ5Yqf6aG16Z2iJylcbiAgICB0aGlzLnJldml2ZVBhZ2UuZ2V0Q2hpbGRCeU5hbWUoJ2Fza1Jldml2ZScpLmFjdGl2ZSA9IGZhbHNlXG4gICAgdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdzdWNjZXNzUmV2aXZlJykuYWN0aXZlID0gdHJ1ZVxuICB9LFxuICBvblJldml2ZUNlcnRhaW5CdG4oKSB7XG4gICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIucGFnZU1hbmFnZXIucmVtb3ZlUGFnZSgyKVxuICAgIHRoaXMucmV2aXZlUGFnZS5hY3RpdmUgPSBmYWxzZVxuICAgIHRoaXMuX3N0YXR1cyA9IDFcbiAgICB0aGlzLl9nYW1lU2NvcmUub25SZXZpdmUoKVxuICB9LFxuICB1cGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuaXNSYW5nZUFjdGlvbikge1xuICAgICAgdGhpcy5yYW5nZVNwcml0ZS5maWxsUmFuZ2UgLT0gMSAvIDYwXG4gICAgfVxuICB9LFxuICBvblNraXBSZXZpdmUoKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJldml2ZVRpbWVyKVxuICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLnBhZ2VNYW5hZ2VyLnBhZ2VzWzVdLmFjdGl2ZSA9IGZhbHNlXG4gICAgdGhpcy5fZ2FtZVNjb3JlLm9uR2FtZU92ZXIodHJ1ZSlcbiAgICB0aGlzLmlzUmFuZ2VBY3Rpb24gPSBmYWxzZVxuICB9LFxuICByZXN0YXJ0KCkge1xuICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLnBhZ2VNYW5hZ2VyLm9uT3BlblBhZ2UoMSlcbiAgICB0aGlzLnJlY292ZXJ5QWxsQmxvY2tzKCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLmdhbWVTdGFydCgpXG4gICAgfSlcbiAgfSxcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS3pgZPlhbfnm7jlhbMtLS0tLS0tLS0tLS0tLS1cbiAgLy8g5YKo5a2Y55So5oi354K55Ye75pe255qE5pa55Z2XIOeUqOS6jueUn+aIkOmBk+WFt1xuICBvblVzZXJUb3VjaGVkKGlpZCwgamlkLCBpdGVtVHlwZSwgY29sb3IsIHdhcm5pbmcsIHBvcykge1xuICAgIHRoaXMudGFyZ2V0ID0ge1xuICAgICAgaTogaWlkLFxuICAgICAgajogamlkLFxuICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgaXRlbVR5cGU6IGl0ZW1UeXBlLFxuICAgICAgeDogcG9zLngsXG4gICAgICB5OiBwb3MueSxcbiAgICAgIHdhcm5pbmc6IHdhcm5pbmdcbiAgICB9XG4gIH0sXG4gIC8vIOeUn+aIkOmBk+WFtyB0eXBlIDHkuLrlj4zlgI3lgI3mlbAgMuS4uueCuOW8uSAz5Li65Yqg5LqU55m+XG4gIGdlbmVyYXRlUHJvcEl0ZW0odHlwZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAvLyDmmK/lkKblgZrpgZPlhbfnlJ/miJDliqjnlLtcbiAgICAgIHRoaXMubWFwW3RoaXMudGFyZ2V0LmldW3RoaXMudGFyZ2V0LmpdID0gdGhpcy5pbnN0YW50aWF0ZUJsb2NrKHRoaXMsIHtcbiAgICAgICAgeDogdGhpcy50YXJnZXQuaixcbiAgICAgICAgeTogdGhpcy50YXJnZXQuaSxcbiAgICAgICAgY29sb3I6IHRoaXMudGFyZ2V0LmNvbG9yLFxuICAgICAgICB3aWR0aDogdGhpcy5ibG9ja0Nsc1dpZHRoLFxuICAgICAgICBzdGFydFRpbWU6IG51bGxcbiAgICAgIH0sIHRoaXMuYmxvY2tzQ29udGFpbmVyLCB0eXBlKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoKVxuICAgICAgfSwgMzAwKVxuICAgIH0pXG4gIH0sXG4gIGNoZWNrR2VuZXJhdGVQcm9wKGNoYWluKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICh0aGlzLnRhcmdldC53YXJuaW5nKSB7XG4gICAgICAgIHRoaXMuZ2VuZXJhdGVQcm9wSXRlbSh0aGlzLnRhcmdldC53YXJuaW5nKS50aGVuKCgpID0+IHtcbiAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoKVxuICAgIH0pXG4gIH0sXG4gIG9uSXRlbSh0eXBlLCBjb2xvciwgcG9zKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIC8vIOWIhuaVsOe/u+WAjSDmnIDpq5jlhavlgI1cbiAgICAgICAgdGhpcy5fZ2FtZVNjb3JlLnRpcEJveC5pbml0KHRoaXMuX2dhbWVTY29yZSwgMSlcbiAgICAgICAgdGhpcy5fZ2FtZVNjb3JlLmFkZE11bHQoY29sb3IsIHBvcylcbiAgICAgICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIubXVzaWNNYW5hZ2VyLm9uRG91YmxlKClcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvd0NmZ051bTsgaSsrKSB7IC8v6KGMXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd0NmZ051bTsgaisrKSB7IC8v5YiXXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBbaV1bal0gJiYgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50JykuX3N0YXR1cyA9PSAxKSB7XG4gICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhwb3MueCAtIHRoaXMubWFwW2ldW2pdLngsIDIpICsgTWF0aC5wb3cocG9zLnkgLSB0aGlzLm1hcFtpXVtqXS55LCAyKSlcbiAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlICE9IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5zdXJmYWNlQWN0aW9uKGRpc3RhbmNlKVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgLy8g54K45by5IOa2iOmZpOWQjOenjeminOiJsueahFxuICAgICAgICB0aGlzLl9nYW1lU2NvcmUudGlwQm94LmluaXQodGhpcy5fZ2FtZVNjb3JlLCAyKVxuICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKEFDLnNoYWNrQWN0aW9uKDAuMSwgMTApKVxuICAgICAgICBpZiAodGhpcy5fZ2FtZUNvbnRyb2xsZXIuc29jaWFsLm5vZGUuYWN0aXZlKSB7XG4gICAgICAgICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIuc29jaWFsLm9uU2hha2VQaG9uZSgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1Byb3BDaGFpbiA9IHRydWVcbiAgICAgICAgdGhpcy5fZ2FtZUNvbnRyb2xsZXIubXVzaWNNYW5hZ2VyLm9uQm9vbSgpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3dDZmdOdW07IGkrKykgeyAvL+ihjFxuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5yb3dDZmdOdW07IGorKykgeyAvL+WIl1xuICAgICAgICAgICAgaWYgKHRoaXMubWFwW2ldW2pdICYmIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLmNvbG9yID09IGNvbG9yICYmIHRoaXMubWFwW2ldW2pdICYmIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLl9zdGF0dXMgIT0gMikge1xuICAgICAgICAgICAgICB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5vblRvdWNoZWQoY29sb3IsIGZhbHNlLCB0cnVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMubWFwW2ldW2pdLnJ1bkFjdGlvbihBQy5yb2NrQWN0aW9uKDAuMiwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAzOiAvLzogIOWKoOatpeaVsFxuICAgICAgICB0aGlzLl9nYW1lU2NvcmUudGlwQm94LmluaXQodGhpcy5fZ2FtZVNjb3JlLCA0KVxuICAgICAgICB0aGlzLl9nYW1lQ29udHJvbGxlci5tdXNpY01hbmFnZXIub25Eb3VibGUoKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm93Q2ZnTnVtOyBpKyspIHsgLy/ooYxcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMucm93Q2ZnTnVtOyBqKyspIHsgLy/liJdcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcFtpXVtqXSAmJiB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5fc3RhdHVzID09IDEpIHtcbiAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvcy54IC0gdGhpcy5tYXBbaV1bal0ueCwgMikgKyBNYXRoLnBvdyhwb3MueSAtIHRoaXMubWFwW2ldW2pdLnksIDIpKVxuICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgIT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLnN1cmZhY2VBY3Rpb24oZGlzdGFuY2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ2FtZVNjb3JlLm9uU3RlcCgzKS50aGVuKClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6IC8vIDog5raI6Zmk5YWo6YOo5Y2V6Lqr55qE5pa55Z2XXG4gICAgICAgIHRoaXMuX2dhbWVTY29yZS50aXBCb3guaW5pdCh0aGlzLl9nYW1lU2NvcmUsIDUpXG4gICAgICAgIHRoaXMuaXNQcm9wQ2hhaW4gPSB0cnVlXG4gICAgICAgIHRoaXMuX2dhbWVDb250cm9sbGVyLm11c2ljTWFuYWdlci5vbk1hZ2ljKClcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvd0NmZ051bTsgaSsrKSB7IC8v6KGMXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd0NmZ051bTsgaisrKSB7IC8v5YiXXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBbaV1bal0gJiYgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50JykuaXNTaW5nbGUgJiYgdGhpcy5tYXBbaV1bal0gJiYgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50JykuX3N0YXR1cyAhPSAyKSB7XG4gICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhwb3MueCAtIHRoaXMubWFwW2ldW2pdLngsIDIpICsgTWF0aC5wb3cocG9zLnkgLSB0aGlzLm1hcFtpXVtqXS55LCAyKSlcbiAgICAgICAgICAgICAgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50Jykub25Ub3VjaGVkKGNvbG9yLCBmYWxzZSwgdHJ1ZSwgZGlzdGFuY2UpXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6a2U5rOV5qOS6Kem5Y+R55qE54K5XCIsIGksaix0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2VsZW1lbnQnKS5jb2xvciwgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdlbGVtZW50JykuaXNTaW5nbGUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSxcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0g6aKE5Yi25L2T5a6e5L6L5YyWLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIOeUn+aIkOWvueixoeaxoFxuICBnZW5lcmF0ZVByZWZhYlBvb2woKSB7XG4gICAgdGhpcy5ibG9ja1Bvb2wgPSBuZXcgY2MuTm9kZVBvb2woKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5wb3codGhpcy5yb3dDZmdOdW0sIDIpOyBpKyspIHtcbiAgICAgIGxldCBibG9jayA9IGNjLmluc3RhbnRpYXRlKHRoaXMuYmxvY2tQcmVmYWIpXG4gICAgICB0aGlzLmJsb2NrUG9vbC5wdXQoYmxvY2spXG4gICAgfVxuICB9LFxuICAvLyDlrp7kvovljJbljZXkuKrmlrnlnZdcbiAgaW5zdGFudGlhdGVCbG9jayhzZWxmLCBkYXRhLCBwYXJlbnQsIGl0ZW1UeXBlLCBwb3MpIHtcbiAgICBpdGVtVHlwZSA9IGl0ZW1UeXBlID8gaXRlbVR5cGUgOiAwXG4gICAgaWYgKGl0ZW1UeXBlICE9IDApIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwi6YGT5YW36IqC54K55pWw5o2uXCIsIGRhdGEsIGl0ZW1UeXBlKVxuICAgIH1cbiAgICBsZXQgYmxvY2sgPSBudWxsXG4gICAgaWYgKHNlbGYuYmxvY2tQb29sICYmIHNlbGYuYmxvY2tQb29sLnNpemUoKSA+IDApIHtcbiAgICAgIGJsb2NrID0gc2VsZi5ibG9ja1Bvb2wuZ2V0KClcbiAgICB9IGVsc2Uge1xuICAgICAgYmxvY2sgPSBjYy5pbnN0YW50aWF0ZShzZWxmLmJsb2NrUHJlZmFiKVxuICAgIH1cbiAgICBibG9jay5wYXJlbnQgPSBwYXJlbnRcbiAgICBibG9jay5zY2FsZSA9IDFcbiAgICBibG9jay54ID0gMFxuICAgIGJsb2NrLnkgPSAwXG4gICAgYmxvY2suZ2V0Q29tcG9uZW50KCdlbGVtZW50JykuaW5pdChzZWxmLCBkYXRhLCB0aGlzLmJsb2NrQ2xzV2lkdGgsIGl0ZW1UeXBlLCBwb3MpXG4gICAgcmV0dXJuIGJsb2NrXG4gIH0sXG4gIC8vIOWbnuaUtuaJgOacieiKgueCuVxuICByZWNvdmVyeUFsbEJsb2NrcygpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IGNoaWxkcmVuID0gdGhpcy5ibG9ja3NDb250YWluZXIuY2hpbGRyZW5cbiAgICAgIGlmIChjaGlsZHJlbi5sZW5ndGggIT0gMCkge1xuICAgICAgICBsZXQgbGVuZ3RoID0gY2hpbGRyZW4ubGVuZ3RoXG4gICAgICAgIC8vICAgY29uc29sZS5sb2cobGVuZ3RoKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5ibG9ja1Bvb2wucHV0KGNoaWxkcmVuWzBdKVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3dDZmdOdW07IGkrKykge1xuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5yb3dDZmdOdW07IGorKykge1xuICAgICAgICAgICAgdGhpcy5tYXBbaV1bal0gPSBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXNvbHZlKCcnKVxuICAgIH0pXG4gIH0sXG5cbn0pOyJdfQ==