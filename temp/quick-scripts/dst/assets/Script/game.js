
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/game.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '47c77yOeKpPiJVINXipHohs', 'game');
// Script/game.js

"use strict";

/**
 * @author heyuchang
 * @file 游戏控制
 */
var AC = require('action');

cc.Class({
  "extends": cc.Component,
  properties: {
    _status: 0,
    //0 未开始 1 游戏开始 2 游戏暂停 3 游戏结束 4 下落状态 5无法触摸状态
    blockPrefab: cc.Prefab,
    blockSprite: [cc.SpriteFrame],
    //todo: 换成动态生成 暂不处理
    warningSpriteFrame: [cc.SpriteFrame],
    propSpriteFrame: [cc.SpriteFrame],
    checkMgr: require("check"),
    revivePage: cc.Node
  },
  start: function start() {
    this.bindNode();
    this.generatePool();
    this.loadRes();
  },
  loadRes: function loadRes() {},
  init: function init(c) {
    this._controller = c;
    this._score = c.scoreMgr;
    this.rowNum = c.config.json.rowNum;
    this.gap = c.config.json.gap;
    this.animationSpeed = c.config.json.gap;
    this.blockWidth = (730 - (this.rowNum + 1) * this.gap) / this.rowNum;
    this.reviveTimer = null; //console.log(this.gap)
    //console.log(this.blockWidth)
  },
  // 动态获取需要动态控制的组件
  bindNode: function bindNode() {
    this.blocksContainer = this.node.getChildByName('map');
  },
  //---------------- 游戏控制 ---------------------
  // 游戏开始
  gameStart: function gameStart() {
    var _this = this;

    this.recoveryAllBlocks().then();

    this._score.init(this);

    this.mapSet(this.rowNum).then(function (result) {
      // console.log('游戏状态改变', result)
      _this._status = 1;
    });
  },
  // 初始化地图
  mapSet: function mapSet(num) {
    var _this2 = this;

    this.map = new Array();
    var self = this; // 生成两个随机的对象数组

    var a = Math.floor(Math.random() * num);
    var b = Math.floor(Math.random() * num);
    var c = Math.floor(1 + Math.random() * (num - 1)) - 1;
    a == c ? c++ : '';
    var d = Math.floor(Math.random() * num);
    return new Promise(function (resolve, reject) {
      for (var i = 0; i < num; i++) {
        //行
        _this2.map[i] = new Array();

        for (var j = 0; j < num; j++) {
          //列
          var itemType = i == a && j == b ? 1 : i == c && j == d ? 2 : 0;
          self.map[i][j] = self.instantiateBlock(self, {
            x: j,
            y: i,
            width: self.blockWidth,
            startTime: (i + j + 1) * self._controller.config.json.startAnimationTime / num * 2
          }, self.blocksContainer, itemType);
        }
      }

      _this2.checkMgr.init(_this2);

      setTimeout(function () {
        resolve('200 OK');

        _this2.checkMgr.check(_this2);
      }, self._controller.config.json.startAnimationTime * num / 2 / 1 //  (cc.game.getFrameRate() / 60)
      );
    });
  },
  //防抖动 判断是否需要检测下落
  checkNeedFall: function checkNeedFall() {
    var _this3 = this;

    if (this.checkNeedFallTimer) {
      clearTimeout(this.checkNeedFallTimer);
    }

    this.checkNeedFallTimer = setTimeout(function () {
      if (_this3._status == 5) {
        _this3._status = 4;

        _this3.onFall();
      }
    }, 300 / 1 // (cc.game.getFrameRate() / 60)
    );
  },
  //方块下落
  onFall: function onFall() {
    var _this4 = this;

    this.checkGenerateProp(this._score.chain).then(function () {
      var self = _this4;
      var canFall = 0; //从每一列的最下面一个开始往上判断
      //如果有空 就判断有几个空 然后让最上方的方块掉落下来

      for (var j = _this4.rowNum - 1; j >= 0; j--) {
        canFall = 0;

        for (var i = _this4.rowNum - 1; i >= 0; i--) {
          if (_this4.map[i][j].getComponent('cell')._status == 2) {
            _this4.blockPool.put(_this4.map[i][j]);

            _this4.map[i][j] = null;
            canFall++;
          } else {
            if (canFall != 0) {
              _this4.map[i + canFall][j] = _this4.map[i][j];
              _this4.map[i][j] = null;

              _this4.map[i + canFall][j].getComponent('cell').playFallAction(canFall, {
                x: j,
                y: i + canFall
              });
            }
          }
        }

        for (var k = 0; k < canFall; k++) {
          _this4.map[k][j] = _this4.instantiateBlock(_this4, {
            x: j,
            y: k,
            width: _this4.blockWidth,
            startTime: null
          }, _this4.blocksContainer, '', {
            x: j,
            y: -canFall + k
          });

          _this4.map[k][j].getComponent('cell').playFallAction(canFall, null);
        }
      }

      setTimeout(function () {
        _this4.checkMgr.init(_this4);

        _this4.checkMgr.check(_this4);

        _this4._status = 1;
      }, 250);
    });
  },
  gameOver: function gameOver() {
    this._status = 3;

    this._controller.pageMgr.addPage(2);

    this._controller.pageMgr.addPage(4);

    if (this._controller.social.node.active) {
      this._controller.social.closeBannerAdv();
    }
  },
  // todo 复活
  askRevive: function askRevive() {
    var _this5 = this;

    this._controller.pageMgr.addPage(2);

    this._controller.pageMgr.addPage(5);

    this.revivePage.active = true;
    this.revivePage.getChildByName('askRevive').active = true;
    this.revivePage.getChildByName('successRevive').active = false;
    this.rangeSprite = this.revivePage.getChildByName('askRevive').getChildByName('numBg').getChildByName('sprite').getComponent(cc.Sprite);
    this.rangeSprite.fillRange = 1;
    this.isRangeAction = true;
    var numLabel = this.revivePage.getChildByName('askRevive').getChildByName('numBg').getChildByName('num').getComponent(cc.Label);
    numLabel.string = 9;

    if (this.reviveTimer) {
      clearInterval(this.reviveTimer);
    }

    this.reviveTimer = setInterval(function () {
      if (+numLabel.string > 0) {
        numLabel.string--;
        _this5.rangeSprite.fillRange = 1;
      } else {
        _this5.onSkipRevive();
      }
    }, 1000);
  },
  onReviveButton: function onReviveButton() {
    clearInterval(this.reviveTimer);
    this.isRangeAction = false;

    if (this._controller.social.node.active) {
      this._controller.social.onReviveButton(1);
    } else {
      this.showReviveSuccess();
    }
  },
  showReviveSuccess: function showReviveSuccess() {
    //console.log('打开复活成功页面')
    this.revivePage.getChildByName('askRevive').active = false;
    this.revivePage.getChildByName('successRevive').active = true;
  },
  onReviveCertainBtn: function onReviveCertainBtn() {
    this._controller.pageMgr.removePage(2);

    this.revivePage.active = false;
    this._status = 1;

    this._score.onRevive();
  },
  update: function update() {
    if (this.isRangeAction) {
      this.rangeSprite.fillRange -= 1 / 60;
    }
  },
  onSkipRevive: function onSkipRevive() {
    clearInterval(this.reviveTimer);
    this._controller.pageMgr.pages[5].active = false;

    this._score.onGameOver(true);

    this.isRangeAction = false;
  },
  restart: function restart() {
    var _this6 = this;

    this._controller.pageMgr.onOpenPage(1);

    this.recoveryAllBlocks().then(function () {
      _this6.gameStart();
    });
  },
  // -----------------道具相关---------------
  // 储存用户点击时的方块 用于生成道具
  onUserTouched: function onUserTouched(iid, jid, itemType, color, warning, pos) {
    this.target = {
      i: iid,
      j: jid,
      color: color,
      itemType: itemType,
      x: pos.x,
      y: pos.y,
      warning: warning
    };
  },
  // 生成道具 type 1为双倍倍数 2为炸弹 3为加五百
  generatePropItem: function generatePropItem(type) {
    var _this7 = this;

    return new Promise(function (resolve, reject) {
      // 是否做道具生成动画
      _this7.map[_this7.target.i][_this7.target.j] = _this7.instantiateBlock(_this7, {
        x: _this7.target.j,
        y: _this7.target.i,
        color: _this7.target.color,
        width: _this7.blockWidth,
        startTime: null
      }, _this7.blocksContainer, type);
      setTimeout(function () {
        resolve();
      }, 300);
    });
  },
  checkGenerateProp: function checkGenerateProp(chain) {
    var _this8 = this;

    return new Promise(function (resolve, reject) {
      if (_this8.target.warning) {
        _this8.generatePropItem(_this8.target.warning).then(function () {
          resolve();
          return;
        });
      }

      resolve();
    });
  },
  onItem: function onItem(type, color, pos) {
    switch (type) {
      case 1:
        // 分数翻倍 最高八倍
        this._score.tipBox.init(this._score, 1);

        this._score.addMult(color, pos);

        this._controller.musicMgr.onDouble();

        for (var i = 0; i < this.rowNum; i++) {
          //行
          for (var j = 0; j < this.rowNum; j++) {
            //列
            if (this.map[i][j] && this.map[i][j].getComponent('cell')._status == 1) {
              var distance = Math.sqrt(Math.pow(pos.x - this.map[i][j].x, 2) + Math.pow(pos.y - this.map[i][j].y, 2));

              if (distance != 0) {
                this.map[i][j].getComponent('cell').surfaceAction(distance);
              }
            }
          }
        }

        break;

      case 2:
        // 炸弹 消除同种颜色的
        this._score.tipBox.init(this._score, 2);

        this.node.runAction(AC.shackAction(0.1, 10));

        if (this._controller.social.node.active) {
          this._controller.social.onShakePhone();
        }

        this.isPropChain = true;

        this._controller.musicMgr.onBoom();

        for (var _i = 0; _i < this.rowNum; _i++) {
          //行
          for (var _j = 0; _j < this.rowNum; _j++) {
            //列
            if (this.map[_i][_j] && this.map[_i][_j].getComponent('cell').color == color && this.map[_i][_j] && this.map[_i][_j].getComponent('cell')._status != 2) {
              this.map[_i][_j].getComponent('cell').onTouched(color, false, true);
            } else {
              this.map[_i][_j].runAction(AC.rockAction(0.2, 10));
            }
          }
        }

        break;

      case 3:
        //:  加步数
        this._score.tipBox.init(this._score, 4);

        this._controller.musicMgr.onDouble();

        for (var _i2 = 0; _i2 < this.rowNum; _i2++) {
          //行
          for (var _j2 = 0; _j2 < this.rowNum; _j2++) {
            //列
            if (this.map[_i2][_j2] && this.map[_i2][_j2].getComponent('cell')._status == 1) {
              var _distance = Math.sqrt(Math.pow(pos.x - this.map[_i2][_j2].x, 2) + Math.pow(pos.y - this.map[_i2][_j2].y, 2));

              if (_distance != 0) {
                this.map[_i2][_j2].getComponent('cell').surfaceAction(_distance);
              }
            }
          }
        }

        this._score.onStep(3).then();

        break;

      case 4:
        // : 消除全部单身的方块
        this._score.tipBox.init(this._score, 5);

        this.isPropChain = true;

        this._controller.musicMgr.onMagic();

        for (var _i3 = 0; _i3 < this.rowNum; _i3++) {
          //行
          for (var _j3 = 0; _j3 < this.rowNum; _j3++) {
            //列
            if (this.map[_i3][_j3] && this.map[_i3][_j3].getComponent('cell').isSingle && this.map[_i3][_j3] && this.map[_i3][_j3].getComponent('cell')._status != 2) {
              var _distance2 = Math.sqrt(Math.pow(pos.x - this.map[_i3][_j3].x, 2) + Math.pow(pos.y - this.map[_i3][_j3].y, 2));

              this.map[_i3][_j3].getComponent('cell').onTouched(color, false, true, _distance2);

              console.log("魔法棒触发的点", _i3, _j3, this.map[_i3][_j3].getComponent('cell').color, this.map[_i3][_j3].getComponent('cell').isSingle);
            }
          }
        }

        break;
    }
  },
  //--------------------- 预制体实例化---------------------
  // 生成对象池
  generatePool: function generatePool() {
    this.blockPool = new cc.NodePool();

    for (var i = 0; i < Math.pow(this.rowNum, 2); i++) {
      var block = cc.instantiate(this.blockPrefab);
      this.blockPool.put(block);
    }
  },
  // 实例化单个方块
  instantiateBlock: function instantiateBlock(self, data, parent, itemType, pos) {
    itemType = itemType ? itemType : 0;

    if (itemType != 0) {// console.log("道具节点数据", data, itemType)
    }

    var block = null;

    if (self.blockPool && self.blockPool.size() > 0) {
      block = self.blockPool.get();
    } else {
      block = cc.instantiate(self.blockPrefab);
    }

    block.parent = parent;
    block.scale = 1;
    block.x = 0;
    block.y = 0;
    block.getComponent('cell').init(self, data, this.blockWidth, itemType, pos);
    return block;
  },
  // 回收所有节点
  recoveryAllBlocks: function recoveryAllBlocks() {
    var _this9 = this;

    return new Promise(function (resolve, reject) {
      var children = _this9.blocksContainer.children;

      if (children.length != 0) {
        var length = children.length; //   console.log(length)

        for (var i = 0; i < length; i++) {
          _this9.blockPool.put(children[0]);
        }

        for (var _i4 = 0; _i4 < _this9.rowNum; _i4++) {
          for (var j = 0; j < _this9.rowNum; j++) {
            _this9.map[_i4][j] = null;
          }
        }
      }

      resolve('');
    });
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxnYW1lLmpzIl0sIm5hbWVzIjpbIkFDIiwicmVxdWlyZSIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiX3N0YXR1cyIsImJsb2NrUHJlZmFiIiwiUHJlZmFiIiwiYmxvY2tTcHJpdGUiLCJTcHJpdGVGcmFtZSIsIndhcm5pbmdTcHJpdGVGcmFtZSIsInByb3BTcHJpdGVGcmFtZSIsImNoZWNrTWdyIiwicmV2aXZlUGFnZSIsIk5vZGUiLCJzdGFydCIsImJpbmROb2RlIiwiZ2VuZXJhdGVQb29sIiwibG9hZFJlcyIsImluaXQiLCJjIiwiX2NvbnRyb2xsZXIiLCJfc2NvcmUiLCJzY29yZU1nciIsInJvd051bSIsImNvbmZpZyIsImpzb24iLCJnYXAiLCJhbmltYXRpb25TcGVlZCIsImJsb2NrV2lkdGgiLCJyZXZpdmVUaW1lciIsImJsb2Nrc0NvbnRhaW5lciIsIm5vZGUiLCJnZXRDaGlsZEJ5TmFtZSIsImdhbWVTdGFydCIsInJlY292ZXJ5QWxsQmxvY2tzIiwidGhlbiIsIm1hcFNldCIsInJlc3VsdCIsIm51bSIsIm1hcCIsIkFycmF5Iiwic2VsZiIsImEiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJiIiwiZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaSIsImoiLCJpdGVtVHlwZSIsImluc3RhbnRpYXRlQmxvY2siLCJ4IiwieSIsIndpZHRoIiwic3RhcnRUaW1lIiwic3RhcnRBbmltYXRpb25UaW1lIiwic2V0VGltZW91dCIsImNoZWNrIiwiY2hlY2tOZWVkRmFsbCIsImNoZWNrTmVlZEZhbGxUaW1lciIsImNsZWFyVGltZW91dCIsIm9uRmFsbCIsImNoZWNrR2VuZXJhdGVQcm9wIiwiY2hhaW4iLCJjYW5GYWxsIiwiZ2V0Q29tcG9uZW50IiwiYmxvY2tQb29sIiwicHV0IiwicGxheUZhbGxBY3Rpb24iLCJrIiwiZ2FtZU92ZXIiLCJwYWdlTWdyIiwiYWRkUGFnZSIsInNvY2lhbCIsImFjdGl2ZSIsImNsb3NlQmFubmVyQWR2IiwiYXNrUmV2aXZlIiwicmFuZ2VTcHJpdGUiLCJTcHJpdGUiLCJmaWxsUmFuZ2UiLCJpc1JhbmdlQWN0aW9uIiwibnVtTGFiZWwiLCJMYWJlbCIsInN0cmluZyIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIm9uU2tpcFJldml2ZSIsIm9uUmV2aXZlQnV0dG9uIiwic2hvd1Jldml2ZVN1Y2Nlc3MiLCJvblJldml2ZUNlcnRhaW5CdG4iLCJyZW1vdmVQYWdlIiwib25SZXZpdmUiLCJ1cGRhdGUiLCJwYWdlcyIsIm9uR2FtZU92ZXIiLCJyZXN0YXJ0Iiwib25PcGVuUGFnZSIsIm9uVXNlclRvdWNoZWQiLCJpaWQiLCJqaWQiLCJjb2xvciIsIndhcm5pbmciLCJwb3MiLCJ0YXJnZXQiLCJnZW5lcmF0ZVByb3BJdGVtIiwidHlwZSIsIm9uSXRlbSIsInRpcEJveCIsImFkZE11bHQiLCJtdXNpY01nciIsIm9uRG91YmxlIiwiZGlzdGFuY2UiLCJzcXJ0IiwicG93Iiwic3VyZmFjZUFjdGlvbiIsInJ1bkFjdGlvbiIsInNoYWNrQWN0aW9uIiwib25TaGFrZVBob25lIiwiaXNQcm9wQ2hhaW4iLCJvbkJvb20iLCJvblRvdWNoZWQiLCJyb2NrQWN0aW9uIiwib25TdGVwIiwib25NYWdpYyIsImlzU2luZ2xlIiwiY29uc29sZSIsImxvZyIsIk5vZGVQb29sIiwiYmxvY2siLCJpbnN0YW50aWF0ZSIsImRhdGEiLCJwYXJlbnQiLCJzaXplIiwiZ2V0Iiwic2NhbGUiLCJjaGlsZHJlbiIsImxlbmd0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUlBLElBQUlBLEVBQUUsR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBaEI7O0FBQ0FDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ1AsYUFBU0QsRUFBRSxDQUFDRSxTQURMO0FBRVBDLEVBQUFBLFVBQVUsRUFBRTtBQUNWQyxJQUFBQSxPQUFPLEVBQUUsQ0FEQztBQUNFO0FBQ1pDLElBQUFB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LFFBQTdELEVBQXVFcUQsR0FBdkU7QUFDQSxXQUFPMEIsS0FBUDtBQUNELEdBMVZNO0FBMlZQO0FBQ0FsRyxFQUFBQSxpQkE1Vk8sK0JBNFZhO0FBQUE7O0FBQ2xCLFdBQU8sSUFBSWMsT0FBSixDQUFZLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUN0QyxVQUFJeUYsUUFBUSxHQUFHLE1BQUksQ0FBQzdHLGVBQUwsQ0FBcUI2RyxRQUFwQzs7QUFDQSxVQUFJQSxRQUFRLENBQUNDLE1BQVQsSUFBbUIsQ0FBdkIsRUFBMEI7QUFDeEIsWUFBSUEsTUFBTSxHQUFHRCxRQUFRLENBQUNDLE1BQXRCLENBRHdCLENBRXhCOztBQUNBLGFBQUssSUFBSXpGLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUd5RixNQUFwQixFQUE0QnpGLENBQUMsRUFBN0IsRUFBaUM7QUFDL0IsVUFBQSxNQUFJLENBQUNtQixTQUFMLENBQWVDLEdBQWYsQ0FBbUJvRSxRQUFRLENBQUMsQ0FBRCxDQUEzQjtBQUNEOztBQUNELGFBQUssSUFBSXhGLEdBQUMsR0FBRyxDQUFiLEVBQWdCQSxHQUFDLEdBQUcsTUFBSSxDQUFDNUIsTUFBekIsRUFBaUM0QixHQUFDLEVBQWxDLEVBQXNDO0FBQ3BDLGVBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxNQUFJLENBQUM3QixNQUF6QixFQUFpQzZCLENBQUMsRUFBbEMsRUFBc0M7QUFDcEMsWUFBQSxNQUFJLENBQUNiLEdBQUwsQ0FBU1ksR0FBVCxFQUFZQyxDQUFaLElBQWlCLElBQWpCO0FBQ0Q7QUFDRjtBQUNGOztBQUNESCxNQUFBQSxPQUFPLENBQUMsRUFBRCxDQUFQO0FBQ0QsS0FmTSxDQUFQO0FBZ0JEO0FBN1dNLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBoZXl1Y2hhbmdcbiAqIEBmaWxlIOa4uOaIj+aOp+WItlxuICovXG52YXIgQUMgPSByZXF1aXJlKCdhY3Rpb24nKVxuY2MuQ2xhc3Moe1xuICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG4gIHByb3BlcnRpZXM6IHtcbiAgICBfc3RhdHVzOiAwLCAvLzAg5pyq5byA5aeLIDEg5ri45oiP5byA5aeLIDIg5ri45oiP5pqC5YGcIDMg5ri45oiP57uT5p2fIDQg5LiL6JC954q25oCBIDXml6Dms5Xop6bmkbjnirbmgIFcbiAgICBibG9ja1ByZWZhYjogY2MuUHJlZmFiLFxuICAgIGJsb2NrU3ByaXRlOiBbY2MuU3ByaXRlRnJhbWVdLCAvL3RvZG86IOaNouaIkOWKqOaAgeeUn+aIkCDmmoLkuI3lpITnkIZcbiAgICB3YXJuaW5nU3ByaXRlRnJhbWU6IFtjYy5TcHJpdGVGcmFtZV0sXG4gICAgcHJvcFNwcml0ZUZyYW1lOiBbY2MuU3ByaXRlRnJhbWVdLFxuICAgIGNoZWNrTWdyOiByZXF1aXJlKFwiY2hlY2tcIiksXG4gICAgcmV2aXZlUGFnZTogY2MuTm9kZSxcbiAgfSxcbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5iaW5kTm9kZSgpXG4gICAgdGhpcy5nZW5lcmF0ZVBvb2woKVxuICAgIHRoaXMubG9hZFJlcygpXG4gIH0sXG4gIGxvYWRSZXMoKSB7XG5cbiAgfSxcbiAgaW5pdChjKSB7XG4gICAgdGhpcy5fY29udHJvbGxlciA9IGNcbiAgICB0aGlzLl9zY29yZSA9IGMuc2NvcmVNZ3JcbiAgICB0aGlzLnJvd051bSA9IGMuY29uZmlnLmpzb24ucm93TnVtXG4gICAgdGhpcy5nYXAgPSBjLmNvbmZpZy5qc29uLmdhcFxuICAgIHRoaXMuYW5pbWF0aW9uU3BlZWQgPSBjLmNvbmZpZy5qc29uLmdhcFxuICAgIHRoaXMuYmxvY2tXaWR0aCA9ICg3MzAgLSAodGhpcy5yb3dOdW0gKyAxKSAqIHRoaXMuZ2FwKSAvIHRoaXMucm93TnVtXG4gICAgdGhpcy5yZXZpdmVUaW1lciA9IG51bGxcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMuZ2FwKVxuICAgIC8vY29uc29sZS5sb2codGhpcy5ibG9ja1dpZHRoKVxuICB9LFxuICAvLyDliqjmgIHojrflj5bpnIDopoHliqjmgIHmjqfliLbnmoTnu4Tku7ZcbiAgYmluZE5vZGUoKSB7XG4gICAgdGhpcy5ibG9ja3NDb250YWluZXIgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ21hcCcpXG4gIH0sXG4gIC8vLS0tLS0tLS0tLS0tLS0tLSDmuLjmiI/mjqfliLYgLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIOa4uOaIj+W8gOWni1xuICBnYW1lU3RhcnQoKSB7XG4gICAgdGhpcy5yZWNvdmVyeUFsbEJsb2NrcygpLnRoZW4oKVxuICAgIHRoaXMuX3Njb3JlLmluaXQodGhpcylcbiAgICB0aGlzLm1hcFNldCh0aGlzLnJvd051bSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAvLyBjb25zb2xlLmxvZygn5ri45oiP54q25oCB5pS55Y+YJywgcmVzdWx0KVxuICAgICAgdGhpcy5fc3RhdHVzID0gMVxuICAgIH0pXG5cbiAgfSxcbiAgLy8g5Yid5aeL5YyW5Zyw5Zu+XG4gIG1hcFNldChudW0pIHtcbiAgICB0aGlzLm1hcCA9IG5ldyBBcnJheSgpXG4gICAgbGV0IHNlbGYgPSB0aGlzXG4gICAgLy8g55Sf5oiQ5Lik5Liq6ZqP5py655qE5a+56LGh5pWw57uEXG4gICAgbGV0IGEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBudW0pXG4gICAgbGV0IGIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBudW0pXG5cbiAgICBsZXQgYyA9IE1hdGguZmxvb3IoMSArIE1hdGgucmFuZG9tKCkgKiAobnVtIC0gMSkpIC0gMVxuICAgIGEgPT0gYyA/IGMrKyA6ICcnXG4gICAgbGV0IGQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBudW0pXG5cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bTsgaSsrKSB7IC8v6KGMXG4gICAgICAgIHRoaXMubWFwW2ldID0gbmV3IEFycmF5KClcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW07IGorKykgeyAvL+WIl1xuICAgICAgICAgIGxldCBpdGVtVHlwZSA9IChpID09IGEgJiYgaiA9PSBiKSA/IDEgOiAoaSA9PSBjICYmIGogPT0gZCkgPyAyIDogMFxuICAgICAgICAgIHNlbGYubWFwW2ldW2pdID0gc2VsZi5pbnN0YW50aWF0ZUJsb2NrKHNlbGYsIHtcbiAgICAgICAgICAgIHg6IGosXG4gICAgICAgICAgICB5OiBpLFxuICAgICAgICAgICAgd2lkdGg6IHNlbGYuYmxvY2tXaWR0aCxcbiAgICAgICAgICAgIHN0YXJ0VGltZTogKGkgKyBqICsgMSkgKiBzZWxmLl9jb250cm9sbGVyLmNvbmZpZy5qc29uLnN0YXJ0QW5pbWF0aW9uVGltZSAvIG51bSAqIDJcbiAgICAgICAgICB9LCBzZWxmLmJsb2Nrc0NvbnRhaW5lciwgaXRlbVR5cGUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuY2hlY2tNZ3IuaW5pdCh0aGlzKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgnMjAwIE9LJyk7XG4gICAgICAgICAgdGhpcy5jaGVja01nci5jaGVjayh0aGlzKVxuICAgICAgICB9LCBzZWxmLl9jb250cm9sbGVyLmNvbmZpZy5qc29uLnN0YXJ0QW5pbWF0aW9uVGltZSAqIG51bSAvIDIgLyAxXG4gICAgICAgIC8vICAoY2MuZ2FtZS5nZXRGcmFtZVJhdGUoKSAvIDYwKVxuICAgICAgKVxuICAgIH0pXG4gIH0sXG4gIC8v6Ziy5oqW5YqoIOWIpOaWreaYr+WQpumcgOimgeajgOa1i+S4i+iQvVxuICBjaGVja05lZWRGYWxsKCkge1xuICAgIGlmICh0aGlzLmNoZWNrTmVlZEZhbGxUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2hlY2tOZWVkRmFsbFRpbWVyKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrTmVlZEZhbGxUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fc3RhdHVzID09IDUpIHtcbiAgICAgICAgICB0aGlzLl9zdGF0dXMgPSA0XG4gICAgICAgICAgdGhpcy5vbkZhbGwoKVxuICAgICAgICB9XG4gICAgICB9LCAzMDAgLyAxXG4gICAgICAvLyAoY2MuZ2FtZS5nZXRGcmFtZVJhdGUoKSAvIDYwKVxuICAgIClcbiAgfSxcbiAgLy/mlrnlnZfkuIvokL1cbiAgb25GYWxsKCkge1xuICAgIHRoaXMuY2hlY2tHZW5lcmF0ZVByb3AodGhpcy5fc2NvcmUuY2hhaW4pLnRoZW4oKCkgPT4ge1xuICAgICAgbGV0IHNlbGYgPSB0aGlzXG4gICAgICBsZXQgY2FuRmFsbCA9IDBcbiAgICAgIC8v5LuO5q+P5LiA5YiX55qE5pyA5LiL6Z2i5LiA5Liq5byA5aeL5b6A5LiK5Yik5patXG4gICAgICAvL+WmguaenOacieepuiDlsLHliKTmlq3mnInlh6DkuKrnqbog54S25ZCO6K6p5pyA5LiK5pa555qE5pa55Z2X5o6J6JC95LiL5p2lXG4gICAgICBmb3IgKGxldCBqID0gdGhpcy5yb3dOdW0gLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICBjYW5GYWxsID0gMFxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5yb3dOdW0gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmICh0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2NlbGwnKS5fc3RhdHVzID09IDIpIHtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tQb29sLnB1dCh0aGlzLm1hcFtpXVtqXSlcbiAgICAgICAgICAgIHRoaXMubWFwW2ldW2pdID0gbnVsbFxuICAgICAgICAgICAgY2FuRmFsbCsrXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjYW5GYWxsICE9IDApIHtcbiAgICAgICAgICAgICAgdGhpcy5tYXBbaSArIGNhbkZhbGxdW2pdID0gdGhpcy5tYXBbaV1bal1cbiAgICAgICAgICAgICAgdGhpcy5tYXBbaV1bal0gPSBudWxsXG4gICAgICAgICAgICAgIHRoaXMubWFwW2kgKyBjYW5GYWxsXVtqXS5nZXRDb21wb25lbnQoJ2NlbGwnKS5wbGF5RmFsbEFjdGlvbihjYW5GYWxsLCB7XG4gICAgICAgICAgICAgICAgeDogaixcbiAgICAgICAgICAgICAgICB5OiBpICsgY2FuRmFsbCxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjYW5GYWxsOyBrKyspIHtcbiAgICAgICAgICB0aGlzLm1hcFtrXVtqXSA9IHRoaXMuaW5zdGFudGlhdGVCbG9jayh0aGlzLCB7XG4gICAgICAgICAgICB4OiBqLFxuICAgICAgICAgICAgeTogayxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLmJsb2NrV2lkdGgsXG4gICAgICAgICAgICBzdGFydFRpbWU6IG51bGxcbiAgICAgICAgICB9LCB0aGlzLmJsb2Nrc0NvbnRhaW5lciwgJycsIHtcbiAgICAgICAgICAgIHg6IGosXG4gICAgICAgICAgICB5OiAtY2FuRmFsbCArIGtcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMubWFwW2tdW2pdLmdldENvbXBvbmVudCgnY2VsbCcpLnBsYXlGYWxsQWN0aW9uKGNhbkZhbGwsIG51bGwpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmNoZWNrTWdyLmluaXQodGhpcylcbiAgICAgICAgdGhpcy5jaGVja01nci5jaGVjayh0aGlzKVxuICAgICAgICB0aGlzLl9zdGF0dXMgPSAxXG4gICAgICB9LCAyNTApXG4gICAgfSlcbiAgfSxcbiAgZ2FtZU92ZXIoKSB7XG4gICAgdGhpcy5fc3RhdHVzID0gM1xuICAgIHRoaXMuX2NvbnRyb2xsZXIucGFnZU1nci5hZGRQYWdlKDIpXG4gICAgdGhpcy5fY29udHJvbGxlci5wYWdlTWdyLmFkZFBhZ2UoNClcbiAgICBpZiAodGhpcy5fY29udHJvbGxlci5zb2NpYWwubm9kZS5hY3RpdmUpIHtcbiAgICAgIHRoaXMuX2NvbnRyb2xsZXIuc29jaWFsLmNsb3NlQmFubmVyQWR2KClcbiAgICB9XG4gIH0sXG4gIC8vIHRvZG8g5aSN5rS7XG4gIGFza1Jldml2ZSgpIHtcbiAgICB0aGlzLl9jb250cm9sbGVyLnBhZ2VNZ3IuYWRkUGFnZSgyKVxuICAgIHRoaXMuX2NvbnRyb2xsZXIucGFnZU1nci5hZGRQYWdlKDUpXG4gICAgdGhpcy5yZXZpdmVQYWdlLmFjdGl2ZSA9IHRydWVcbiAgICB0aGlzLnJldml2ZVBhZ2UuZ2V0Q2hpbGRCeU5hbWUoJ2Fza1Jldml2ZScpLmFjdGl2ZSA9IHRydWVcbiAgICB0aGlzLnJldml2ZVBhZ2UuZ2V0Q2hpbGRCeU5hbWUoJ3N1Y2Nlc3NSZXZpdmUnKS5hY3RpdmUgPSBmYWxzZVxuICAgIHRoaXMucmFuZ2VTcHJpdGUgPSB0aGlzLnJldml2ZVBhZ2UuZ2V0Q2hpbGRCeU5hbWUoJ2Fza1Jldml2ZScpLmdldENoaWxkQnlOYW1lKCdudW1CZycpLmdldENoaWxkQnlOYW1lKCdzcHJpdGUnKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKVxuICAgIHRoaXMucmFuZ2VTcHJpdGUuZmlsbFJhbmdlID0gMVxuICAgIHRoaXMuaXNSYW5nZUFjdGlvbiA9IHRydWVcbiAgICBsZXQgbnVtTGFiZWwgPSB0aGlzLnJldml2ZVBhZ2UuZ2V0Q2hpbGRCeU5hbWUoJ2Fza1Jldml2ZScpLmdldENoaWxkQnlOYW1lKCdudW1CZycpLmdldENoaWxkQnlOYW1lKCdudW0nKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpXG4gICAgbnVtTGFiZWwuc3RyaW5nID0gOVxuICAgIGlmICh0aGlzLnJldml2ZVRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMucmV2aXZlVGltZXIpXG4gICAgfVxuICAgIHRoaXMucmV2aXZlVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAoK251bUxhYmVsLnN0cmluZyA+IDApIHtcbiAgICAgICAgbnVtTGFiZWwuc3RyaW5nLS1cbiAgICAgICAgdGhpcy5yYW5nZVNwcml0ZS5maWxsUmFuZ2UgPSAxXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uU2tpcFJldml2ZSgpXG4gICAgICB9XG4gICAgfSwgMTAwMClcblxuICB9LFxuICBvblJldml2ZUJ1dHRvbigpIHtcbiAgICBjbGVhckludGVydmFsKHRoaXMucmV2aXZlVGltZXIpXG4gICAgdGhpcy5pc1JhbmdlQWN0aW9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5fY29udHJvbGxlci5zb2NpYWwubm9kZS5hY3RpdmUpIHtcbiAgICAgIHRoaXMuX2NvbnRyb2xsZXIuc29jaWFsLm9uUmV2aXZlQnV0dG9uKDEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2hvd1Jldml2ZVN1Y2Nlc3MoKVxuICAgIH1cbiAgfSxcbiAgc2hvd1Jldml2ZVN1Y2Nlc3MoKSB7XG4gICAgLy9jb25zb2xlLmxvZygn5omT5byA5aSN5rS75oiQ5Yqf6aG16Z2iJylcbiAgICB0aGlzLnJldml2ZVBhZ2UuZ2V0Q2hpbGRCeU5hbWUoJ2Fza1Jldml2ZScpLmFjdGl2ZSA9IGZhbHNlXG4gICAgdGhpcy5yZXZpdmVQYWdlLmdldENoaWxkQnlOYW1lKCdzdWNjZXNzUmV2aXZlJykuYWN0aXZlID0gdHJ1ZVxuICB9LFxuICBvblJldml2ZUNlcnRhaW5CdG4oKSB7XG4gICAgdGhpcy5fY29udHJvbGxlci5wYWdlTWdyLnJlbW92ZVBhZ2UoMilcbiAgICB0aGlzLnJldml2ZVBhZ2UuYWN0aXZlID0gZmFsc2VcbiAgICB0aGlzLl9zdGF0dXMgPSAxXG4gICAgdGhpcy5fc2NvcmUub25SZXZpdmUoKVxuICB9LFxuICB1cGRhdGUoKSB7XG4gICAgaWYgKHRoaXMuaXNSYW5nZUFjdGlvbikge1xuICAgICAgdGhpcy5yYW5nZVNwcml0ZS5maWxsUmFuZ2UgLT0gMSAvIDYwXG4gICAgfVxuICB9LFxuICBvblNraXBSZXZpdmUoKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJldml2ZVRpbWVyKVxuICAgIHRoaXMuX2NvbnRyb2xsZXIucGFnZU1nci5wYWdlc1s1XS5hY3RpdmUgPSBmYWxzZVxuICAgIHRoaXMuX3Njb3JlLm9uR2FtZU92ZXIodHJ1ZSlcbiAgICB0aGlzLmlzUmFuZ2VBY3Rpb24gPSBmYWxzZVxuICB9LFxuICByZXN0YXJ0KCkge1xuICAgIHRoaXMuX2NvbnRyb2xsZXIucGFnZU1nci5vbk9wZW5QYWdlKDEpXG4gICAgdGhpcy5yZWNvdmVyeUFsbEJsb2NrcygpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5nYW1lU3RhcnQoKVxuICAgIH0pXG4gIH0sXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0t6YGT5YW355u45YWzLS0tLS0tLS0tLS0tLS0tXG4gIC8vIOWCqOWtmOeUqOaIt+eCueWHu+aXtueahOaWueWdlyDnlKjkuo7nlJ/miJDpgZPlhbdcbiAgb25Vc2VyVG91Y2hlZChpaWQsIGppZCwgaXRlbVR5cGUsIGNvbG9yLCB3YXJuaW5nLCBwb3MpIHtcbiAgICB0aGlzLnRhcmdldCA9IHtcbiAgICAgIGk6IGlpZCxcbiAgICAgIGo6IGppZCxcbiAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgIGl0ZW1UeXBlOiBpdGVtVHlwZSxcbiAgICAgIHg6IHBvcy54LFxuICAgICAgeTogcG9zLnksXG4gICAgICB3YXJuaW5nOiB3YXJuaW5nXG4gICAgfVxuICB9LFxuICAvLyDnlJ/miJDpgZPlhbcgdHlwZSAx5Li65Y+M5YCN5YCN5pWwIDLkuLrngrjlvLkgM+S4uuWKoOS6lOeZvlxuICBnZW5lcmF0ZVByb3BJdGVtKHR5cGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8g5piv5ZCm5YGa6YGT5YW355Sf5oiQ5Yqo55S7XG4gICAgICB0aGlzLm1hcFt0aGlzLnRhcmdldC5pXVt0aGlzLnRhcmdldC5qXSA9IHRoaXMuaW5zdGFudGlhdGVCbG9jayh0aGlzLCB7XG4gICAgICAgIHg6IHRoaXMudGFyZ2V0LmosXG4gICAgICAgIHk6IHRoaXMudGFyZ2V0LmksXG4gICAgICAgIGNvbG9yOiB0aGlzLnRhcmdldC5jb2xvcixcbiAgICAgICAgd2lkdGg6IHRoaXMuYmxvY2tXaWR0aCxcbiAgICAgICAgc3RhcnRUaW1lOiBudWxsXG4gICAgICB9LCB0aGlzLmJsb2Nrc0NvbnRhaW5lciwgdHlwZSlcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXNvbHZlKClcbiAgICAgIH0sIDMwMClcbiAgICB9KVxuICB9LFxuICBjaGVja0dlbmVyYXRlUHJvcChjaGFpbikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAodGhpcy50YXJnZXQud2FybmluZykge1xuICAgICAgICB0aGlzLmdlbmVyYXRlUHJvcEl0ZW0odGhpcy50YXJnZXQud2FybmluZykudGhlbigoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICByZXNvbHZlKClcbiAgICB9KVxuICB9LFxuICBvbkl0ZW0odHlwZSwgY29sb3IsIHBvcykge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICAvLyDliIbmlbDnv7vlgI0g5pyA6auY5YWr5YCNXG4gICAgICAgIHRoaXMuX3Njb3JlLnRpcEJveC5pbml0KHRoaXMuX3Njb3JlLCAxKVxuICAgICAgICB0aGlzLl9zY29yZS5hZGRNdWx0KGNvbG9yLCBwb3MpXG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIubXVzaWNNZ3Iub25Eb3VibGUoKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm93TnVtOyBpKyspIHsgLy/ooYxcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMucm93TnVtOyBqKyspIHsgLy/liJdcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcFtpXVtqXSAmJiB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2NlbGwnKS5fc3RhdHVzID09IDEpIHtcbiAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvcy54IC0gdGhpcy5tYXBbaV1bal0ueCwgMikgKyBNYXRoLnBvdyhwb3MueSAtIHRoaXMubWFwW2ldW2pdLnksIDIpKVxuICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgIT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnY2VsbCcpLnN1cmZhY2VBY3Rpb24oZGlzdGFuY2UpXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAyOlxuICAgICAgICAvLyDngrjlvLkg5raI6Zmk5ZCM56eN6aKc6Imy55qEXG4gICAgICAgIHRoaXMuX3Njb3JlLnRpcEJveC5pbml0KHRoaXMuX3Njb3JlLCAyKVxuICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKEFDLnNoYWNrQWN0aW9uKDAuMSwgMTApKVxuICAgICAgICBpZiAodGhpcy5fY29udHJvbGxlci5zb2NpYWwubm9kZS5hY3RpdmUpIHtcbiAgICAgICAgICB0aGlzLl9jb250cm9sbGVyLnNvY2lhbC5vblNoYWtlUGhvbmUoKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNQcm9wQ2hhaW4gPSB0cnVlXG4gICAgICAgIHRoaXMuX2NvbnRyb2xsZXIubXVzaWNNZ3Iub25Cb29tKClcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvd051bTsgaSsrKSB7IC8v6KGMXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd051bTsgaisrKSB7IC8v5YiXXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBbaV1bal0gJiYgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdjZWxsJykuY29sb3IgPT0gY29sb3IgJiYgdGhpcy5tYXBbaV1bal0gJiYgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdjZWxsJykuX3N0YXR1cyAhPSAyKSB7XG4gICAgICAgICAgICAgIHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnY2VsbCcpLm9uVG91Y2hlZChjb2xvciwgZmFsc2UsIHRydWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5tYXBbaV1bal0ucnVuQWN0aW9uKEFDLnJvY2tBY3Rpb24oMC4yLCAxMCkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIDM6IC8vOiAg5Yqg5q2l5pWwXG4gICAgICAgIHRoaXMuX3Njb3JlLnRpcEJveC5pbml0KHRoaXMuX3Njb3JlLCA0KVxuICAgICAgICB0aGlzLl9jb250cm9sbGVyLm11c2ljTWdyLm9uRG91YmxlKClcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvd051bTsgaSsrKSB7IC8v6KGMXG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd051bTsgaisrKSB7IC8v5YiXXG4gICAgICAgICAgICBpZiAodGhpcy5tYXBbaV1bal0gJiYgdGhpcy5tYXBbaV1bal0uZ2V0Q29tcG9uZW50KCdjZWxsJykuX3N0YXR1cyA9PSAxKSB7XG4gICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydChNYXRoLnBvdyhwb3MueCAtIHRoaXMubWFwW2ldW2pdLngsIDIpICsgTWF0aC5wb3cocG9zLnkgLSB0aGlzLm1hcFtpXVtqXS55LCAyKSlcbiAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlICE9IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2NlbGwnKS5zdXJmYWNlQWN0aW9uKGRpc3RhbmNlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3Njb3JlLm9uU3RlcCgzKS50aGVuKClcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6IC8vIDog5raI6Zmk5YWo6YOo5Y2V6Lqr55qE5pa55Z2XXG4gICAgICAgIHRoaXMuX3Njb3JlLnRpcEJveC5pbml0KHRoaXMuX3Njb3JlLCA1KVxuICAgICAgICB0aGlzLmlzUHJvcENoYWluID0gdHJ1ZVxuICAgICAgICB0aGlzLl9jb250cm9sbGVyLm11c2ljTWdyLm9uTWFnaWMoKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm93TnVtOyBpKyspIHsgLy/ooYxcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMucm93TnVtOyBqKyspIHsgLy/liJdcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcFtpXVtqXSAmJiB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2NlbGwnKS5pc1NpbmdsZSAmJiB0aGlzLm1hcFtpXVtqXSAmJiB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2NlbGwnKS5fc3RhdHVzICE9IDIpIHtcbiAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvcy54IC0gdGhpcy5tYXBbaV1bal0ueCwgMikgKyBNYXRoLnBvdyhwb3MueSAtIHRoaXMubWFwW2ldW2pdLnksIDIpKVxuICAgICAgICAgICAgICB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2NlbGwnKS5vblRvdWNoZWQoY29sb3IsIGZhbHNlLCB0cnVlLCBkaXN0YW5jZSlcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLprZTms5Xmo5Lop6blj5HnmoTngrlcIiwgaSxqLHRoaXMubWFwW2ldW2pdLmdldENvbXBvbmVudCgnY2VsbCcpLmNvbG9yLCB0aGlzLm1hcFtpXVtqXS5nZXRDb21wb25lbnQoJ2NlbGwnKS5pc1NpbmdsZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9LFxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLSDpooTliLbkvZPlrp7kvovljJYtLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8g55Sf5oiQ5a+56LGh5rGgXG4gIGdlbmVyYXRlUG9vbCgpIHtcbiAgICB0aGlzLmJsb2NrUG9vbCA9IG5ldyBjYy5Ob2RlUG9vbCgpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLnBvdyh0aGlzLnJvd051bSwgMik7IGkrKykge1xuICAgICAgbGV0IGJsb2NrID0gY2MuaW5zdGFudGlhdGUodGhpcy5ibG9ja1ByZWZhYilcbiAgICAgIHRoaXMuYmxvY2tQb29sLnB1dChibG9jaylcbiAgICB9XG4gIH0sXG4gIC8vIOWunuS+i+WMluWNleS4quaWueWdl1xuICBpbnN0YW50aWF0ZUJsb2NrKHNlbGYsIGRhdGEsIHBhcmVudCwgaXRlbVR5cGUsIHBvcykge1xuICAgIGl0ZW1UeXBlID0gaXRlbVR5cGUgPyBpdGVtVHlwZSA6IDBcbiAgICBpZiAoaXRlbVR5cGUgIT0gMCkge1xuICAgICAgLy8gY29uc29sZS5sb2coXCLpgZPlhbfoioLngrnmlbDmja5cIiwgZGF0YSwgaXRlbVR5cGUpXG4gICAgfVxuICAgIGxldCBibG9jayA9IG51bGxcbiAgICBpZiAoc2VsZi5ibG9ja1Bvb2wgJiYgc2VsZi5ibG9ja1Bvb2wuc2l6ZSgpID4gMCkge1xuICAgICAgYmxvY2sgPSBzZWxmLmJsb2NrUG9vbC5nZXQoKVxuICAgIH0gZWxzZSB7XG4gICAgICBibG9jayA9IGNjLmluc3RhbnRpYXRlKHNlbGYuYmxvY2tQcmVmYWIpXG4gICAgfVxuICAgIGJsb2NrLnBhcmVudCA9IHBhcmVudFxuICAgIGJsb2NrLnNjYWxlID0gMVxuICAgIGJsb2NrLnggPSAwXG4gICAgYmxvY2sueSA9IDBcbiAgICBibG9jay5nZXRDb21wb25lbnQoJ2NlbGwnKS5pbml0KHNlbGYsIGRhdGEsIHRoaXMuYmxvY2tXaWR0aCwgaXRlbVR5cGUsIHBvcylcbiAgICByZXR1cm4gYmxvY2tcbiAgfSxcbiAgLy8g5Zue5pS25omA5pyJ6IqC54K5XG4gIHJlY292ZXJ5QWxsQmxvY2tzKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLmJsb2Nrc0NvbnRhaW5lci5jaGlsZHJlblxuICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgIGxldCBsZW5ndGggPSBjaGlsZHJlbi5sZW5ndGhcbiAgICAgICAgLy8gICBjb25zb2xlLmxvZyhsZW5ndGgpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB0aGlzLmJsb2NrUG9vbC5wdXQoY2hpbGRyZW5bMF0pXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvd051bTsgaSsrKSB7XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnJvd051bTsgaisrKSB7XG4gICAgICAgICAgICB0aGlzLm1hcFtpXVtqXSA9IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc29sdmUoJycpXG4gICAgfSlcbiAgfSxcblxufSk7Il19