
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/element.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'dbc3cQxtHpPj77TncyB18gQ', 'element');
// Script/element.js

"use strict";

/**
 * @author heyuchang
 * @file 单个方块控制
 */
cc.Class({
  "extends": cc.Component,
  properties: {
    _status: 0,
    //1为可触发点击 2为已经消失
    _itemType: 0,
    //新增道具功能 1为双倍倍数 2为炸弹
    warningSprite: cc.Sprite,
    lightSprite: cc.Sprite
  },
  init: function init(g, data, width, itemType, pos) {
    this._game = g;
    this._status = 1;

    if (pos) {//cc.log('生成的方块', pos)
    }

    pos = pos || {
      x: data.x,
      y: data.y
    };
    this._itemType = itemType || 0;
    this.warningType = 0;
    this.isPush = false;
    this.bindEvent();
    this.color = data.color || Math.ceil(Math.random() * 4);
    this.colorSprite = this.node.getChildByName('color').getComponent(cc.Sprite);
    this.colorSprite.spriteFrame = itemType ? g.propSpriteFrame[(itemType - 1) * 4 + this.color - 1] : this._game.blockSprite[this.color - 1];
    this.warningSprite.spriteFrame = '';
    this._width = width;
    this._controller = g._controller; // 计算宽

    this.lightSprite.node.active = false; //  this.lightSprite.spriteFrame = this._game.blockSprite[this.color - 1]

    this.node.width = this.node.height = width;
    this.startTime = data.startTime;
    this.iid = data.y;
    this.jid = data.x; // console.log('生成方块位置', data.y, data.x)

    this.node.x = -(730 / 2 - g.gap - width / 2) + pos.x * (width + g.gap);
    this.node.y = 730 / 2 - g.gap - width / 2 - pos.y * (width + g.gap);
    this.node.angle = 0;
    this.playStartAction();
  },
  onWarning: function onWarning(type) {
    this.warningSprite.spriteFrame = this._game.warningSpriteFrame[type - 1] || '';
    this.warningType = type; //   this.lightSprite.node.active = true

    var action1 = cc.blink(1, 10); //   this.lightSprite.node.runAction(action1)
  },
  warningInit: function warningInit() {
    this.warningSprite.spriteFrame = ''; //  this.lightSprite.node.active = false

    this.isPush = false;
  },
  growInit: function growInit() {
    this.growType = 0;
    this.colorSprite.node.height = this.colorSprite.node.width = this._width;
    this.colorSprite.node.y = this.colorSprite.node.x = 0;
  },
  grow: function grow(type) {
    //1234 上下左右
    switch (type) {
      case 1:
        if (this.growType != 2) {
          this.colorSprite.node.height += this._game.gap * 2;
          this.colorSprite.node.y += this._game.gap;
          this.growType = 1;
        }

        break;

      case 2:
        if (this.growType != 2) {
          this.colorSprite.node.height += this._game.gap * 2;
          this.colorSprite.node.y -= this._game.gap;
          this.growType = 1;
        }

        break;

      case 3:
        if (this.growType != 1) {
          this.colorSprite.node.width += this._game.gap * 2;
          this.colorSprite.node.x -= this._game.gap;
          this.growType = 2;
        }

        break;

      case 4:
        if (this.growType != 1) {
          this.colorSprite.node.width += this._game.gap * 2;
          this.colorSprite.node.x += this._game.gap;
          this.growType = 2;
        }

        break;
    }
  },
  bindEvent: function bindEvent() {
    this.node.on(cc.Node.EventType.TOUCH_START, this.onTouched, this);
  },
  // 用户点击 或者被其他方块触发
  onTouched: function onTouched(color, isChain, isBomb, time) {
    var _this = this;

    //道具新增参数 isChain是否连锁 isBomb是否强制消除
    if (time) {
      setTimeout(function () {
        _this.onTouched(color, false, isBomb);
      }, time);
      return;
    }

    isChain = JSON.stringify(isChain) == 'null' ? true : isChain;
    isBomb = isBomb ? isBomb : false;
    var self = this; // 爆炸触发

    if (this._status == 1 && isBomb == true) {
      this._status = 2;
      this.playDieAction().then(function () {
        _this.onBlockPop(color, isChain, isBomb);
      });
      return;
    }

    if (color.type) {
      // 一定是用户主动触发 保存这个坐标给game
      if (this.isSingle && this._itemType <= 1) {
        this.node.scale = 1;

        this._game._score.tipBox.init(this._game._score, 3);

        var action1 = cc.scaleTo(0.1, 1.1, 0.9);
        var action2 = cc.scaleTo(0.3, 1).easing(cc.easeBackOut(2.0));
        var action = cc.sequence(action1, action2);
        this.node.runAction(action);
        return;
      } // console.log('方块位置', this.iid, this.jid, this._itemType)


      color = this.color;

      if (this._status == 1 && this._game._status == 1 && this.color == color) {
        this._game.onUserTouched(this.iid, this.jid, this._itemType, this.color, this.warningType, {
          x: this.node.x,
          y: this.node.y
        });

        this._game._score.onStep(-1).then(function (res) {
          if (res) {
            _this.playDieAction().then(function () {
              _this.onBlockPop(color, null, null);
            });
          }
        });
      }
    } else {
      // 由其他方块触发
      if (this._status == 1 && this._game._status == 5 && this.color == color) {
        this.playDieAction().then(function () {
          _this.onBlockPop(color, null, null);
        });
      }
    }
  },
  onBlockPop: function onBlockPop(color, isChain, isBomb) {
    var self = this;
    isChain = JSON.stringify(isChain) == 'null' ? true : isChain;
    isBomb = isBomb ? isBomb : false;

    self._game.checkNeedFall();

    self._game._status = 5;

    self._controller.musicManager.onPlayAudio(0 //self._game._score.chain - 1
    );

    if (this._itemType != 0) {
      // console.log("触发了道具", this._itemType)
      self._game.onItem(this._itemType, color, {
        x: this.node.x,
        y: this.node.y
      });
    }

    self._game._score.addScore(cc.v2(this.node.x, this.node.y - this.node.width + this._game.gap), this._itemType == 3 ? this._game._controller.config.json.propConfig[2].score : null); // 连锁状态


    if (isChain) {
      if (self.iid - 1 >= 0) {
        self._game.map[self.iid - 1][self.jid].getComponent('element').onTouched(color);
      }

      if (self.iid + 1 < this._game.rowNum) {
        self._game.map[self.iid + 1][self.jid].getComponent('element').onTouched(color);
      }

      if (self.jid - 1 >= 0) {
        self._game.map[self.iid][self.jid - 1].getComponent('element').onTouched(color);
      }

      if (self.jid + 1 < this._game.rowNum) {
        self._game.map[self.iid][self.jid + 1].getComponent('element').onTouched(color);
      }
    }
  },
  playFallAction: function playFallAction(y, data) {
    var _this2 = this;

    //下降了几个格子
    this._status = 0;

    if (data) {
      this.iid = data.y;
      this.jid = data.x;
    }

    var action = cc.moveBy(0.25, 0, -y * (this._game.gap + this._game.blockWidth)).easing(cc.easeBounceOut(5 / y)); //1 * y / this._game.animationSpeed

    var seq = cc.sequence(action, cc.callFunc(function () {
      _this2._status = 1; //  this._game.checkNeedGenerator()
    }, this));
    this.node.runAction(seq);
  },
  playStartAction: function playStartAction() {
    var _this3 = this;

    this.node.scaleX = 0;
    this.node.scaleY = 0;
    var action = cc.scaleTo(0.8 / this._game.animationSpeed, 1, 1).easing(cc.easeBackOut());
    var seq = cc.sequence(action, cc.callFunc(function () {
      _this3._status = 1;
    }, this)); // 如果有延迟时间就用延迟时间

    if (this.startTime) {
      setTimeout(function () {
        _this3.node.runAction(seq);
      }, this.startTime / 1 // (cc.game.getFrameRate() / 60)
      );
    } else {
      this.node.runAction(seq);
    }
  },
  playDieAction: function playDieAction() {
    var _this4 = this;

    var self = this;
    clearTimeout(this.surfaceTimer);
    this.node.stopAllActions();
    this._status = 2;
    this.node.scaleX = 1;
    this.node.scaleY = 1;
    return new Promise(function (resolve, reject) {
      var action;

      if (_this4.warningSprite.spriteFrame) {
        //有道具预警
        var action1 = cc.scaleTo(0.2 / self._game.animationSpeed, 1.1);
        var action2 = cc.moveTo(0.2 / self._game.animationSpeed, _this4._game.target.x, _this4._game.target.y);
        var action3 = cc.scaleTo(0.2, 0);
        var seq = cc.sequence(action1, cc.callFunc(function () {
          resolve('');
        }, _this4), cc.spawn(action2, action3));
      } else {
        action = cc.scaleTo(0.2 / self._game.animationSpeed, 0, 0);
        var seq = cc.sequence(action, cc.callFunc(function () {
          resolve('');
        }, _this4));
      }

      self.node.runAction(seq);
    });
  },
  surfaceAction: function surfaceAction(dela) {
    var _this5 = this;

    this.surfaceTimer = setTimeout(function () {
      var action = cc.scaleTo(0.4 / _this5._game.animationSpeed, 0.8, 0.8);
      var action1 = cc.scaleTo(0.4 / _this5._game.animationSpeed, 1, 1);

      _this5.node.runAction(cc.sequence(action, action1));
    }, dela);
  },
  generatePropAction: function generatePropAction() {},
  generateItem: function generateItem(type) {
    this._itemType = type;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxlbGVtZW50LmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiX3N0YXR1cyIsIl9pdGVtVHlwZSIsIndhcm5pbmdTcHJpdGUiLCJTcHJpdGUiLCJsaWdodFNwcml0ZSIsImluaXQiLCJnIiwiZGF0YSIsIndpZHRoIiwiaXRlbVR5cGUiLCJwb3MiLCJfZ2FtZSIsIngiLCJ5Iiwid2FybmluZ1R5cGUiLCJpc1B1c2giLCJiaW5kRXZlbnQiLCJjb2xvciIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwiY29sb3JTcHJpdGUiLCJub2RlIiwiZ2V0Q2hpbGRCeU5hbWUiLCJnZXRDb21wb25lbnQiLCJzcHJpdGVGcmFtZSIsInByb3BTcHJpdGVGcmFtZSIsImJsb2NrU3ByaXRlIiwiX3dpZHRoIiwiX2NvbnRyb2xsZXIiLCJhY3RpdmUiLCJoZWlnaHQiLCJzdGFydFRpbWUiLCJpaWQiLCJqaWQiLCJnYXAiLCJhbmdsZSIsInBsYXlTdGFydEFjdGlvbiIsIm9uV2FybmluZyIsInR5cGUiLCJ3YXJuaW5nU3ByaXRlRnJhbWUiLCJhY3Rpb24xIiwiYmxpbmsiLCJ3YXJuaW5nSW5pdCIsImdyb3dJbml0IiwiZ3Jvd1R5cGUiLCJncm93Iiwib24iLCJOb2RlIiwiRXZlbnRUeXBlIiwiVE9VQ0hfU1RBUlQiLCJvblRvdWNoZWQiLCJpc0NoYWluIiwiaXNCb21iIiwidGltZSIsInNldFRpbWVvdXQiLCJKU09OIiwic3RyaW5naWZ5Iiwic2VsZiIsInBsYXlEaWVBY3Rpb24iLCJ0aGVuIiwib25CbG9ja1BvcCIsImlzU2luZ2xlIiwic2NhbGUiLCJfc2NvcmUiLCJ0aXBCb3giLCJzY2FsZVRvIiwiYWN0aW9uMiIsImVhc2luZyIsImVhc2VCYWNrT3V0IiwiYWN0aW9uIiwic2VxdWVuY2UiLCJydW5BY3Rpb24iLCJvblVzZXJUb3VjaGVkIiwib25TdGVwIiwicmVzIiwiY2hlY2tOZWVkRmFsbCIsIm11c2ljTWFuYWdlciIsIm9uUGxheUF1ZGlvIiwib25JdGVtIiwiYWRkU2NvcmUiLCJ2MiIsImNvbmZpZyIsImpzb24iLCJwcm9wQ29uZmlnIiwic2NvcmUiLCJtYXAiLCJyb3dOdW0iLCJwbGF5RmFsbEFjdGlvbiIsIm1vdmVCeSIsImJsb2NrV2lkdGgiLCJlYXNlQm91bmNlT3V0Iiwic2VxIiwiY2FsbEZ1bmMiLCJzY2FsZVgiLCJzY2FsZVkiLCJhbmltYXRpb25TcGVlZCIsImNsZWFyVGltZW91dCIsInN1cmZhY2VUaW1lciIsInN0b3BBbGxBY3Rpb25zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJtb3ZlVG8iLCJ0YXJnZXQiLCJhY3Rpb24zIiwic3Bhd24iLCJzdXJmYWNlQWN0aW9uIiwiZGVsYSIsImdlbmVyYXRlUHJvcEFjdGlvbiIsImdlbmVyYXRlSXRlbSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUlBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNQLGFBQVNELEVBQUUsQ0FBQ0UsU0FETDtBQUVQQyxFQUFBQSxVQUFVLEVBQUU7QUFDVkMsSUFBQUEsT0FBTyxFQUFFLENBREM7QUFDRTtBQUNaQyxJQUFBQSxTQUFTLEVBQUUsQ0FGRDtBQUVJO0FBQ2RDLElBQUFBLGFBQWEsRUFBRU4sRUFBRSxDQUFDTyxNQUhSO0FBSVZDLElBQUFBLFdBQVcsRUFBRVIsRUFBRSxDQUFDTztBQUpOLEdBRkw7QUFRUEUsRUFBQUEsSUFSTyxnQkFRRkMsQ0FSRSxFQVFDQyxJQVJELEVBUU9DLEtBUlAsRUFRY0MsUUFSZCxFQVF3QkMsR0FSeEIsRUFRNkI7QUFDbEMsU0FBS0MsS0FBTCxHQUFhTCxDQUFiO0FBQ0EsU0FBS04sT0FBTCxHQUFlLENBQWY7O0FBQ0EsUUFBSVUsR0FBSixFQUFTLENBQ1A7QUFDRDs7QUFDREEsSUFBQUEsR0FBRyxHQUFHQSxHQUFHLElBQUk7QUFDWEUsTUFBQUEsQ0FBQyxFQUFFTCxJQUFJLENBQUNLLENBREc7QUFFWEMsTUFBQUEsQ0FBQyxFQUFF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QWdQUGUsRUFBQUEsYUFoUE8seUJBZ1BPQyxJQWhQUCxFQWdQYTtBQUFBOztBQUNsQixTQUFLVixZQUFMLEdBQW9CM0MsVUFBVSxDQUFDLFlBQU07QUFDbkMsVUFBSWUsTUFBTSxHQUFHMUUsRUFBRSxDQUFDc0UsT0FBSCxDQUFXLE1BQU0sTUFBSSxDQUFDdkQsS0FBTCxDQUFXcUYsY0FBNUIsRUFBNEMsR0FBNUMsRUFBaUQsR0FBakQsQ0FBYjtBQUNBLFVBQUl2RCxPQUFPLEdBQUc3QyxFQUFFLENBQUNzRSxPQUFILENBQVcsTUFBTSxNQUFJLENBQUN2RCxLQUFMLENBQVdxRixjQUE1QixFQUE0QyxDQUE1QyxFQUErQyxDQUEvQyxDQUFkOztBQUNBLE1BQUEsTUFBSSxDQUFDMUUsSUFBTCxDQUFVa0QsU0FBVixDQUFvQjVFLEVBQUUsQ0FBQzJFLFFBQUgsQ0FBWUQsTUFBWixFQUFvQjdCLE9BQXBCLENBQXBCO0FBQ0QsS0FKNkIsRUFJM0JtRSxJQUoyQixDQUE5QjtBQUtELEdBdFBNO0FBdVBQQyxFQUFBQSxrQkF2UE8sZ0NBdVBjLENBRXBCLENBelBNO0FBMFBQQyxFQUFBQSxZQTFQTyx3QkEwUE12RSxJQTFQTixFQTBQWTtBQUNqQixTQUFLdEMsU0FBTCxHQUFpQnNDLElBQWpCO0FBQ0Q7QUE1UE0sQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIGhleXVjaGFuZ1xuICogQGZpbGUg5Y2V5Liq5pa55Z2X5o6n5Yi2XG4gKi9cbmNjLkNsYXNzKHtcbiAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuICBwcm9wZXJ0aWVzOiB7XG4gICAgX3N0YXR1czogMCwgLy8x5Li65Y+v6Kem5Y+R54K55Ye7IDLkuLrlt7Lnu4/mtojlpLFcbiAgICBfaXRlbVR5cGU6IDAsIC8v5paw5aKe6YGT5YW35Yqf6IO9IDHkuLrlj4zlgI3lgI3mlbAgMuS4uueCuOW8uVxuICAgIHdhcm5pbmdTcHJpdGU6IGNjLlNwcml0ZSxcbiAgICBsaWdodFNwcml0ZTogY2MuU3ByaXRlLFxuICB9LFxuICBpbml0KGcsIGRhdGEsIHdpZHRoLCBpdGVtVHlwZSwgcG9zKSB7XG4gICAgdGhpcy5fZ2FtZSA9IGdcbiAgICB0aGlzLl9zdGF0dXMgPSAxXG4gICAgaWYgKHBvcykge1xuICAgICAgLy9jYy5sb2coJ+eUn+aIkOeahOaWueWdlycsIHBvcylcbiAgICB9XG4gICAgcG9zID0gcG9zIHx8IHtcbiAgICAgIHg6IGRhdGEueCxcbiAgICAgIHk6IGRhdGEueVxuICAgIH1cbiAgICB0aGlzLl9pdGVtVHlwZSA9IGl0ZW1UeXBlIHx8IDBcbiAgICB0aGlzLndhcm5pbmdUeXBlID0gMFxuICAgIHRoaXMuaXNQdXNoID0gZmFsc2VcbiAgICB0aGlzLmJpbmRFdmVudCgpXG4gICAgdGhpcy5jb2xvciA9IGRhdGEuY29sb3IgfHwgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiA0KVxuICAgIHRoaXMuY29sb3JTcHJpdGUgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRCeU5hbWUoJ2NvbG9yJykuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSlcbiAgICB0aGlzLmNvbG9yU3ByaXRlLnNwcml0ZUZyYW1lID0gaXRlbVR5cGUgPyBnLnByb3BTcHJpdGVGcmFtZVsoaXRlbVR5cGUgLSAxKSAqIDQgKyB0aGlzLmNvbG9yIC0gMV0gOiB0aGlzLl9nYW1lLmJsb2NrU3ByaXRlW3RoaXMuY29sb3IgLSAxXVxuICAgIHRoaXMud2FybmluZ1Nwcml0ZS5zcHJpdGVGcmFtZSA9ICcnXG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aFxuICAgIHRoaXMuX2NvbnRyb2xsZXIgPSBnLl9jb250cm9sbGVyXG4gICAgLy8g6K6h566X5a69XG4gICAgdGhpcy5saWdodFNwcml0ZS5ub2RlLmFjdGl2ZSA9IGZhbHNlXG4gICAgLy8gIHRoaXMubGlnaHRTcHJpdGUuc3ByaXRlRnJhbWUgPSB0aGlzLl9nYW1lLmJsb2NrU3ByaXRlW3RoaXMuY29sb3IgLSAxXVxuICAgIHRoaXMubm9kZS53aWR0aCA9IHRoaXMubm9kZS5oZWlnaHQgPSB3aWR0aFxuICAgIHRoaXMuc3RhcnRUaW1lID0gZGF0YS5zdGFydFRpbWVcbiAgICB0aGlzLmlpZCA9IGRhdGEueVxuICAgIHRoaXMuamlkID0gZGF0YS54XG4gICAgLy8gY29uc29sZS5sb2coJ+eUn+aIkOaWueWdl+S9jee9ricsIGRhdGEueSwgZGF0YS54KVxuICAgIHRoaXMubm9kZS54ID0gLSg3MzAgLyAyIC0gZy5nYXAgLSB3aWR0aCAvIDIpICsgcG9zLnggKiAod2lkdGggKyBnLmdhcClcbiAgICB0aGlzLm5vZGUueSA9ICg3MzAgLyAyIC0gZy5nYXAgLSB3aWR0aCAvIDIpIC0gcG9zLnkgKiAod2lkdGggKyBnLmdhcClcbiAgICB0aGlzLm5vZGUuYW5nbGUgPSAwXG4gICAgdGhpcy5wbGF5U3RhcnRBY3Rpb24oKVxuICB9LFxuICBvbldhcm5pbmcodHlwZSkge1xuICAgIHRoaXMud2FybmluZ1Nwcml0ZS5zcHJpdGVGcmFtZSA9IHRoaXMuX2dhbWUud2FybmluZ1Nwcml0ZUZyYW1lW3R5cGUgLSAxXSB8fCAnJ1xuICAgIHRoaXMud2FybmluZ1R5cGUgPSB0eXBlXG4gICAgLy8gICB0aGlzLmxpZ2h0U3ByaXRlLm5vZGUuYWN0aXZlID0gdHJ1ZVxuICAgIGxldCBhY3Rpb24xID0gY2MuYmxpbmsoMSwgMTApXG4gICAgLy8gICB0aGlzLmxpZ2h0U3ByaXRlLm5vZGUucnVuQWN0aW9uKGFjdGlvbjEpXG4gIH0sXG4gIHdhcm5pbmdJbml0KCkge1xuICAgIHRoaXMud2FybmluZ1Nwcml0ZS5zcHJpdGVGcmFtZSA9ICcnXG4gICAgLy8gIHRoaXMubGlnaHRTcHJpdGUubm9kZS5hY3RpdmUgPSBmYWxzZVxuICAgIHRoaXMuaXNQdXNoID0gZmFsc2VcbiAgfSxcbiAgZ3Jvd0luaXQoKSB7XG4gICAgdGhpcy5ncm93VHlwZSA9IDBcbiAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUuaGVpZ2h0ID0gdGhpcy5jb2xvclNwcml0ZS5ub2RlLndpZHRoID0gdGhpcy5fd2lkdGhcbiAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUueSA9IHRoaXMuY29sb3JTcHJpdGUubm9kZS54ID0gMFxuICB9LFxuICBncm93KHR5cGUpIHsgLy8xMjM0IOS4iuS4i+W3puWPs1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICBpZiAodGhpcy5ncm93VHlwZSAhPSAyKSB7XG4gICAgICAgICAgdGhpcy5jb2xvclNwcml0ZS5ub2RlLmhlaWdodCArPSB0aGlzLl9nYW1lLmdhcCAqIDJcbiAgICAgICAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUueSArPSB0aGlzLl9nYW1lLmdhcFxuICAgICAgICAgIHRoaXMuZ3Jvd1R5cGUgPSAxXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaWYgKHRoaXMuZ3Jvd1R5cGUgIT0gMikge1xuICAgICAgICAgIHRoaXMuY29sb3JTcHJpdGUubm9kZS5oZWlnaHQgKz0gdGhpcy5fZ2FtZS5nYXAgKiAyXG4gICAgICAgICAgdGhpcy5jb2xvclNwcml0ZS5ub2RlLnkgLT0gdGhpcy5fZ2FtZS5nYXBcbiAgICAgICAgICB0aGlzLmdyb3dUeXBlID0gMVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIDM6XG4gICAgICAgIGlmICh0aGlzLmdyb3dUeXBlICE9IDEpIHtcbiAgICAgICAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUud2lkdGggKz0gdGhpcy5fZ2FtZS5nYXAgKiAyXG4gICAgICAgICAgdGhpcy5jb2xvclNwcml0ZS5ub2RlLnggLT0gdGhpcy5fZ2FtZS5nYXBcbiAgICAgICAgICB0aGlzLmdyb3dUeXBlID0gMlxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIDQ6XG4gICAgICAgIGlmICh0aGlzLmdyb3dUeXBlICE9IDEpIHtcbiAgICAgICAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUud2lkdGggKz0gdGhpcy5fZ2FtZS5nYXAgKiAyXG4gICAgICAgICAgdGhpcy5jb2xvclNwcml0ZS5ub2RlLnggKz0gdGhpcy5fZ2FtZS5nYXBcbiAgICAgICAgICB0aGlzLmdyb3dUeXBlID0gMlxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9LFxuICBiaW5kRXZlbnQoKSB7XG4gICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLm9uVG91Y2hlZCwgdGhpcylcblxuICB9LFxuICAvLyDnlKjmiLfngrnlh7sg5oiW6ICF6KKr5YW25LuW5pa55Z2X6Kem5Y+RXG4gIG9uVG91Y2hlZChjb2xvciwgaXNDaGFpbiwgaXNCb21iLCB0aW1lKSB7IC8v6YGT5YW35paw5aKe5Y+C5pWwIGlzQ2hhaW7mmK/lkKbov57plIEgaXNCb21i5piv5ZCm5by65Yi25raI6ZmkXG4gICAgaWYgKHRpbWUpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZChjb2xvciwgZmFsc2UsIGlzQm9tYilcbiAgICAgIH0sIHRpbWUpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaXNDaGFpbiA9IEpTT04uc3RyaW5naWZ5KGlzQ2hhaW4pID09ICdudWxsJyA/IHRydWUgOiBpc0NoYWluXG4gICAgaXNCb21iID0gaXNCb21iID8gaXNCb21iIDogZmFsc2VcbiAgICBsZXQgc2VsZiA9IHRoaXNcbiAgICAvLyDniIbngrjop6blj5FcbiAgICBpZiAodGhpcy5fc3RhdHVzID09IDEgJiYgaXNCb21iID09IHRydWUpIHtcbiAgICAgIHRoaXMuX3N0YXR1cyA9IDJcbiAgICAgIHRoaXMucGxheURpZUFjdGlvbigpLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLm9uQmxvY2tQb3AoY29sb3IsIGlzQ2hhaW4sIGlzQm9tYilcbiAgICAgIH0pXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoY29sb3IudHlwZSkge1xuICAgICAgLy8g5LiA5a6a5piv55So5oi35Li75Yqo6Kem5Y+RIOS/neWtmOi/meS4quWdkOagh+e7mWdhbWVcbiAgICAgIGlmICh0aGlzLmlzU2luZ2xlICYmIHRoaXMuX2l0ZW1UeXBlIDw9IDEpIHtcbiAgICAgICAgdGhpcy5ub2RlLnNjYWxlID0gMVxuICAgICAgICB0aGlzLl9nYW1lLl9zY29yZS50aXBCb3guaW5pdCh0aGlzLl9nYW1lLl9zY29yZSwgMylcbiAgICAgICAgbGV0IGFjdGlvbjEgPSBjYy5zY2FsZVRvKDAuMSwgMS4xLCAwLjkpXG4gICAgICAgIGxldCBhY3Rpb24yID0gY2Muc2NhbGVUbygwLjMsIDEpLmVhc2luZyhjYy5lYXNlQmFja091dCgyLjApKVxuICAgICAgICBsZXQgYWN0aW9uID0gY2Muc2VxdWVuY2UoYWN0aW9uMSwgYWN0aW9uMilcbiAgICAgICAgdGhpcy5ub2RlLnJ1bkFjdGlvbihhY3Rpb24pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coJ+aWueWdl+S9jee9ricsIHRoaXMuaWlkLCB0aGlzLmppZCwgdGhpcy5faXRlbVR5cGUpXG4gICAgICBjb2xvciA9IHRoaXMuY29sb3JcbiAgICAgIGlmICh0aGlzLl9zdGF0dXMgPT0gMSAmJiB0aGlzLl9nYW1lLl9zdGF0dXMgPT0gMSAmJiB0aGlzLmNvbG9yID09IGNvbG9yKSB7XG4gICAgICAgIHRoaXMuX2dhbWUub25Vc2VyVG91Y2hlZCh0aGlzLmlpZCwgdGhpcy5qaWQsIHRoaXMuX2l0ZW1UeXBlLCB0aGlzLmNvbG9yLCB0aGlzLndhcm5pbmdUeXBlLCB7XG4gICAgICAgICAgeDogdGhpcy5ub2RlLngsXG4gICAgICAgICAgeTogdGhpcy5ub2RlLnlcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5fZ2FtZS5fc2NvcmUub25TdGVwKC0xKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICB0aGlzLnBsYXlEaWVBY3Rpb24oKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5vbkJsb2NrUG9wKGNvbG9yLCBudWxsLCBudWxsKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOeUseWFtuS7luaWueWdl+inpuWPkVxuICAgICAgaWYgKHRoaXMuX3N0YXR1cyA9PSAxICYmIHRoaXMuX2dhbWUuX3N0YXR1cyA9PSA1ICYmIHRoaXMuY29sb3IgPT0gY29sb3IpIHtcbiAgICAgICAgdGhpcy5wbGF5RGllQWN0aW9uKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5vbkJsb2NrUG9wKGNvbG9yLCBudWxsLCBudWxsKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgb25CbG9ja1BvcChjb2xvciwgaXNDaGFpbiwgaXNCb21iKSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzXG4gICAgaXNDaGFpbiA9IEpTT04uc3RyaW5naWZ5KGlzQ2hhaW4pID09ICdudWxsJyA/IHRydWUgOiBpc0NoYWluXG4gICAgaXNCb21iID0gaXNCb21iID8gaXNCb21iIDogZmFsc2VcbiAgICBzZWxmLl9nYW1lLmNoZWNrTmVlZEZhbGwoKVxuICAgIHNlbGYuX2dhbWUuX3N0YXR1cyA9IDVcbiAgICBzZWxmLl9jb250cm9sbGVyLm11c2ljTWFuYWdlci5vblBsYXlBdWRpbygwXG4gICAgICAvL3NlbGYuX2dhbWUuX3Njb3JlLmNoYWluIC0gMVxuICAgIClcbiAgICBpZiAodGhpcy5faXRlbVR5cGUgIT0gMCkge1xuICAgICAgLy8gY29uc29sZS5sb2coXCLop6blj5HkuobpgZPlhbdcIiwgdGhpcy5faXRlbVR5cGUpXG5cbiAgICAgIHNlbGYuX2dhbWUub25JdGVtKHRoaXMuX2l0ZW1UeXBlLCBjb2xvciwge1xuICAgICAgICB4OiB0aGlzLm5vZGUueCxcbiAgICAgICAgeTogdGhpcy5ub2RlLnlcbiAgICAgIH0pXG4gICAgfVxuICAgIHNlbGYuX2dhbWUuX3Njb3JlLmFkZFNjb3JlKGNjLnYyKHRoaXMubm9kZS54LCB0aGlzLm5vZGUueSAtIHRoaXMubm9kZS53aWR0aCArIHRoaXMuX2dhbWUuZ2FwKSwgdGhpcy5faXRlbVR5cGUgPT0gMyA/IHRoaXMuX2dhbWUuX2NvbnRyb2xsZXIuY29uZmlnLmpzb24ucHJvcENvbmZpZ1syXS5zY29yZSA6IG51bGwpXG5cbiAgICAvLyDov57plIHnirbmgIFcbiAgICBpZiAoaXNDaGFpbikge1xuICAgICAgaWYgKChzZWxmLmlpZCAtIDEpID49IDApIHtcbiAgICAgICAgc2VsZi5fZ2FtZS5tYXBbc2VsZi5paWQgLSAxXVtzZWxmLmppZF0uZ2V0Q29tcG9uZW50KCdlbGVtZW50Jykub25Ub3VjaGVkKGNvbG9yKVxuICAgICAgfVxuICAgICAgaWYgKChzZWxmLmlpZCArIDEpIDwgdGhpcy5fZ2FtZS5yb3dOdW0pIHtcbiAgICAgICAgc2VsZi5fZ2FtZS5tYXBbc2VsZi5paWQgKyAxXVtzZWxmLmppZF0uZ2V0Q29tcG9uZW50KCdlbGVtZW50Jykub25Ub3VjaGVkKGNvbG9yKVxuICAgICAgfVxuICAgICAgaWYgKChzZWxmLmppZCAtIDEpID49IDApIHtcbiAgICAgICAgc2VsZi5fZ2FtZS5tYXBbc2VsZi5paWRdW3NlbGYuamlkIC0gMV0uZ2V0Q29tcG9uZW50KCdlbGVtZW50Jykub25Ub3VjaGVkKGNvbG9yKVxuICAgICAgfVxuICAgICAgaWYgKChzZWxmLmppZCArIDEpIDwgdGhpcy5fZ2FtZS5yb3dOdW0pIHtcbiAgICAgICAgc2VsZi5fZ2FtZS5tYXBbc2VsZi5paWRdW3NlbGYuamlkICsgMV0uZ2V0Q29tcG9uZW50KCdlbGVtZW50Jykub25Ub3VjaGVkKGNvbG9yKVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgcGxheUZhbGxBY3Rpb24oeSwgZGF0YSkgeyAvL+S4i+mZjeS6huWHoOS4quagvOWtkFxuICAgIHRoaXMuX3N0YXR1cyA9IDBcbiAgICBpZiAoZGF0YSkge1xuICAgICAgdGhpcy5paWQgPSBkYXRhLnlcbiAgICAgIHRoaXMuamlkID0gZGF0YS54XG4gICAgfVxuICAgIGxldCBhY3Rpb24gPSBjYy5tb3ZlQnkoMC4yNSwgMCwgLXkgKiAodGhpcy5fZ2FtZS5nYXAgKyB0aGlzLl9nYW1lLmJsb2NrV2lkdGgpKS5lYXNpbmcoY2MuZWFzZUJvdW5jZU91dCg1IC8geSkpIC8vMSAqIHkgLyB0aGlzLl9nYW1lLmFuaW1hdGlvblNwZWVkXG4gICAgbGV0IHNlcSA9IGNjLnNlcXVlbmNlKGFjdGlvbiwgY2MuY2FsbEZ1bmMoKCkgPT4ge1xuICAgICAgdGhpcy5fc3RhdHVzID0gMVxuICAgICAgLy8gIHRoaXMuX2dhbWUuY2hlY2tOZWVkR2VuZXJhdG9yKClcbiAgICB9LCB0aGlzKSlcbiAgICB0aGlzLm5vZGUucnVuQWN0aW9uKHNlcSlcbiAgfSxcbiAgcGxheVN0YXJ0QWN0aW9uKCkge1xuICAgIHRoaXMubm9kZS5zY2FsZVggPSAwXG4gICAgdGhpcy5ub2RlLnNjYWxlWSA9IDBcbiAgICBsZXQgYWN0aW9uID0gY2Muc2NhbGVUbygwLjggLyB0aGlzLl9nYW1lLmFuaW1hdGlvblNwZWVkLCAxLCAxKS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoKSlcbiAgICBsZXQgc2VxID0gY2Muc2VxdWVuY2UoYWN0aW9uLCBjYy5jYWxsRnVuYygoKSA9PiB7XG4gICAgICB0aGlzLl9zdGF0dXMgPSAxXG4gICAgfSwgdGhpcykpXG4gICAgLy8g5aaC5p6c5pyJ5bu26L+f5pe26Ze05bCx55So5bu26L+f5pe26Ze0XG4gICAgaWYgKHRoaXMuc3RhcnRUaW1lKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKHNlcSlcbiAgICAgICAgfSwgdGhpcy5zdGFydFRpbWUgLyAxXG4gICAgICAgIC8vIChjYy5nYW1lLmdldEZyYW1lUmF0ZSgpIC8gNjApXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oc2VxKVxuICAgIH1cbiAgfSxcbiAgcGxheURpZUFjdGlvbigpIHtcbiAgICBsZXQgc2VsZiA9IHRoaXNcbiAgICBjbGVhclRpbWVvdXQodGhpcy5zdXJmYWNlVGltZXIpXG4gICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKClcbiAgICB0aGlzLl9zdGF0dXMgPSAyXG4gICAgdGhpcy5ub2RlLnNjYWxlWCA9IDFcbiAgICB0aGlzLm5vZGUuc2NhbGVZID0gMVxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgYWN0aW9uXG4gICAgICBpZiAodGhpcy53YXJuaW5nU3ByaXRlLnNwcml0ZUZyYW1lKSB7IC8v5pyJ6YGT5YW36aKE6K2mXG4gICAgICAgIGxldCBhY3Rpb24xID0gY2Muc2NhbGVUbygwLjIgLyBzZWxmLl9nYW1lLmFuaW1hdGlvblNwZWVkLCAxLjEpXG4gICAgICAgIGxldCBhY3Rpb24yID0gY2MubW92ZVRvKDAuMiAvIHNlbGYuX2dhbWUuYW5pbWF0aW9uU3BlZWQsIHRoaXMuX2dhbWUudGFyZ2V0LngsIHRoaXMuX2dhbWUudGFyZ2V0LnkpXG4gICAgICAgIGxldCBhY3Rpb24zID0gY2Muc2NhbGVUbygwLjIsIDApXG4gICAgICAgIHZhciBzZXEgPSBjYy5zZXF1ZW5jZShhY3Rpb24xLCBjYy5jYWxsRnVuYygoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgnJylcbiAgICAgICAgfSwgdGhpcyksIGNjLnNwYXduKGFjdGlvbjIsIGFjdGlvbjMpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aW9uID0gY2Muc2NhbGVUbygwLjIgLyBzZWxmLl9nYW1lLmFuaW1hdGlvblNwZWVkLCAwLCAwKVxuICAgICAgICB2YXIgc2VxID0gY2Muc2VxdWVuY2UoYWN0aW9uLCBjYy5jYWxsRnVuYygoKSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZSgnJylcbiAgICAgICAgfSwgdGhpcykpXG4gICAgICB9XG4gICAgICBzZWxmLm5vZGUucnVuQWN0aW9uKHNlcSlcbiAgICB9KTtcbiAgfSxcbiAgc3VyZmFjZUFjdGlvbihkZWxhKSB7XG4gICAgdGhpcy5zdXJmYWNlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGxldCBhY3Rpb24gPSBjYy5zY2FsZVRvKDAuNCAvIHRoaXMuX2dhbWUuYW5pbWF0aW9uU3BlZWQsIDAuOCwgMC44KVxuICAgICAgbGV0IGFjdGlvbjEgPSBjYy5zY2FsZVRvKDAuNCAvIHRoaXMuX2dhbWUuYW5pbWF0aW9uU3BlZWQsIDEsIDEpXG4gICAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGFjdGlvbiwgYWN0aW9uMSkpXG4gICAgfSwgZGVsYSlcbiAgfSxcbiAgZ2VuZXJhdGVQcm9wQWN0aW9uKCkge1xuXG4gIH0sXG4gIGdlbmVyYXRlSXRlbSh0eXBlKSB7XG4gICAgdGhpcy5faXRlbVR5cGUgPSB0eXBlXG4gIH0sXG59KTsiXX0=