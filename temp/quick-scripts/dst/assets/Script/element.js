
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/element.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'dbc3cQxtHpPj77TncyB18gQ', 'element');
// Script/element.js

"use strict";

/**
 * @author heyuchang
 * @file 单个方块控制
 */
cc.Class({
  "extends": cc.Component,
  properties: {
    statusType: 0,
    //1为可触发点击 2为已经消失
    _itemType: 0,
    //新增道具功能 1为双倍倍数 2为炸弹
    warningSprite: cc.Sprite,
    lightSprite: cc.Sprite
  },
  init: function init(g, data, width, itemType, pos) {
    this._game = g;
    this.statusType = 1;

    if (pos) {//cc.log('生成的方块', pos)
    }

    pos = pos || {
      x: data.x,
      y: data.y
    };
    this._itemType = itemType || 0;
    this.warningType = 0;
    this.isPush = false;
    this.bindEvent();
    this.color = data.color || Math.ceil(Math.random() * 4);
    this.colorSprite = this.node.getChildByName('color').getComponent(cc.Sprite);
    this.colorSprite.spriteFrame = itemType ? g.propSpriteFrame[(itemType - 1) * 4 + this.color - 1] : this._game.blockSprite[this.color - 1];
    this.warningSprite.spriteFrame = '';
    this._width = width;
    this._gameController = g._gameController; // 计算宽

    this.lightSprite.node.active = false; //  this.lightSprite.spriteFrame = this._game.blockSprite[this.color - 1]

    this.node.width = this.node.height = width;
    this.startTime = data.startTime;
    this.iid = data.y;
    this.jid = data.x; // console.log('生成方块位置', data.y, data.x)

    this.node.x = -(730 / 2 - g.gapCfgNum - width / 2) + pos.x * (width + g.gapCfgNum);
    this.node.y = 730 / 2 - g.gapCfgNum - width / 2 - pos.y * (width + g.gapCfgNum);
    this.node.angle = 0;
    this.playStartAction();
  },
  onWarning: function onWarning(type) {
    this.warningSprite.spriteFrame = this._game.warningSpriteFrame[type - 1] || '';
    this.warningType = type; //   this.lightSprite.node.active = true

    var tween1 = cc.blink(1, 10); //   this.lightSprite.node.runAction(tween1)
  },
  warningInit: function warningInit() {
    this.warningSprite.spriteFrame = ''; //  this.lightSprite.node.active = false

    this.isPush = false;
  },
  growInit: function growInit() {
    this.growType = 0;
    this.colorSprite.node.height = this.colorSprite.node.width = this._width;
    this.colorSprite.node.y = this.colorSprite.node.x = 0;
  },
  grow: function grow(type) {
    //1234 上下左右
    switch (type) {
      case 1:
        if (this.growType != 2) {
          this.colorSprite.node.height += this._game.gapCfgNum * 2;
          this.colorSprite.node.y += this._game.gapCfgNum;
          this.growType = 1;
        }

        break;

      case 2:
        if (this.growType != 2) {
          this.colorSprite.node.height += this._game.gapCfgNum * 2;
          this.colorSprite.node.y -= this._game.gapCfgNum;
          this.growType = 1;
        }

        break;

      case 3:
        if (this.growType != 1) {
          this.colorSprite.node.width += this._game.gapCfgNum * 2;
          this.colorSprite.node.x -= this._game.gapCfgNum;
          this.growType = 2;
        }

        break;

      case 4:
        if (this.growType != 1) {
          this.colorSprite.node.width += this._game.gapCfgNum * 2;
          this.colorSprite.node.x += this._game.gapCfgNum;
          this.growType = 2;
        }

        break;
    }
  },
  bindEvent: function bindEvent() {
    this.node.on(cc.Node.EventType.TOUCH_START, this.onTouched, this);
  },
  // 用户点击 或者被其他方块触发
  onTouched: function onTouched(color, isChain, isBomb, time) {
    var _this = this;

    //道具新增参数 isChain是否连锁 isBomb是否强制消除
    if (time) {
      setTimeout(function () {
        _this.onTouched(color, false, isBomb);
      }, time);
      return;
    }

    isChain = JSON.stringify(isChain) == 'null' ? true : isChain;
    isBomb = isBomb ? isBomb : false;
    var self = this; // 爆炸触发

    if (this.statusType == 1 && isBomb == true) {
      this.statusType = 2;
      this.playDieAction().then(function () {
        _this.onBlockPop(color, isChain, isBomb);
      });
      return;
    }

    if (color.type) {
      // 一定是用户主动触发 保存这个坐标给game
      if (this.isSingle && this._itemType <= 1) {
        this.node.scale = 1;

        this._game._gameScore.tipBox.init(this._game._gameScore, 3);

        var tween1 = cc.scaleTo(0.1, 1.1, 0.9);
        var action2 = cc.scaleTo(0.3, 1).easing(cc.easeBackOut(2.0));
        var action = cc.sequence(tween1, action2);
        this.node.runAction(action);
        return;
      } // console.log('方块位置', this.iid, this.jid, this._itemType)


      color = this.color;

      if (this.statusType == 1 && this._game.statusType == 1 && this.color == color) {
        this._game.onUserTouched(this.iid, this.jid, this._itemType, this.color, this.warningType, {
          x: this.node.x,
          y: this.node.y
        });

        this._game._gameScore.onStep(-1).then(function (res) {
          if (res) {
            _this.playDieAction().then(function () {
              _this.onBlockPop(color, null, null);
            });
          }
        });
      }
    } else {
      // 由其他方块触发
      if (this.statusType == 1 && this._game.statusType == 5 && this.color == color) {
        this.playDieAction().then(function () {
          _this.onBlockPop(color, null, null);
        });
      }
    }
  },
  onBlockPop: function onBlockPop(color, isChain, isBomb) {
    var self = this;
    isChain = JSON.stringify(isChain) == 'null' ? true : isChain;
    isBomb = isBomb ? isBomb : false;

    self._game.checkNeedFall();

    self._game.statusType = 5;

    self._gameController.musicManager.onPlayAudio(0);

    if (this._itemType != 0) {
      // console.log("触发了道具", this._itemType)
      self._game.onItem(this._itemType, color, {
        x: this.node.x,
        y: this.node.y
      });
    }

    self._game._gameScore.addScore(cc.v2(this.node.x, this.node.y - this.node.width + this._game.gapCfgNum), this._itemType == 3 ? this._game._gameController.config.json.propConfig[2].score : null); // 连锁状态


    if (isChain) {
      if (self.iid - 1 >= 0) {
        self._game.map[self.iid - 1][self.jid].getComponent('element').onTouched(color);
      }

      if (self.iid + 1 < this._game.rowCfgNum) {
        self._game.map[self.iid + 1][self.jid].getComponent('element').onTouched(color);
      }

      if (self.jid - 1 >= 0) {
        self._game.map[self.iid][self.jid - 1].getComponent('element').onTouched(color);
      }

      if (self.jid + 1 < this._game.rowCfgNum) {
        self._game.map[self.iid][self.jid + 1].getComponent('element').onTouched(color);
      }
    }
  },
  playFallAction: function playFallAction(y, data) {
    var _this2 = this;

    //下降了几个格子
    this.statusType = 0;

    if (data) {
      this.iid = data.y;
      this.jid = data.x;
    }

    var action = cc.moveBy(0.25, 0, -y * (this._game.gapCfgNum + this._game.blockClsWidth)).easing(cc.easeBounceOut(5 / y)); //1 * y / this._game.animaCfgSpeed

    var seq = cc.sequence(action, cc.callFunc(function () {
      _this2.statusType = 1; //  this._game.checkNeedGenerator()
    }, this));
    this.node.runAction(seq);
  },
  playStartAction: function playStartAction() {
    var _this3 = this;

    this.node.scaleX = 0;
    this.node.scaleY = 0;
    var action = cc.scaleTo(0.8 / this._game.animaCfgSpeed, 1, 1).easing(cc.easeBackOut());
    var seq = cc.sequence(action, cc.callFunc(function () {
      _this3.statusType = 1;
    }, this)); // 如果有延迟时间就用延迟时间

    if (this.startTime) {
      setTimeout(function () {
        _this3.node.runAction(seq);
      }, this.startTime / 1 // (cc.game.getFrameRate() / 60)
      );
    } else {
      this.node.runAction(seq);
    }
  },
  playDieAction: function playDieAction() {
    var _this4 = this;

    var self = this;
    clearTimeout(this.surfaceTimer);
    this.node.stopAllActions();
    this.statusType = 2;
    this.node.scaleX = 1;
    this.node.scaleY = 1;
    return new Promise(function (resolve, reject) {
      var action;

      if (_this4.warningSprite.spriteFrame) {
        //有道具预警
        var tween1 = cc.scaleTo(0.2 / self._game.animaCfgSpeed, 1.1);
        var action2 = cc.moveTo(0.2 / self._game.animaCfgSpeed, _this4._game.target.x, _this4._game.target.y);
        var action3 = cc.scaleTo(0.2, 0);
        var seq = cc.sequence(tween1, cc.callFunc(function () {
          resolve('');
        }, _this4), cc.spawn(action2, action3));
      } else {
        action = cc.scaleTo(0.2 / self._game.animaCfgSpeed, 0, 0);
        var seq = cc.sequence(action, cc.callFunc(function () {
          resolve('');
        }, _this4));
      }

      self.node.runAction(seq);
    });
  },
  surfaceAction: function surfaceAction(dela) {
    var _this5 = this;

    this.surfaceTimer = setTimeout(function () {
      var action = cc.scaleTo(0.4 / _this5._game.animaCfgSpeed, 0.8, 0.8);
      var tween1 = cc.scaleTo(0.4 / _this5._game.animaCfgSpeed, 1, 1);

      _this5.node.runAction(cc.sequence(action, tween1));
    }, dela);
  },
  generatePropAction: function generatePropAction() {},
  generateItem: function generateItem(type) {
    this._itemType = type;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxlbGVtZW50LmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwic3RhdHVzVHlwZSIsIl9pdGVtVHlwZSIsIndhcm5pbmdTcHJpdGUiLCJTcHJpdGUiLCJsaWdodFNwcml0ZSIsImluaXQiLCJnIiwiZGF0YSIsIndpZHRoIiwiaXRlbVR5cGUiLCJwb3MiLCJfZ2FtZSIsIngiLCJ5Iiwid2FybmluZ1R5cGUiLCJpc1B1c2giLCJiaW5kRXZlbnQiLCJjb2xvciIsIk1hdGgiLCJjZWlsIiwicmFuZG9tIiwiY29sb3JTcHJpdGUiLCJub2RlIiwiZ2V0Q2hpbGRCeU5hbWUiLCJnZXRDb21wb25lbnQiLCJzcHJpdGVGcmFtZSIsInByb3BTcHJpdGVGcmFtZSIsImJsb2NrU3ByaXRlIiwiX3dpZHRoIiwiX2dhbWVDb250cm9sbGVyIiwiYWN0aXZlIiwiaGVpZ2h0Iiwic3RhcnRUaW1lIiwiaWlkIiwiamlkIiwiZ2FwQ2ZnTnVtIiwiYW5nbGUiLCJwbGF5U3RhcnRBY3Rpb24iLCJvbldhcm5pbmciLCJ0eXBlIiwid2FybmluZ1Nwcml0ZUZyYW1lIiwidHdlZW4xIiwiYmxpbmsiLCJ3YXJuaW5nSW5pdCIsImdyb3dJbml0IiwiZ3Jvd1R5cGUiLCJncm93Iiwib24iLCJOb2RlIiwiRXZlbnRUeXBlIiwiVE9VQ0hfU1RBUlQiLCJvblRvdWNoZWQiLCJpc0NoYWluIiwiaXNCb21iIiwidGltZSIsInNldFRpbWVvdXQiLCJKU09OIiwic3RyaW5naWZ5Iiwic2VsZiIsInBsYXlEaWVBY3Rpb24iLCJ0aGVuIiwib25CbG9ja1BvcCIsImlzU2luZ2xlIiwic2NhbGUiLCJfZ2FtZVNjb3JlIiwidGlwQm94Iiwic2NhbGVUbyIsImFjdGlvbjIiLCJlYXNpbmciLCJlYXNlQmFja091dCIsImFjdGlvbiIsInNlcXVlbmNlIiwicnVuQWN0aW9uIiwib25Vc2VyVG91Y2hlZCIsIm9uU3RlcCIsInJlcyIsImNoZWNrTmVlZEZhbGwiLCJtdXNpY01hbmFnZXIiLCJvblBsYXlBdWRpbyIsIm9uSXRlbSIsImFkZFNjb3JlIiwidjIiLCJjb25maWciLCJqc29uIiwicHJvcENvbmZpZyIsInNjb3JlIiwibWFwIiwicm93Q2ZnTnVtIiwicGxheUZhbGxBY3Rpb24iLCJtb3ZlQnkiLCJibG9ja0Nsc1dpZHRoIiwiZWFzZUJvdW5jZU91dCIsInNlcSIsImNhbGxGdW5jIiwic2NhbGVYIiwic2NhbGVZIiwiYW5pbWFDZmdTcGVlZCIsImNsZWFyVGltZW91dCIsInN1cmZhY2VUaW1lciIsInN0b3BBbGxBY3Rpb25zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJtb3ZlVG8iLCJ0YXJnZXQiLCJhY3Rpb24zIiwic3Bhd24iLCJzdXJmYWNlQWN0aW9uIiwiZGVsYSIsImdlbmVyYXRlUHJvcEFjdGlvbiIsImdlbmVyYXRlSXRlbSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUlBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNQLGFBQVNELEVBQUUsQ0FBQ0UsU0FETDtBQUVQQyxFQUFBQSxVQUFVLEVBQUU7QUFDVkMsSUFBQUEsVUFBVSxFQUFFLENBREY7QUFDSztBQUNmQyxJQUFBQSxTQUFTLEVBQUUsQ0FGRDtBQUVJO0FBQ2RDLElBQUFBLGFBQWEsRUFBRU4sRUFBRSxDQUFDTyxNQUhSO0FBSVZDLElBQUFBLFdBQVcsRUFBRVIsRUFBRSxDQUFDTztBQUpOLEdBRkw7QUFRUEUsRUFBQUEsSUFSTyxnQkFRRkMsQ0FSRSxFQVFDQyxJQVJELEVBUU9DLEtBUlAsRUFRY0MsUUFSZCxFQVF3QkMsR0FSeEIsRUFRNkI7QUFDbEMsU0FBS0MsS0FBTCxHQUFhTCxDQUFiO0FBQ0EsU0FBS04sVUFBTCxHQUFrQixDQUFsQjs7QUFDQSxRQUFJVSxHQUFKLEVBQVMsQ0FDUDtBQUNEOztBQUNEQSxJQUFBQSxHQUFHLEdBQUdBLEdBQUcsSUFBSTtBQUNYRSxNQUFBQSxDQUFDLEVBQUVMLElBQUksQ0FBQ0ssQ0FE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QWhCTSxDQUFQO0FBaUJELEdBN09NO0FBOE9QZSxFQUFBQSxhQTlPTyx5QkE4T09DLElBOU9QLEVBOE9hO0FBQUE7O0FBQ2xCLFNBQUtWLFlBQUwsR0FBb0IzQyxVQUFVLENBQUMsWUFBTTtBQUNuQyxVQUFJZSxNQUFNLEdBQUcxRSxFQUFFLENBQUNzRSxPQUFILENBQVcsTUFBTSxNQUFJLENBQUN2RCxLQUFMLENBQVdxRixhQUE1QixFQUEyQyxHQUEzQyxFQUFnRCxHQUFoRCxDQUFiO0FBQ0EsVUFBSXZELE1BQU0sR0FBRzdDLEVBQUUsQ0FBQ3NFLE9BQUgsQ0FBVyxNQUFNLE1BQUksQ0FBQ3ZELEtBQUwsQ0FBV3FGLGFBQTVCLEVBQTJDLENBQTNDLEVBQThDLENBQTlDLENBQWI7O0FBQ0EsTUFBQSxNQUFJLENBQUMxRSxJQUFMLENBQVVrRCxTQUFWLENBQW9CNUUsRUFBRSxDQUFDMkUsUUFBSCxDQUFZRCxNQUFaLEVBQW9CN0IsTUFBcEIsQ0FBcEI7QUFDRCxLQUo2QixFQUkzQm1FLElBSjJCLENBQTlCO0FBS0QsR0FwUE07QUFxUFBDLEVBQUFBLGtCQXJQTyxnQ0FxUGMsQ0FFcEIsQ0F2UE07QUF3UFBDLEVBQUFBLFlBeFBPLHdCQXdQTXZFLElBeFBOLEVBd1BZO0FBQ2pCLFNBQUt0QyxTQUFMLEdBQWlCc0MsSUFBakI7QUFDRDtBQTFQTSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGF1dGhvciBoZXl1Y2hhbmdcclxuICogQGZpbGUg5Y2V5Liq5pa55Z2X5o6n5Yi2XHJcbiAqL1xyXG5jYy5DbGFzcyh7XHJcbiAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG4gIHByb3BlcnRpZXM6IHtcclxuICAgIHN0YXR1c1R5cGU6IDAsIC8vMeS4uuWPr+inpuWPkeeCueWHuyAy5Li65bey57uP5raI5aSxXHJcbiAgICBfaXRlbVR5cGU6IDAsIC8v5paw5aKe6YGT5YW35Yqf6IO9IDHkuLrlj4zlgI3lgI3mlbAgMuS4uueCuOW8uVxyXG4gICAgd2FybmluZ1Nwcml0ZTogY2MuU3ByaXRlLFxyXG4gICAgbGlnaHRTcHJpdGU6IGNjLlNwcml0ZSxcclxuICB9LFxyXG4gIGluaXQoZywgZGF0YSwgd2lkdGgsIGl0ZW1UeXBlLCBwb3MpIHtcclxuICAgIHRoaXMuX2dhbWUgPSBnXHJcbiAgICB0aGlzLnN0YXR1c1R5cGUgPSAxXHJcbiAgICBpZiAocG9zKSB7XHJcbiAgICAgIC8vY2MubG9nKCfnlJ/miJDnmoTmlrnlnZcnLCBwb3MpXHJcbiAgICB9XHJcbiAgICBwb3MgPSBwb3MgfHwge1xyXG4gICAgICB4OiBkYXRhLngsXHJcbiAgICAgIHk6IGRhdGEueVxyXG4gICAgfVxyXG4gICAgdGhpcy5faXRlbVR5cGUgPSBpdGVtVHlwZSB8fCAwXHJcbiAgICB0aGlzLndhcm5pbmdUeXBlID0gMFxyXG4gICAgdGhpcy5pc1B1c2ggPSBmYWxzZVxyXG4gICAgdGhpcy5iaW5kRXZlbnQoKVxyXG4gICAgdGhpcy5jb2xvciA9IGRhdGEuY29sb3IgfHwgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiA0KVxyXG4gICAgdGhpcy5jb2xvclNwcml0ZSA9IHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZSgnY29sb3InKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKVxyXG4gICAgdGhpcy5jb2xvclNwcml0ZS5zcHJpdGVGcmFtZSA9IGl0ZW1UeXBlID8gZy5wcm9wU3ByaXRlRnJhbWVbKGl0ZW1UeXBlIC0gMSkgKiA0ICsgdGhpcy5jb2xvciAtIDFdIDogdGhpcy5fZ2FtZS5ibG9ja1Nwcml0ZVt0aGlzLmNvbG9yIC0gMV1cclxuICAgIHRoaXMud2FybmluZ1Nwcml0ZS5zcHJpdGVGcmFtZSA9ICcnXHJcbiAgICB0aGlzLl93aWR0aCA9IHdpZHRoXHJcbiAgICB0aGlzLl9nYW1lQ29udHJvbGxlciA9IGcuX2dhbWVDb250cm9sbGVyXHJcbiAgICAvLyDorqHnrpflrr1cclxuICAgIHRoaXMubGlnaHRTcHJpdGUubm9kZS5hY3RpdmUgPSBmYWxzZVxyXG4gICAgLy8gIHRoaXMubGlnaHRTcHJpdGUuc3ByaXRlRnJhbWUgPSB0aGlzLl9nYW1lLmJsb2NrU3ByaXRlW3RoaXMuY29sb3IgLSAxXVxyXG4gICAgdGhpcy5ub2RlLndpZHRoID0gdGhpcy5ub2RlLmhlaWdodCA9IHdpZHRoXHJcbiAgICB0aGlzLnN0YXJ0VGltZSA9IGRhdGEuc3RhcnRUaW1lXHJcbiAgICB0aGlzLmlpZCA9IGRhdGEueVxyXG4gICAgdGhpcy5qaWQgPSBkYXRhLnhcclxuICAgIC8vIGNvbnNvbGUubG9nKCfnlJ/miJDmlrnlnZfkvY3nva4nLCBkYXRhLnksIGRhdGEueClcclxuICAgIHRoaXMubm9kZS54ID0gLSg3MzAgLyAyIC0gZy5nYXBDZmdOdW0gLSB3aWR0aCAvIDIpICsgcG9zLnggKiAod2lkdGggKyBnLmdhcENmZ051bSlcclxuICAgIHRoaXMubm9kZS55ID0gKDczMCAvIDIgLSBnLmdhcENmZ051bSAtIHdpZHRoIC8gMikgLSBwb3MueSAqICh3aWR0aCArIGcuZ2FwQ2ZnTnVtKVxyXG4gICAgdGhpcy5ub2RlLmFuZ2xlID0gMFxyXG4gICAgdGhpcy5wbGF5U3RhcnRBY3Rpb24oKVxyXG4gIH0sXHJcbiAgb25XYXJuaW5nKHR5cGUpIHtcclxuICAgIHRoaXMud2FybmluZ1Nwcml0ZS5zcHJpdGVGcmFtZSA9IHRoaXMuX2dhbWUud2FybmluZ1Nwcml0ZUZyYW1lW3R5cGUgLSAxXSB8fCAnJ1xyXG4gICAgdGhpcy53YXJuaW5nVHlwZSA9IHR5cGVcclxuICAgIC8vICAgdGhpcy5saWdodFNwcml0ZS5ub2RlLmFjdGl2ZSA9IHRydWVcclxuICAgIGxldCB0d2VlbjEgPSBjYy5ibGluaygxLCAxMClcclxuICAgIC8vICAgdGhpcy5saWdodFNwcml0ZS5ub2RlLnJ1bkFjdGlvbih0d2VlbjEpXHJcbiAgfSxcclxuICB3YXJuaW5nSW5pdCgpIHtcclxuICAgIHRoaXMud2FybmluZ1Nwcml0ZS5zcHJpdGVGcmFtZSA9ICcnXHJcbiAgICAvLyAgdGhpcy5saWdodFNwcml0ZS5ub2RlLmFjdGl2ZSA9IGZhbHNlXHJcbiAgICB0aGlzLmlzUHVzaCA9IGZhbHNlXHJcbiAgfSxcclxuICBncm93SW5pdCgpIHtcclxuICAgIHRoaXMuZ3Jvd1R5cGUgPSAwXHJcbiAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUuaGVpZ2h0ID0gdGhpcy5jb2xvclNwcml0ZS5ub2RlLndpZHRoID0gdGhpcy5fd2lkdGhcclxuICAgIHRoaXMuY29sb3JTcHJpdGUubm9kZS55ID0gdGhpcy5jb2xvclNwcml0ZS5ub2RlLnggPSAwXHJcbiAgfSxcclxuICBncm93KHR5cGUpIHsgLy8xMjM0IOS4iuS4i+W3puWPs1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICBpZiAodGhpcy5ncm93VHlwZSAhPSAyKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUuaGVpZ2h0ICs9IHRoaXMuX2dhbWUuZ2FwQ2ZnTnVtICogMlxyXG4gICAgICAgICAgdGhpcy5jb2xvclNwcml0ZS5ub2RlLnkgKz0gdGhpcy5fZ2FtZS5nYXBDZmdOdW1cclxuICAgICAgICAgIHRoaXMuZ3Jvd1R5cGUgPSAxXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgMjpcclxuICAgICAgICBpZiAodGhpcy5ncm93VHlwZSAhPSAyKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUuaGVpZ2h0ICs9IHRoaXMuX2dhbWUuZ2FwQ2ZnTnVtICogMlxyXG4gICAgICAgICAgdGhpcy5jb2xvclNwcml0ZS5ub2RlLnkgLT0gdGhpcy5fZ2FtZS5nYXBDZmdOdW1cclxuICAgICAgICAgIHRoaXMuZ3Jvd1R5cGUgPSAxXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICBpZiAodGhpcy5ncm93VHlwZSAhPSAxKSB7XHJcbiAgICAgICAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUud2lkdGggKz0gdGhpcy5fZ2FtZS5nYXBDZmdOdW0gKiAyXHJcbiAgICAgICAgICB0aGlzLmNvbG9yU3ByaXRlLm5vZGUueCAtPSB0aGlzLl9nYW1lLmdhcENmZ051bVxyXG4gICAgICAgICAgdGhpcy5ncm93VHlwZSA9IDJcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSA0OlxyXG4gICAgICAgIGlmICh0aGlzLmdyb3dUeXBlICE9IDEpIHtcclxuICAgICAgICAgIHRoaXMuY29sb3JTcHJpdGUubm9kZS53aWR0aCArPSB0aGlzLl9nYW1lLmdhcENmZ051bSAqIDJcclxuICAgICAgICAgIHRoaXMuY29sb3JTcHJpdGUubm9kZS54ICs9IHRoaXMuX2dhbWUuZ2FwQ2ZnTnVtXHJcbiAgICAgICAgICB0aGlzLmdyb3dUeXBlID0gMlxyXG4gICAgICAgIH1cclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgYmluZEV2ZW50KCkge1xyXG4gICAgdGhpcy5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLm9uVG91Y2hlZCwgdGhpcylcclxuICB9LFxyXG4gIC8vIOeUqOaIt+eCueWHuyDmiJbogIXooqvlhbbku5bmlrnlnZfop6blj5FcclxuICBvblRvdWNoZWQoY29sb3IsIGlzQ2hhaW4sIGlzQm9tYiwgdGltZSkgeyAvL+mBk+WFt+aWsOWinuWPguaVsCBpc0NoYWlu5piv5ZCm6L+e6ZSBIGlzQm9tYuaYr+WQpuW8uuWItua2iOmZpFxyXG4gICAgaWYgKHRpbWUpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5vblRvdWNoZWQoY29sb3IsIGZhbHNlLCBpc0JvbWIpXHJcbiAgICAgIH0sIHRpbWUpXHJcbiAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaXNDaGFpbiA9IEpTT04uc3RyaW5naWZ5KGlzQ2hhaW4pID09ICdudWxsJyA/IHRydWUgOiBpc0NoYWluXHJcbiAgICBpc0JvbWIgPSBpc0JvbWIgPyBpc0JvbWIgOiBmYWxzZVxyXG4gICAgbGV0IHNlbGYgPSB0aGlzXHJcbiAgICAvLyDniIbngrjop6blj5FcclxuICAgIGlmICh0aGlzLnN0YXR1c1R5cGUgPT0gMSAmJiBpc0JvbWIgPT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLnN0YXR1c1R5cGUgPSAyXHJcbiAgICAgIHRoaXMucGxheURpZUFjdGlvbigpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHRoaXMub25CbG9ja1BvcChjb2xvciwgaXNDaGFpbiwgaXNCb21iKVxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29sb3IudHlwZSkge1xyXG4gICAgICAvLyDkuIDlrprmmK/nlKjmiLfkuLvliqjop6blj5Eg5L+d5a2Y6L+Z5Liq5Z2Q5qCH57uZZ2FtZVxyXG4gICAgICBpZiAodGhpcy5pc1NpbmdsZSAmJiB0aGlzLl9pdGVtVHlwZSA8PSAxKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlLnNjYWxlID0gMVxyXG4gICAgICAgIHRoaXMuX2dhbWUuX2dhbWVTY29yZS50aXBCb3guaW5pdCh0aGlzLl9nYW1lLl9nYW1lU2NvcmUsIDMpXHJcbiAgICAgICAgbGV0IHR3ZWVuMSA9IGNjLnNjYWxlVG8oMC4xLCAxLjEsIDAuOSlcclxuICAgICAgICBsZXQgYWN0aW9uMiA9IGNjLnNjYWxlVG8oMC4zLCAxKS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoMi4wKSlcclxuICAgICAgICBsZXQgYWN0aW9uID0gY2Muc2VxdWVuY2UodHdlZW4xLCBhY3Rpb24yKVxyXG4gICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oYWN0aW9uKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICB9XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKCfmlrnlnZfkvY3nva4nLCB0aGlzLmlpZCwgdGhpcy5qaWQsIHRoaXMuX2l0ZW1UeXBlKVxyXG4gICAgICBjb2xvciA9IHRoaXMuY29sb3JcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzVHlwZSA9PSAxICYmIHRoaXMuX2dhbWUuc3RhdHVzVHlwZSA9PSAxICYmIHRoaXMuY29sb3IgPT0gY29sb3IpIHtcclxuICAgICAgICB0aGlzLl9nYW1lLm9uVXNlclRvdWNoZWQodGhpcy5paWQsIHRoaXMuamlkLCB0aGlzLl9pdGVtVHlwZSwgdGhpcy5jb2xvciwgdGhpcy53YXJuaW5nVHlwZSwge1xyXG4gICAgICAgICAgeDogdGhpcy5ub2RlLngsXHJcbiAgICAgICAgICB5OiB0aGlzLm5vZGUueVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fZ2FtZS5fZ2FtZVNjb3JlLm9uU3RlcCgtMSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBpZiAocmVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxheURpZUFjdGlvbigpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgIHRoaXMub25CbG9ja1BvcChjb2xvciwgbnVsbCwgbnVsbClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyDnlLHlhbbku5bmlrnlnZfop6blj5FcclxuICAgICAgaWYgKHRoaXMuc3RhdHVzVHlwZSA9PSAxICYmIHRoaXMuX2dhbWUuc3RhdHVzVHlwZSA9PSA1ICYmIHRoaXMuY29sb3IgPT0gY29sb3IpIHtcclxuICAgICAgICB0aGlzLnBsYXlEaWVBY3Rpb24oKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHRoaXMub25CbG9ja1BvcChjb2xvciwgbnVsbCwgbnVsbClcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBvbkJsb2NrUG9wKGNvbG9yLCBpc0NoYWluLCBpc0JvbWIpIHtcclxuICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgaXNDaGFpbiA9IEpTT04uc3RyaW5naWZ5KGlzQ2hhaW4pID09ICdudWxsJyA/IHRydWUgOiBpc0NoYWluXHJcbiAgICBpc0JvbWIgPSBpc0JvbWIgPyBpc0JvbWIgOiBmYWxzZVxyXG4gICAgc2VsZi5fZ2FtZS5jaGVja05lZWRGYWxsKClcclxuICAgIHNlbGYuX2dhbWUuc3RhdHVzVHlwZSA9IDVcclxuICAgIHNlbGYuX2dhbWVDb250cm9sbGVyLm11c2ljTWFuYWdlci5vblBsYXlBdWRpbygwXHJcbiAgICApXHJcbiAgICBpZiAodGhpcy5faXRlbVR5cGUgIT0gMCkge1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhcIuinpuWPkeS6humBk+WFt1wiLCB0aGlzLl9pdGVtVHlwZSlcclxuXHJcbiAgICAgIHNlbGYuX2dhbWUub25JdGVtKHRoaXMuX2l0ZW1UeXBlLCBjb2xvciwge1xyXG4gICAgICAgIHg6IHRoaXMubm9kZS54LFxyXG4gICAgICAgIHk6IHRoaXMubm9kZS55XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzZWxmLl9nYW1lLl9nYW1lU2NvcmUuYWRkU2NvcmUoY2MudjIodGhpcy5ub2RlLngsIHRoaXMubm9kZS55IC0gdGhpcy5ub2RlLndpZHRoICsgdGhpcy5fZ2FtZS5nYXBDZmdOdW0pLCB0aGlzLl9pdGVtVHlwZSA9PSAzID8gdGhpcy5fZ2FtZS5fZ2FtZUNvbnRyb2xsZXIuY29uZmlnLmpzb24ucHJvcENvbmZpZ1syXS5zY29yZSA6IG51bGwpXHJcblxyXG4gICAgLy8g6L+e6ZSB54q25oCBXHJcbiAgICBpZiAoaXNDaGFpbikge1xyXG4gICAgICBpZiAoKHNlbGYuaWlkIC0gMSkgPj0gMCkge1xyXG4gICAgICAgIHNlbGYuX2dhbWUubWFwW3NlbGYuaWlkIC0gMV1bc2VsZi5qaWRdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLm9uVG91Y2hlZChjb2xvcilcclxuICAgICAgfVxyXG4gICAgICBpZiAoKHNlbGYuaWlkICsgMSkgPCB0aGlzLl9nYW1lLnJvd0NmZ051bSkge1xyXG4gICAgICAgIHNlbGYuX2dhbWUubWFwW3NlbGYuaWlkICsgMV1bc2VsZi5qaWRdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLm9uVG91Y2hlZChjb2xvcilcclxuICAgICAgfVxyXG4gICAgICBpZiAoKHNlbGYuamlkIC0gMSkgPj0gMCkge1xyXG4gICAgICAgIHNlbGYuX2dhbWUubWFwW3NlbGYuaWlkXVtzZWxmLmppZCAtIDFdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLm9uVG91Y2hlZChjb2xvcilcclxuICAgICAgfVxyXG4gICAgICBpZiAoKHNlbGYuamlkICsgMSkgPCB0aGlzLl9nYW1lLnJvd0NmZ051bSkge1xyXG4gICAgICAgIHNlbGYuX2dhbWUubWFwW3NlbGYuaWlkXVtzZWxmLmppZCArIDFdLmdldENvbXBvbmVudCgnZWxlbWVudCcpLm9uVG91Y2hlZChjb2xvcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgcGxheUZhbGxBY3Rpb24oeSwgZGF0YSkgeyAvL+S4i+mZjeS6huWHoOS4quagvOWtkFxyXG4gICAgdGhpcy5zdGF0dXNUeXBlID0gMFxyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgdGhpcy5paWQgPSBkYXRhLnlcclxuICAgICAgdGhpcy5qaWQgPSBkYXRhLnhcclxuICAgIH1cclxuICAgIGxldCBhY3Rpb24gPSBjYy5tb3ZlQnkoMC4yNSwgMCwgLXkgKiAodGhpcy5fZ2FtZS5nYXBDZmdOdW0gKyB0aGlzLl9nYW1lLmJsb2NrQ2xzV2lkdGgpKS5lYXNpbmcoY2MuZWFzZUJvdW5jZU91dCg1IC8geSkpIC8vMSAqIHkgLyB0aGlzLl9nYW1lLmFuaW1hQ2ZnU3BlZWRcclxuICAgIGxldCBzZXEgPSBjYy5zZXF1ZW5jZShhY3Rpb24sIGNjLmNhbGxGdW5jKCgpID0+IHtcclxuICAgICAgdGhpcy5zdGF0dXNUeXBlID0gMVxyXG4gICAgICAvLyAgdGhpcy5fZ2FtZS5jaGVja05lZWRHZW5lcmF0b3IoKVxyXG4gICAgfSwgdGhpcykpXHJcbiAgICB0aGlzLm5vZGUucnVuQWN0aW9uKHNlcSlcclxuICB9LFxyXG4gIHBsYXlTdGFydEFjdGlvbigpIHtcclxuICAgIHRoaXMubm9kZS5zY2FsZVggPSAwXHJcbiAgICB0aGlzLm5vZGUuc2NhbGVZID0gMFxyXG4gICAgbGV0IGFjdGlvbiA9IGNjLnNjYWxlVG8oMC44IC8gdGhpcy5fZ2FtZS5hbmltYUNmZ1NwZWVkLCAxLCAxKS5lYXNpbmcoY2MuZWFzZUJhY2tPdXQoKSlcclxuICAgIGxldCBzZXEgPSBjYy5zZXF1ZW5jZShhY3Rpb24sIGNjLmNhbGxGdW5jKCgpID0+IHtcclxuICAgICAgdGhpcy5zdGF0dXNUeXBlID0gMVxyXG4gICAgfSwgdGhpcykpXHJcbiAgICAvLyDlpoLmnpzmnInlu7bov5/ml7bpl7TlsLHnlKjlu7bov5/ml7bpl7RcclxuICAgIGlmICh0aGlzLnN0YXJ0VGltZSkge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oc2VxKVxyXG4gICAgICAgIH0sIHRoaXMuc3RhcnRUaW1lIC8gMVxyXG4gICAgICAgIC8vIChjYy5nYW1lLmdldEZyYW1lUmF0ZSgpIC8gNjApXHJcbiAgICAgIClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oc2VxKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgcGxheURpZUFjdGlvbigpIHtcclxuICAgIGxldCBzZWxmID0gdGhpc1xyXG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuc3VyZmFjZVRpbWVyKVxyXG4gICAgdGhpcy5ub2RlLnN0b3BBbGxBY3Rpb25zKClcclxuICAgIHRoaXMuc3RhdHVzVHlwZSA9IDJcclxuICAgIHRoaXMubm9kZS5zY2FsZVggPSAxXHJcbiAgICB0aGlzLm5vZGUuc2NhbGVZID0gMVxyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgbGV0IGFjdGlvblxyXG4gICAgICBpZiAodGhpcy53YXJuaW5nU3ByaXRlLnNwcml0ZUZyYW1lKSB7IC8v5pyJ6YGT5YW36aKE6K2mXHJcbiAgICAgICAgbGV0IHR3ZWVuMSA9IGNjLnNjYWxlVG8oMC4yIC8gc2VsZi5fZ2FtZS5hbmltYUNmZ1NwZWVkLCAxLjEpXHJcbiAgICAgICAgbGV0IGFjdGlvbjIgPSBjYy5tb3ZlVG8oMC4yIC8gc2VsZi5fZ2FtZS5hbmltYUNmZ1NwZWVkLCB0aGlzLl9nYW1lLnRhcmdldC54LCB0aGlzLl9nYW1lLnRhcmdldC55KVxyXG4gICAgICAgIGxldCBhY3Rpb24zID0gY2Muc2NhbGVUbygwLjIsIDApXHJcbiAgICAgICAgdmFyIHNlcSA9IGNjLnNlcXVlbmNlKHR3ZWVuMSwgY2MuY2FsbEZ1bmMoKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSgnJylcclxuICAgICAgICB9LCB0aGlzKSwgY2Muc3Bhd24oYWN0aW9uMiwgYWN0aW9uMykpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWN0aW9uID0gY2Muc2NhbGVUbygwLjIgLyBzZWxmLl9nYW1lLmFuaW1hQ2ZnU3BlZWQsIDAsIDApXHJcbiAgICAgICAgdmFyIHNlcSA9IGNjLnNlcXVlbmNlKGFjdGlvbiwgY2MuY2FsbEZ1bmMoKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSgnJylcclxuICAgICAgICB9LCB0aGlzKSlcclxuICAgICAgfVxyXG4gICAgICBzZWxmLm5vZGUucnVuQWN0aW9uKHNlcSlcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgc3VyZmFjZUFjdGlvbihkZWxhKSB7XHJcbiAgICB0aGlzLnN1cmZhY2VUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBsZXQgYWN0aW9uID0gY2Muc2NhbGVUbygwLjQgLyB0aGlzLl9nYW1lLmFuaW1hQ2ZnU3BlZWQsIDAuOCwgMC44KVxyXG4gICAgICBsZXQgdHdlZW4xID0gY2Muc2NhbGVUbygwLjQgLyB0aGlzLl9nYW1lLmFuaW1hQ2ZnU3BlZWQsIDEsIDEpXHJcbiAgICAgIHRoaXMubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoYWN0aW9uLCB0d2VlbjEpKVxyXG4gICAgfSwgZGVsYSlcclxuICB9LFxyXG4gIGdlbmVyYXRlUHJvcEFjdGlvbigpIHtcclxuXHJcbiAgfSxcclxuICBnZW5lcmF0ZUl0ZW0odHlwZSkge1xyXG4gICAgdGhpcy5faXRlbVR5cGUgPSB0eXBlXHJcbiAgfSxcclxufSk7Il19