{"version":3,"sources":["assets\\Script\\social.js"],"names":["cc","Class","Component","properties","display","Sprite","groupDisplay","_isShow","init","c","_gameController","wx","showShareMenu","withShareTicket","onShareAppMessage","title","imageUrl","onAudioInterruptionEnd","musicManager","pauseBg","resumeBg","onShow","options","scene","postMessage","message","shareTicket","openGroupRank","node","active","totalRank","director","resume","onHide","pause","getHighestLevel","highLevel","getStorageSync","getHighestScore","score","onShareButton","self","shareAppMessage","scoreMgr","levelData","level","name","onUsualShareButton","onShakePhone","vibrateShort","onGameOver","highScore","event","parseInt","highLevelName","gameData","json","setStorageSync","failHighScore","string","kvDataList","Array","push","key","value","showRank","closeRank","showGroupRank","closeGroupRank","createImage","sprite","url","image","onload","texture","Texture2D","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","src","update","getComponent","WXSubContextView","onReviveButton","type","adType","audioAd","show","load","then","err","console","log","errMsg","game","onSkipRevive","onLevelUpButton","createRewardedVideoAd","adUnitId","fakeShare","onError","onClose","res","isEnded","undefined","showReviveSuccess","askRevive","openBannerAdv","navToMiniprogram","custom","navigateToMiniProgram","appId","closeBannerAdv","bannerAd","hide"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\n * @author heyuchang\n * @file  排行榜组件\n * @description 用户点击查看排行榜才检查授权,如果此时用户没有授权则进入授权界面\n */\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    display: cc.Sprite,\n    groupDisplay: cc.Sprite,\n    _isShow: false,\n    // score: 0\n  },\n  init(c) {\n\n    this._gameController = c\n    wx.showShareMenu({\n      withShareTicket: true\n    })\n    wx.onShareAppMessage(function () {\n      return {\n        title: \"开局只是个农民，现在已经做到宰相\",\n        imageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n      }\n    })\n    // 监听\n    wx.onAudioInterruptionEnd(() => {\n      c.musicManager.pauseBg()\n      c.musicManager.resumeBg()\n    })\n    wx.onShow((options) => {\n      if (options.scene == 1044) {\n        wx.postMessage({\n          message: 'group',\n          shareTicket: options.shareTicket\n        })\n        c.openGroupRank()\n        this.display.node.active = false\n        c.totalRank.active = false\n      }\n      cc.director.resume()\n    })\n    wx.onHide(() => {\n      cc.director.pause()\n    })\n    // 获取最高官阶\n    this.getHighestLevel()\n  },\n  getHighestLevel() {\n    let highLevel = wx.getStorageSync('highLevel')\n    return highLevel\n  },\n  getHighestScore() {\n    let score = wx.getStorageSync('highScore')\n    return score\n  },\n  // --------------- share ----------------\n  onShareButton() {\n    var self = this;\n    wx.shareAppMessage({\n      title: \"我终于成为了\" + this._gameController.scoreMgr.levelData[this._gameController.scoreMgr.level - 1].name + \",真是开心\",\n      // imageUrlId: 'oxEwGvClT0uldQ470pM84w',\n      imageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n    })\n  },\n  onUsualShareButton() {\n    wx.shareAppMessage({\n      title: \"只是个农民，现在已经做到宰相\",\n      // imageUrlId: 'oxEwGvClT0uldQ470pM84w',\n      imageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n    })\n  },\n  onShakePhone() {\n    wx.vibrateShort()\n  },\n  // ---------------分数上传---------------\n  onGameOver(level, score) {\n    //上传分数\n    //打开开放域\n    this.score = score\n    let highLevel = level\n    let highScore = score\n    let self = this\n\n    wx.postMessage({\n      event: 'setScore',\n      score: score,\n      level: level,\n    })\n    \n    highLevel = wx.getStorageSync('highLevel')\n    highLevel = parseInt(highLevel)\n    if (highLevel) {\n      highLevel = highLevel < level ? level : highLevel\n    } else {\n      highLevel = level\n    }\n    highScore = wx.getStorageSync('highScore')\n    if (highScore) {\n      highScore = parseInt(highScore)\n      highScore = highScore < score ? score : highScore\n    } else {\n      highScore = score\n    }\n    var highLevelName = this._gameController.gameData.json.levelData[highLevel - 1].name\n    wx.setStorageSync('highLevel', highLevel + '')\n    wx.setStorageSync('highScore', highScore + '')\n    self._gameController.scoreMgr.failHighScore.string = \"您的最高分:\" + (highScore + '')\n    var kvDataList = new Array()\n    kvDataList.push({\n      key: \"highLevel\",\n      value: highLevelName,\n    }, {\n      key: \"highScore\",\n      value: highScore + '',\n    })\n  },\n  showRank() {\n    wx.postMessage({\n      message: 'Show',\n      event: 'getRank',\n    })\n    this.display.node.active = true\n    this._isShow = true\n  },\n\n  closeRank() {\n    this.display.node.active = false\n    wx.postMessage({\n      message: 'Hide'\n    })\n    this._isShow = false\n  },\n  showGroupRank() {\n    wx.postMessage({\n      message: 'Show'\n    })\n    this.groupDisplay.node.active = true\n    this._isShow = true\n  },\n  // switchRankType() {\n  //   wx.postMessage({\n  //     message: 'switchRank'\n  //   })\n  //   this._isShow = true\n  // },\n  closeGroupRank() {\n    this.groupDisplay.node.active = false\n    wx.postMessage({\n      message: 'Hide'\n    })\n    this._isShow = false\n  },\n  createImage(sprite, url) {\n    let image = wx.createImage();\n    image.onload = function () {\n      let texture = new cc.Texture2D();\n      texture.initWithElement(image);\n      texture.handleLoadedTexture();\n      sprite.spriteFrame = new cc.SpriteFrame(texture);\n    };\n    image.src = url;\n  },\n  update() {\n    if (this._isShow) {\n      if (this.display.node.active) {\n        this.display.node.getComponent(cc.WXSubContextView).update()\n      }\n      if (this.groupDisplay.node.active) {\n        this.groupDisplay.node.getComponent(cc.WXSubContextView).update()\n      }\n    }\n  },\n  // 控制打开广告\n  onReviveButton(type) {\n    // 广告位\n    let self = this\n    this.adType = type //0表示加倍 1表示复活\n    if (this.audioAd) {\n      this.audioAd.show().catch(() => {\n        // 失败重试\n        this.audioAd.load()\n          .then(() => this.audioAd.show())\n          .catch(err => {\n            console.log('激励视频 广告显示失败', err.errMsg)\n            if (self.adType) {\n              self._gameController.game.onSkipRevive()\n            } else {\n              self._gameController.scoreMgr.onLevelUpButton()\n            }\n          })\n      })\n      return\n    }\n    this.audioAd = wx.createRewardedVideoAd({\n      adUnitId: 'adunit-482148cfeb243378'\n    })\n    this.audioAd.show().catch(() => {\n      // 失败重试\n      this.audioAd.load()\n        .then(() => this.audioAd.show())\n        .catch(err => {\n          self.fakeShare()\n        })\n    })\n    this.audioAd.onError(err => {\n      self.fakeShare()\n    })\n    this.audioAd.onClose((res) => {\n      if (self.adType) {\n        if (res && res.isEnded || res === undefined) {\n          self._gameController.game.showReviveSuccess()\n        } else {\n          self._gameController.game.askRevive()\n        }\n      } else {\n        if (res && res.isEnded || res === undefined) {\n          self._gameController.scoreMgr.onLevelUpButton(2)\n        }\n      }\n    })\n  },\n  fakeShare() {\n    let self = this\n    wx.shareAppMessage({\n      title: \"我已经玩到\" + this._gameController.scoreMgr.score + \"分了，邀请你来挑战\",\n      // imageUrlId: 'oxEwGvClT0uldQ470pM84w',\n      imageUrl: 'https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0'\n    })\n    if (this.adType) {\n      self._gameController.game.showReviveSuccess()\n    } else {\n      self._gameController.scoreMgr.onLevelUpButton(2)\n    }\n  },\n  openBannerAdv() {\n    // 创建 Banner 广告实例，提前初始化\n    // let screenWidth = wx.getSystemInfoSync().screenWidth\n    // let bannerHeight = screenWidth / 350 * 120\n    // let screenHeight = wx.getSystemInfoSync().screenHeight - 108\n    // let adUnitIds = [\n    //   'adunit-510a4ec39065ef96',\n    //   'adunit-29b0fa7a2db8e8cb',\n    //   'adunit-4020bb9ea439e6a5'\n    // ]\n    // if (this.bannerAd) {\n    //   this.bannerAd.destroy()\n    // }\n    // this.bannerAd = wx.createBannerAd({\n    //   adUnitId: adUnitIds[Math.floor(Math.random() * 3)],\n    //   style: {\n    //     left: 0,\n    //     top: screenHeight,\n    //     width: 620,\n    //   }\n    // })\n    // // 在适合的场景显示 Banner 广告\n    // this.bannerAd.onLoad(() => {\n    //   // console.log('banner 广告加载成功')\n    // })\n    // this.bannerAd.onError((e) => {\n    //   console.log('banner 广告加载失败', e)\n    // })\n    // this.bannerAd.show()\n    //   .then()\n  },\n  navToMiniprogram(event,custom) {\n    console.log(custom)\n    wx.navigateToMiniProgram({\n      appId: custom\n    })\n  },\n  closeBannerAdv() {\n    if (this.bannerAd) {\n      this.bannerAd.hide()\n    }\n  }\n});"]}