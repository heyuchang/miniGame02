{"version":3,"sources":["assets\\Script\\controller.js"],"names":["cc","Class","Component","properties","musicMgr","require","game","pageMgr","social","config","JsonAsset","gameData","scoreMgr","totalRank","Node","groupRank","startPage","navNode","pictorial","helpPage","start","active","init","node","lateStart","closeBannerAdv","getComponent","bannerNode","scale","onOpenPage","onGameStartButton","openBannerAdv","showAnimation","then","gameStart","closeRank","openRank","showRank","openGroupRank","showGroupRank","addPage","closeGroupRank","removePage","openPictorial","closePictorial","openHelpPage","closeHelpPage"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\n * @author heyuchang\n * @file 主控制器\n */\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    musicMgr: require('musicMgr'), //音乐控制组件\n    game: require('game'), //主游戏控制器\n    pageMgr: require('pageMgr'), //页面控制器\n    social: require('social'), //排行榜、广告控制器\n    config: cc.JsonAsset,\n    gameData: cc.JsonAsset,\n    scoreMgr: require('score'), //分数 特效控制\n    totalRank: cc.Node,\n    groupRank: cc.Node,\n    startPage: require('startPage'),\n    navNode: cc.Node,\n    pictorial: cc.Node,\n    helpPage: cc.Node,\n  },\n  start() {\n    this.totalRank.active = false\n    this.pictorial.active = false\n    this.game.init(this)\n    if (this.social.node.active) {\n      this.social.init(this)\n    }\n    this.musicMgr.init()\n    this.lateStart()\n  },\n  lateStart() {\n    if (this.social.node.active) {\n      this.social.closeBannerAdv()\n    }\n    this.pictorial.getComponent('pictorial').init(this)\n    this.startPage.bannerNode.scale = 1\n    this.pageMgr.onOpenPage(0)\n  },\n  onGameStartButton() {\n    // TODO:  增加一个动画\n    if (this.social.node.active) {\n      this.social.openBannerAdv()\n    }\n    this.startPage.showAnimation().then(() => {\n      this.gameStart()\n    })\n  },\n  gameStart() {\n    this.pageMgr.onOpenPage(1)\n    this.game.gameStart()\n  },\n  closeRank() {\n    this.totalRank.active = false\n    this.navNode.active = true\n    if (this.social.node.active) {\n      this.social.closeRank()\n    }\n  },\n  openRank() {\n    this.totalRank.active = true\n    this.navNode.active = false\n    if (this.social.node.active) {\n      this.social.showRank()\n    }\n  },\n  openGroupRank() {\n    this.groupRank.active = true\n    if (this.social.node.active) {\n      this.social.showGroupRank()\n      this.pageMgr.addPage(6)\n    }\n  },\n  closeGroupRank() {\n    this.groupRank.active = false\n    this.navNode.active = true\n    if (this.social.node.active) {\n      this.social.closeGroupRank()\n      this.pageMgr.removePage(6)\n    }\n  },\n  openPictorial() {\n    this.pictorial.active = true\n  },\n  closePictorial() {\n    this.pictorial.active = false\n  },\n  openHelpPage() {\n    this.helpPage.active = true\n  },\n  closeHelpPage() {\n    this.helpPage.active = false\n  }\n});"]}