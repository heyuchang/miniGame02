{"version":3,"sources":["assets\\Script\\pageMgr.js"],"names":["AC","require","cc","Class","Component","properties","status","pages","Node","start","lateStart","width","winSize","window","height","adoptCanvas","canvas","director","getScene","getChildByName","getComponent","Canvas","rateR","designResolution","rateV","fitHeight","fitWidth","onOpenPage","num","callFun","closeAllPages","active","addPage","scale","runAction","popOut","removePage","sequence","popIn","callFunc","onButtonOpenPage","event","cust","onButtonAddPage","onButtonRemovePage","forEach","element"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\n * @author heyuchang\n * @file  通用页面控制器和适配\n */\nvar AC = require('action')\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    status: 0, //页面状态\n    pages: [cc.Node],\n  },\n  // 0 开始游戏页面\n  // 1 游戏页面\n  // 2 UI页面\n  // 3 过关页面\n  // 4 失败页面\n  // 5 复活页面\n  // 6 排行榜页面\n\n  start() {\n    this.lateStart()\n  },\n  lateStart() {\n    this.width = cc.winSize.width\n    window.width = this.width\n    this.height = cc.winSize.height\n    window.height = this.height\n    // 存为全局变量\n    this.adoptCanvas()\n  },\n  // 适配解决方案\n  adoptCanvas() {\n    let canvas = cc.director.getScene().getChildByName('Canvas').getComponent(cc.Canvas)\n    // 设计分辨率比\n    let rateR = canvas.designResolution.height / canvas.designResolution.width;\n    // 显示分辨率比\n    let rateV = this.height / this.width;\n    if (rateV > rateR) {\n      canvas.fitHeight = false;\n      canvas.fitWidth = true;\n    } else {\n      canvas.fitHeight = true;\n      canvas.fitWidth = false;\n    }\n  },\n\n  onOpenPage(num, callFun) {\n    this.closeAllPages()\n    this.pages[num].active = true\n    // if (callFun) {\n    //   this.callFun();\n    // }\n  },\n  addPage(num, callFun) {\n    this.pages[num].scale = 0.5\n    this.pages[num].active = true\n    this.pages[num].runAction(AC.popOut(0.5))\n    // if (callFun) {\n    //   this.callFun();\n    // }\n  },\n  removePage(num, callFun) {\n    this.pages[num].runAction(cc.sequence(AC.popIn(0.5),cc.callFunc(()=>{\n      this.pages[num].active = false\n    },this)))\n    // if (callFun) {\n    //   this.callFun();\n    // }\n  },\n  onButtonOpenPage(event, cust) {\n    this.onOpenPage(cust);\n  },\n  onButtonAddPage(event, cust) {\n    this.addPage(cust);\n  },\n  onButtonRemovePage(event, cust) {\n    this.removePage(cust);\n  },\n  closeAllPages() {\n    this.pages.forEach(element => {\n      element.active = false\n    });\n  },\n});"]}