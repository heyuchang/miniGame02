{"version":3,"sources":["assets\\Script\\musicMgr.js"],"names":["cc","Class","Component","properties","volume","audios","AudioSource","audioPrefab","Prefab","bgMusic","winAudio","doubleAudio","boomAudio","magicAudio","init","audio","instanceAudio","createMusicPool","changeVol","vol","forEach","item","index","onPlayAudio","num","self","isPlaying","music","musicPool","size","get","instantiate","parent","node","getComponent","play","rewind","pauseBg","pause","resumeBg","resume","start","checkBg","onWin","onDouble","onBoom","onMagic"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\n * @author heyuchang\n * @file  音乐控制组件\n */\ncc.Class({\n  extends: cc.Component,\n  properties: {\n    volume: 1,\n    audios: [cc.AudioSource],\n    audioPrefab: cc.Prefab,\n    bgMusic: cc.AudioSource,\n    winAudio: cc.AudioSource,\n    doubleAudio: cc.AudioSource,\n    boomAudio: cc.AudioSource,\n    magicAudio: cc.AudioSource,\n    //audioSource: cc.AudioSource,\n  },\n  init() {\n    this.audio = []\n    this.instanceAudio()\n    this.createMusicPool()\n  },\n  createMusicPool() {\n    // this.musicPool = new cc.NodePool()\n    // for (let i = 0; i < 20; i++) {\n    //   let music = cc.instantiate(this.audioPrefab)\n    //   this.musicPool.put(music)\n    // }\n  },\n  instanceAudio() {\n\n  },\n  changeVol(vol) {\n    this.volume = vol\n    this.audios.forEach((item, index) => {\n      // item.volume = vol\n      this.audios[index].volume = vol\n    })\n  },\n  onPlayAudio(num) {\n    let self = this\n    if (!this.audios[num] || this.audios[num].isPlaying) {\n      if (this.audios[num + 1]) {\n        self.onPlayAudio(num + 1)\n      } else {\n        //console.log('创建新的音乐实例')\n        let music = null\n        if (self.musicPool && self.musicPool.size() > 0) {\n          music = self.musicPool.get()\n        } else {\n          music = cc.instantiate(self.audioPrefab)\n        }\n        music.parent = self.node\n        this.audios[num + 1] = music.getComponent(cc.AudioSource)\n        music.getComponent(cc.AudioSource).play()\n      }\n      // if (num < this.audios.length) {\n      //   this.audios[num].stop()\n      //   this.audios[num].rewind()\n      //   this.audios[num].play()\n      // }\n    } else {\n      // console.log('使用旧的音乐')\n      this.audios[num].rewind()\n      this.audios[num].play()\n    }\n  },\n  pauseBg() {\n    this.bgMusic.pause()\n  },\n  resumeBg() {\n    this.bgMusic.resume()\n  },\n  start() {\n    // this.onPlayAudio(1);\n  },\n  checkBg() {\n\n  },\n  onWin() {\n    this.winAudio.rewind()\n    this.winAudio.play()\n  },\n\n  onDouble() {\n    this.doubleAudio.rewind()\n    this.doubleAudio.play()\n  },\n\n  onBoom() {\n    this.boomAudio.rewind()\n    this.boomAudio.play()\n  },\n  onMagic() {\n    this.magicAudio.rewind()\n    this.magicAudio.play()\n  },\n});"]}