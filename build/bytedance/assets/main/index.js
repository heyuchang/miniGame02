window.__require=function e(t,i,o){function n(a,s){if(!i[a]){if(!t[a]){var r=a.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var h=i[a]={exports:{}};t[a][0].call(h.exports,function(e){return n(t[a][1][e]||e)},h,h.exports,e,t,i,o)}return i[a].exports}for(var c="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({action:[function(e,t){"use strict";cc._RF.push(t,"9d3711KFVFCZ6a/86BjU5eU","action");var i=function(e,t,i){return cc.tween(e).to(cc.Node.prototype.setRotation,{x:(void 0).node.rotationX+t,y:(void 0).node.rotationY+i},{rotationX:"+=",rotationY:"+="}).action()};t.exports={shackAction:function(e,t){var i=cc.moveBy(e,t,t),o=cc.moveBy(e,-t,-t),n=cc.moveBy(.8*e,.8*t,.8*t),c=cc.moveBy(.8*e,.8*-t,.8*-t),a=cc.moveBy(.6*e,.6*t,.6*t),s=cc.moveBy(.6*e,.6*-t,.6*-t),r=cc.moveBy(.4*e,.4*t,.4*t),l=cc.moveBy(.4*e,.4*-t,.4*-t),h=cc.moveBy(.2*e,.2*t,.2*t),u=cc.moveBy(.2*e,.2*-t,.2*-t);return cc.sequence(i,o,n,c,a,s,r,l,h,u)},blinkAction:function(e){return cc.repeatForever(cc.sequence(cc.fadeOut(e),cc.fadeIn(e)))},pageTurning:function(e,t,i){switch(i){case 0:e.runAction(cc.fadeOut(.6)),t.runAction(cc.delayTime(.6),cc.fadeIn(.6),cc.sequence(cc.callFunc(function(){e.active=!1},this,e)));break;case 1:t.scaleX=0,e.runAction(cc.scaleTo(.6,0,1)),t.runAction(cc.sequence(cc.delayTime(.6),cc.callFunc(function(){e.active=!1},this,e),cc.scaleTo(.6,1,1)))}},heartBeat:function(){cc.scaleTo(.2,1.2).easing(cc.easeElasticInOut()),cc.scaleTo(.2,1).easing(cc.easeElasticInOut()),cc.rotateTo(.1,45),cc.rotateTo(.2,-45),cc.rotateTo(.1,0)},getMoveOutofScreenActive:function(e,t,i,o){switch(e){case 0:return cc.moveBy(o,0,i);case 1:return cc.moveBy(o,t,0);case 2:return cc.moveBy(o,0,-i);case 3:return cc.moveBy(o,-t,0)}},popOut:function(e){return cc.scaleTo(e,1).easing(cc.easeBackOut(2))},popIn:function(e){return cc.scaleTo(e,.5).easing(cc.easeBackIn(2))},getMoveInScreenActive:function(e,t,i,o){switch(e){case 0:return cc.moveBy(o,0,-i);case 1:return cc.moveBy(o,-t,0);case 2:return cc.moveBy(o,0,i);case 3:return cc.moveBy(o,t,0)}},rockAction:function(e,t){var o,n=i(e,t,t),c=i(e,-2*t,-2*t),a=i(.8*e,1.6*t,1.6*t),s=i(.6*e,-2*t*.6,-2*t*.6),r=i(.4*e,.8*t,.8*t),l=(o=.2*e,cc.tween(o).to(cc.Node.prototype.setRotation,{x:0,y:0}).action());return cc.sequence(n,c,a,s,r,l)}},cc._RF.pop()},{}],building:[function(e,t){"use strict";cc._RF.push(t,"398fcZTj9dDiob4+zBV4owr","building"),cc.Class({extends:cc.Component,properties:{},init:function(){}}),cc._RF.pop()},{}],cell:[function(e,t){"use strict";cc._RF.push(t,"dbc3cQxtHpPj77TncyB18gQ","cell"),cc.Class({extends:cc.Component,properties:{_status:0,_itemType:0,warningSprite:cc.Sprite,lightSprite:cc.Sprite},init:function(e,t,i,o,n){this._game=e,this._status=1,n=n||{x:t.x,y:t.y},this._itemType=o||0,this.warningType=0,this.isPush=!1,this.bindEvent(),this.color=t.color||Math.ceil(4*Math.random()),this.colorSprite=this.node.getChildByName("color").getComponent(cc.Sprite),this.colorSprite.spriteFrame=o?e.propSpriteFrame[4*(o-1)+this.color-1]:this._game.blockSprite[this.color-1],this.warningSprite.spriteFrame="",this._width=i,this._controller=e._controller,this.lightSprite.node.active=!1,this.node.width=this.node.height=i,this.startTime=t.startTime,this.iid=t.y,this.jid=t.x,this.node.x=-(365-e.gap-i/2)+n.x*(i+e.gap),this.node.y=365-e.gap-i/2-n.y*(i+e.gap),this.node.angle=0,this.playStartAction()},onWarning:function(e){this.warningSprite.spriteFrame=this._game.warningSpriteFrame[e-1]||"",this.warningType=e,cc.blink(1,10)},warningInit:function(){this.warningSprite.spriteFrame="",this.isPush=!1},growInit:function(){this.growType=0,this.colorSprite.node.height=this.colorSprite.node.width=this._width,this.colorSprite.node.y=this.colorSprite.node.x=0},grow:function(e){switch(e){case 1:2!=this.growType&&(this.colorSprite.node.height+=2*this._game.gap,this.colorSprite.node.y+=this._game.gap,this.growType=1);break;case 2:2!=this.growType&&(this.colorSprite.node.height+=2*this._game.gap,this.colorSprite.node.y-=this._game.gap,this.growType=1);break;case 3:1!=this.growType&&(this.colorSprite.node.width+=2*this._game.gap,this.colorSprite.node.x-=this._game.gap,this.growType=2);break;case 4:1!=this.growType&&(this.colorSprite.node.width+=2*this._game.gap,this.colorSprite.node.x+=this._game.gap,this.growType=2)}},bindEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouched,this)},onTouched:function(e,t,i,o){var n=this;if(o)setTimeout(function(){n.onTouched(e,!1,i)},o);else{if(t="null"==JSON.stringify(t)||t,i=i||!1,1==this._status&&1==i)return this._status=2,void this.playDieAction().then(function(){n.onBlockPop(e,t,i)});if(e.type){if(this.isSingle&&this._itemType<=1){this.node.scale=1,this._game._score.tipBox.init(this._game._score,3);var c=cc.scaleTo(.1,1.1,.9),a=cc.scaleTo(.3,1).easing(cc.easeBackOut(2)),s=cc.sequence(c,a);return void this.node.runAction(s)}e=this.color,1==this._status&&1==this._game._status&&this.color==e&&(this._game.onUserTouched(this.iid,this.jid,this._itemType,this.color,this.warningType,{x:this.node.x,y:this.node.y}),this._game._score.onStep(-1).then(function(t){t&&n.playDieAction().then(function(){n.onBlockPop(e,null,null)})}))}else 1==this._status&&5==this._game._status&&this.color==e&&this.playDieAction().then(function(){n.onBlockPop(e,null,null)})}},onBlockPop:function(e,t,i){t="null"==JSON.stringify(t)||t,i=i||!1,this._game.checkNeedFall(),this._game._status=5,this._controller.musicMgr.onPlayAudio(0),0!=this._itemType&&this._game.onItem(this._itemType,e,{x:this.node.x,y:this.node.y}),this._game._score.addScore(cc.v2(this.node.x,this.node.y-this.node.width+this._game.gap),3==this._itemType?this._game._controller.config.json.propConfig[2].score:null),t&&(this.iid-1>=0&&this._game.map[this.iid-1][this.jid].getComponent("cell").onTouched(e),this.iid+1<this._game.rowNum&&this._game.map[this.iid+1][this.jid].getComponent("cell").onTouched(e),this.jid-1>=0&&this._game.map[this.iid][this.jid-1].getComponent("cell").onTouched(e),this.jid+1<this._game.rowNum&&this._game.map[this.iid][this.jid+1].getComponent("cell").onTouched(e))},playFallAction:function(e,t){var i=this;this._status=0,t&&(this.iid=t.y,this.jid=t.x);var o=cc.moveBy(.25,0,-e*(this._game.gap+this._game.blockWidth)).easing(cc.easeBounceOut(5/e)),n=cc.sequence(o,cc.callFunc(function(){i._status=1},this));this.node.runAction(n)},playStartAction:function(){var e=this;this.node.scaleX=0,this.node.scaleY=0;var t=cc.scaleTo(.8/this._game.animationSpeed,1,1).easing(cc.easeBackOut()),i=cc.sequence(t,cc.callFunc(function(){e._status=1},this));this.startTime?setTimeout(function(){e.node.runAction(i)},this.startTime/1):this.node.runAction(i)},playDieAction:function(){var e=this,t=this;return clearTimeout(this.surfaceTimer),this.node.stopAllActions(),this._status=2,this.node.scaleX=1,this.node.scaleY=1,new Promise(function(i){var o;if(e.warningSprite.spriteFrame)var n=cc.scaleTo(.2/t._game.animationSpeed,1.1),c=cc.moveTo(.2/t._game.animationSpeed,e._game.target.x,e._game.target.y),a=cc.scaleTo(.2,0),s=cc.sequence(n,cc.callFunc(function(){i("")},e),cc.spawn(c,a));else o=cc.scaleTo(.2/t._game.animationSpeed,0,0),s=cc.sequence(o,cc.callFunc(function(){i("")},e));t.node.runAction(s)})},surfaceAction:function(e){var t=this;this.surfaceTimer=setTimeout(function(){var e=cc.scaleTo(.4/t._game.animationSpeed,.8,.8),i=cc.scaleTo(.4/t._game.animationSpeed,1,1);t.node.runAction(cc.sequence(e,i))},e)},generatePropAction:function(){},generateItem:function(e){this._itemType=e}}),cc._RF.pop()},{}],character:[function(e,t){"use strict";cc._RF.push(t,"33cd23uZ6JD4pTLpKtgjbbS","character"),cc.Class({extends:cc.Component,properties:{levelUp1:cc.Node,levelUp2:cc.Node,character:cc.Node,fail:cc.Node},start:function(){cc.assetManager.loadBundle("game",function(e,t){self.bundle=t})},onWalk:function(e){e.playAnimation("walk",-1)},onLevelUp:function(){},onSuccessDialog:function(e){this.showCharacter(e,this.levelUp2)},onLevelUpBtn:function(e){this.showHeroCharacter(e)},onFail:function(e){this.showCharacter(e,this.fail)},initStartPage:function(){},showHeroCharacter:function(e,t,i){t=t||this.character;var o="heroPrefab/heroSpine"+e;this.loadHeroPrefab(o,t,i)},loadHeroPrefab:function(e,t,i){var o=this;self.heroPrefab&&(self.heroPrefab.destroy(),self.heroPrefab=null),self.bundle.load(e,cc.Prefab,function(n,c){n?console.error("\u52a0\u8f7d Prefab \u5931\u8d25\uff1a",n):(self.heroPrefabPath=e,self.heroPrefab=cc.instantiate(c),o.node.addChild(self.heroPrefab),self.heroPrefab.setParent(t),self.heroPrefab.setPosition(0,0,0),self.heroPrefab.color=i||cc.Color.WHITE)})},showCharacter:function(e,t,i){t=t||this.character;var o="heroPrefab/heroSpine"+e;this.loadAvatarPrefab(o,t,i)},loadPrefab:function(e,t,i){var o=this;self.bundle.load(e,cc.Prefab,function(e,n){if(e)console.error("\u52a0\u8f7d Prefab \u5931\u8d25\uff1a",e);else{var c=cc.instantiate(n);o.node.addChild(c),c.setParent(t),c.setPosition(0,0,0),c.color=i||cc.Color.WHITE}})},showAvatarCharacter:function(e,t,i){t=t||this.character;var o="heroPrefab/heroSpine"+e;this.loadAvatarPrefab(o,t,i)},loadAvatarPrefab:function(e,t,i){var o=this;self.heroAvatarPrefab&&(self.heroAvatarPrefab.destroy(),self.heroAvatarPrefab=null),self.heroAvatarPrefabPath!=e&&self.bundle.load(e,cc.Prefab,function(n,c){n?console.error("\u52a0\u8f7d Prefab \u5931\u8d25\uff1a",n):(self.heroAvatarPrefabPath=e,self.heroAvatarPrefab=cc.instantiate(c),o.node.addChild(self.heroAvatarPrefab),self.heroAvatarPrefab.setParent(t),self.heroAvatarPrefab.setPosition(0,0,0),self.heroAvatarPrefab.color=i||cc.Color.WHITE)})}}),cc._RF.pop()},{}],check:[function(e,t){"use strict";cc._RF.push(t,"a3721/aOY1GFrIWHHBzYGsi","check"),cc.Class({extends:cc.Component,properties:{groups:[],map:[],mapLength:8},init:function(e){this._game=e,this.map=e.map,this.mapLength=e.rowNum;for(var t=0;t<this.mapLength;t++){this.groups[t]=[];for(var i=0;i<this.mapLength;i++)this.map[t][i],this.map[t][i].getComponent("cell").isSingle=!1,this.map[t][i].getComponent("cell").warningInit(),this.groups[t][i]=[]}},check:function(e){var t=e._controller.config.json.propConfig;this._game=e,this.map=e.map,this.mapLength=e.rowNum;for(var i=999,o=0;o<t.length;o++)i=t[o].min<i?t[o].min:i;for(var n=0;n<this.mapLength;n++)for(var c=0;c<this.mapLength;c++){this.pushPop(this.map[n][c],n,c);var a=this.map[n][c],s=a.getComponent("cell").iid,r=a.getComponent("cell").jid,l=!0;if(s-1>=0&&this.map[s-1][r].getComponent("cell").color==a.getComponent("cell").color&&(l=!1),s+1<this.mapLength&&this.map[s+1][r].getComponent("cell").color==a.getComponent("cell").color&&(l=!1),r-1>=0&&this.map[s][r-1].getComponent("cell").color==a.getComponent("cell").color&&(l=!1),r+1<this.mapLength&&this.map[s][r+1].getComponent("cell").color==a.getComponent("cell").color&&(l=!1),this.map[n][c].getComponent("cell").isSingle=l,console.log(n,c,this.map[n][c].getComponent("cell").isSingle,this.map[n][c].getComponent("cell").color),this.groups[n][c].length>=i)for(var h=0;h<t.length;h++)this.groups[n][c].length<=t[h].max&&this.groups[n][c].length>=t[h].min&&this.warning(t[h].type,this.groups[n][c])}},pushPop:function(e,t,i){e.getComponent("cell").isPush=!0,this.groups[t][i].push(e);var o=e.getComponent("cell").iid,n=e.getComponent("cell").jid;o-1>=0&&(this.map[o-1][n].getComponent("cell").isPush||this.map[o-1][n].getComponent("cell").color!=e.getComponent("cell").color||this.pushPop(this.map[o-1][n],t,i)),o+1<this.mapLength&&(this.map[o+1][n].getComponent("cell").isPush||this.map[o+1][n].getComponent("cell").color!=e.getComponent("cell").color||this.pushPop(this.map[o+1][n],t,i)),n-1>=0&&(this.map[o][n-1].getComponent("cell").isPush||this.map[o][n-1].getComponent("cell").color!=e.getComponent("cell").color||this.pushPop(this.map[o][n-1],t,i)),n+1<this.mapLength&&(this.map[o][n+1].getComponent("cell").isPush||this.map[o][n+1].getComponent("cell").color!=e.getComponent("cell").color||this.pushPop(this.map[o][n+1],t,i))},warning:function(e,t){t.map(function(t){t.getComponent("cell").onWarning(e)})}}),cc._RF.pop()},{}],controller:[function(e,t){"use strict";cc._RF.push(t,"feefcb/VXtFp4L+Zqa6CrBZ","controller"),cc.Class({extends:cc.Component,properties:{musicMgr:e("musicMgr"),game:e("game"),pageMgr:e("pageMgr"),social:e("social"),config:cc.JsonAsset,gameData:cc.JsonAsset,scoreMgr:e("score"),totalRank:cc.Node,groupRank:cc.Node,startPage:e("startPage"),navNode:cc.Node,pictorial:cc.Node,helpPage:cc.Node},start:function(){this.totalRank.active=!1,this.pictorial.active=!1,this.game.init(this),this.social.node.active&&this.social.init(this),this.musicMgr.init(),this.lateStart()},lateStart:function(){this.social.node.active&&this.social.closeBannerAdv(),this.pictorial.getComponent("pictorial").init(this),this.startPage.bannerNode.scale=1,this.pageMgr.onOpenPage(0)},onGameStartButton:function(){var e=this;this.social.node.active&&this.social.openBannerAdv(),this.startPage.showAnimation().then(function(){e.gameStart()})},gameStart:function(){this.pageMgr.onOpenPage(1),this.game.gameStart()},closeRank:function(){this.totalRank.active=!1,this.navNode.active=!0,this.social.node.active&&this.social.closeRank()},openRank:function(){this.totalRank.active=!0,this.navNode.active=!1,this.social.node.active&&this.social.showRank()},openGroupRank:function(){this.groupRank.active=!0,this.social.node.active&&(this.social.showGroupRank(),this.pageMgr.addPage(6))},closeGroupRank:function(){this.groupRank.active=!1,this.navNode.active=!0,this.social.node.active&&(this.social.closeGroupRank(),this.pageMgr.removePage(6))},openPictorial:function(){this.pictorial.active=!0},closePictorial:function(){this.pictorial.active=!1},openHelpPage:function(){this.helpPage.active=!0},closeHelpPage:function(){this.helpPage.active=!1}}),cc._RF.pop()},{game:"game",musicMgr:"musicMgr",pageMgr:"pageMgr",score:"score",social:"social",startPage:"startPage"}],game:[function(e,t){"use strict";cc._RF.push(t,"47c77yOeKpPiJVINXipHohs","game");var i=e("action");cc.Class({extends:cc.Component,properties:{_status:0,blockPrefab:cc.Prefab,blockSprite:[cc.SpriteFrame],warningSpriteFrame:[cc.SpriteFrame],propSpriteFrame:[cc.SpriteFrame],checkMgr:e("check"),revivePage:cc.Node},start:function(){this.bindNode(),this.generatePool(),this.loadRes()},loadRes:function(){},init:function(e){this._controller=e,this._score=e.scoreMgr,this.rowNum=e.config.json.rowNum,this.gap=e.config.json.gap,this.animationSpeed=e.config.json.gap,this.blockWidth=(730-(this.rowNum+1)*this.gap)/this.rowNum,this.reviveTimer=null},bindNode:function(){this.blocksContainer=this.node.getChildByName("map")},gameStart:function(){var e=this;this.recoveryAllBlocks().then(),this._score.init(this),this.mapSet(this.rowNum).then(function(){e._status=1})},mapSet:function(e){var t=this;this.map=new Array;var i=this,o=Math.floor(Math.random()*e),n=Math.floor(Math.random()*e),c=Math.floor(1+Math.random()*(e-1))-1;o==c&&c++;var a=Math.floor(Math.random()*e);return new Promise(function(s){for(var r=0;r<e;r++){t.map[r]=new Array;for(var l=0;l<e;l++){var h=r==o&&l==n?1:r==c&&l==a?2:0;i.map[r][l]=i.instantiateBlock(i,{x:l,y:r,width:i.blockWidth,startTime:(r+l+1)*i._controller.config.json.startAnimationTime/e*2},i.blocksContainer,h)}}t.checkMgr.init(t),setTimeout(function(){s("200 OK"),t.checkMgr.check(t)},i._controller.config.json.startAnimationTime*e/2/1)})},checkNeedFall:function(){var e=this;this.checkNeedFallTimer&&clearTimeout(this.checkNeedFallTimer),this.checkNeedFallTimer=setTimeout(function(){5==e._status&&(e._status=4,e.onFall())},300)},onFall:function(){var e=this;this.checkGenerateProp(this._score.chain).then(function(){for(var t=0,i=e.rowNum-1;i>=0;i--){t=0;for(var o=e.rowNum-1;o>=0;o--)2==e.map[o][i].getComponent("cell")._status?(e.blockPool.put(e.map[o][i]),e.map[o][i]=null,t++):0!=t&&(e.map[o+t][i]=e.map[o][i],e.map[o][i]=null,e.map[o+t][i].getComponent("cell").playFallAction(t,{x:i,y:o+t}));for(var n=0;n<t;n++)e.map[n][i]=e.instantiateBlock(e,{x:i,y:n,width:e.blockWidth,startTime:null},e.blocksContainer,"",{x:i,y:-t+n}),e.map[n][i].getComponent("cell").playFallAction(t,null)}setTimeout(function(){e.checkMgr.init(e),e.checkMgr.check(e),e._status=1},250)})},gameOver:function(){this._status=3,this._controller.pageMgr.addPage(2),this._controller.pageMgr.addPage(4),this._controller.social.node.active&&this._controller.social.closeBannerAdv()},askRevive:function(){var e=this;this._controller.pageMgr.addPage(2),this._controller.pageMgr.addPage(5),this.revivePage.active=!0,this.revivePage.getChildByName("askRevive").active=!0,this.revivePage.getChildByName("successRevive").active=!1,this.rangeSprite=this.revivePage.getChildByName("askRevive").getChildByName("numBg").getChildByName("sprite").getComponent(cc.Sprite),this.rangeSprite.fillRange=1,this.isRangeAction=!0;var t=this.revivePage.getChildByName("askRevive").getChildByName("numBg").getChildByName("num").getComponent(cc.Label);t.string=9,this.reviveTimer&&clearInterval(this.reviveTimer),this.reviveTimer=setInterval(function(){+t.string>0?(t.string--,e.rangeSprite.fillRange=1):e.onSkipRevive()},1e3)},onReviveButton:function(){clearInterval(this.reviveTimer),this.isRangeAction=!1,this._controller.social.node.active?this._controller.social.onReviveButton(1):this.showReviveSuccess()},showReviveSuccess:function(){this.revivePage.getChildByName("askRevive").active=!1,this.revivePage.getChildByName("successRevive").active=!0},onReviveCertainBtn:function(){this._controller.pageMgr.removePage(2),this.revivePage.active=!1,this._status=1,this._score.onRevive()},update:function(){this.isRangeAction&&(this.rangeSprite.fillRange-=1/60)},onSkipRevive:function(){clearInterval(this.reviveTimer),this._controller.pageMgr.pages[5].active=!1,this._score.onGameOver(!0),this.isRangeAction=!1},restart:function(){var e=this;this._controller.pageMgr.onOpenPage(1),this.recoveryAllBlocks().then(function(){e.gameStart()})},onUserTouched:function(e,t,i,o,n,c){this.target={i:e,j:t,color:o,itemType:i,x:c.x,y:c.y,warning:n}},generatePropItem:function(e){var t=this;return new Promise(function(i){t.map[t.target.i][t.target.j]=t.instantiateBlock(t,{x:t.target.j,y:t.target.i,color:t.target.color,width:t.blockWidth,startTime:null},t.blocksContainer,e),setTimeout(function(){i()},300)})},checkGenerateProp:function(){var e=this;return new Promise(function(t){e.target.warning&&e.generatePropItem(e.target.warning).then(function(){t()}),t()})},onItem:function(e,t,o){switch(e){case 1:this._score.tipBox.init(this._score,1),this._score.addMult(t,o),this._controller.musicMgr.onDouble();for(var n=0;n<this.rowNum;n++)for(var c=0;c<this.rowNum;c++)if(this.map[n][c]&&1==this.map[n][c].getComponent("cell")._status){var a=Math.sqrt(Math.pow(o.x-this.map[n][c].x,2)+Math.pow(o.y-this.map[n][c].y,2));0!=a&&this.map[n][c].getComponent("cell").surfaceAction(a)}break;case 2:this._score.tipBox.init(this._score,2),this.node.runAction(i.shackAction(.1,10)),this._controller.social.node.active&&this._controller.social.onShakePhone(),this.isPropChain=!0,this._controller.musicMgr.onBoom();for(var s=0;s<this.rowNum;s++)for(var r=0;r<this.rowNum;r++)this.map[s][r]&&this.map[s][r].getComponent("cell").color==t&&this.map[s][r]&&2!=this.map[s][r].getComponent("cell")._status?this.map[s][r].getComponent("cell").onTouched(t,!1,!0):this.map[s][r].runAction(i.rockAction(.2,10));break;case 3:this._score.tipBox.init(this._score,4),this._controller.musicMgr.onDouble();for(var l=0;l<this.rowNum;l++)for(var h=0;h<this.rowNum;h++)if(this.map[l][h]&&1==this.map[l][h].getComponent("cell")._status){var u=Math.sqrt(Math.pow(o.x-this.map[l][h].x,2)+Math.pow(o.y-this.map[l][h].y,2));0!=u&&this.map[l][h].getComponent("cell").surfaceAction(u)}this._score.onStep(3).then();break;case 4:this._score.tipBox.init(this._score,5),this.isPropChain=!0,this._controller.musicMgr.onMagic();for(var p=0;p<this.rowNum;p++)for(var g=0;g<this.rowNum;g++)if(this.map[p][g]&&this.map[p][g].getComponent("cell").isSingle&&this.map[p][g]&&2!=this.map[p][g].getComponent("cell")._status){var m=Math.sqrt(Math.pow(o.x-this.map[p][g].x,2)+Math.pow(o.y-this.map[p][g].y,2));this.map[p][g].getComponent("cell").onTouched(t,!1,!0,m),console.log("\u9b54\u6cd5\u68d2\u89e6\u53d1\u7684\u70b9",p,g,this.map[p][g].getComponent("cell").color,this.map[p][g].getComponent("cell").isSingle)}}},generatePool:function(){this.blockPool=new cc.NodePool;for(var e=0;e<Math.pow(this.rowNum,2);e++){var t=cc.instantiate(this.blockPrefab);this.blockPool.put(t)}},instantiateBlock:function(e,t,i,o,n){o=o||0;var c=null;return(c=e.blockPool&&e.blockPool.size()>0?e.blockPool.get():cc.instantiate(e.blockPrefab)).parent=i,c.scale=1,c.x=0,c.y=0,c.getComponent("cell").init(e,t,this.blockWidth,o,n),c},recoveryAllBlocks:function(){var e=this;return new Promise(function(t){var i=e.blocksContainer.children;if(0!=i.length){for(var o=i.length,n=0;n<o;n++)e.blockPool.put(i[0]);for(var c=0;c<e.rowNum;c++)for(var a=0;a<e.rowNum;a++)e.map[c][a]=null}t("")})}}),cc._RF.pop()},{action:"action",check:"check"}],musicMgr:[function(e,t){"use strict";cc._RF.push(t,"0fd3emgDv1Pc6rR7NiVJ4q/","musicMgr"),cc.Class({extends:cc.Component,properties:{volume:1,audios:[cc.AudioSource],audioPrefab:cc.Prefab,bgMusic:cc.AudioSource,winAudio:cc.AudioSource,doubleAudio:cc.AudioSource,boomAudio:cc.AudioSource,magicAudio:cc.AudioSource},init:function(){this.audio=[],this.instanceAudio(),this.createMusicPool()},createMusicPool:function(){},instanceAudio:function(){},changeVol:function(e){var t=this;this.volume=e,this.audios.forEach(function(i,o){t.audios[o].volume=e})},onPlayAudio:function(e){if(!this.audios[e]||this.audios[e].isPlaying)if(this.audios[e+1])this.onPlayAudio(e+1);else{var t=null;(t=this.musicPool&&this.musicPool.size()>0?this.musicPool.get():cc.instantiate(this.audioPrefab)).parent=this.node,this.audios[e+1]=t.getComponent(cc.AudioSource),t.getComponent(cc.AudioSource).play()}else this.audios[e].rewind(),this.audios[e].play()},pauseBg:function(){this.bgMusic.pause()},resumeBg:function(){this.bgMusic.resume()},start:function(){},checkBg:function(){},onWin:function(){this.winAudio.rewind(),this.winAudio.play()},onDouble:function(){this.doubleAudio.rewind(),this.doubleAudio.play()},onBoom:function(){this.boomAudio.rewind(),this.boomAudio.play()},onMagic:function(){this.magicAudio.rewind(),this.magicAudio.play()}}),cc._RF.pop()},{}],pageMgr:[function(e,t){"use strict";cc._RF.push(t,"a1bb7xaDvtHXLTuIo0MRIEu","pageMgr");var i=e("action");cc.Class({extends:cc.Component,properties:{status:0,pages:[cc.Node]},start:function(){this.lateStart()},lateStart:function(){this.width=cc.winSize.width,window.width=this.width,this.height=cc.winSize.height,window.height=this.height,this.adoptCanvas()},adoptCanvas:function(){var e=cc.director.getScene().getChildByName("Canvas").getComponent(cc.Canvas),t=e.designResolution.height/e.designResolution.width;this.height/this.width>t?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1)},onOpenPage:function(e){this.closeAllPages(),this.pages[e].active=!0},addPage:function(e){this.pages[e].scale=.5,this.pages[e].active=!0,this.pages[e].runAction(i.popOut(.5))},removePage:function(e){var t=this;this.pages[e].runAction(cc.sequence(i.popIn(.5),cc.callFunc(function(){t.pages[e].active=!1},this)))},onButtonOpenPage:function(e,t){this.onOpenPage(t)},onButtonAddPage:function(e,t){this.addPage(t)},onButtonRemovePage:function(e,t){this.removePage(t)},closeAllPages:function(){this.pages.forEach(function(e){e.active=!1})}}),cc._RF.pop()},{action:"action"}],pictorial:[function(e,t){"use strict";cc._RF.push(t,"0e40bxKGytLiJwQbi3sCcB6","pictorial"),cc.Class({extends:cc.Component,properties:{container:cc.Node,avatar:cc.Node,prefab:cc.Prefab},init:function(e){if(this._controller=e,e.social.node.active){var t=e.social.getHighestLevel();t?(this.showAvatar(t),this.loadContainer(+t)):(this.avatar.active=!1,this.loadContainer(1))}else this.avatar.active=!1},showAvatar:function(e){var t=this;this.avatar.active=!0;var i=this._controller.gameData.json.levelData[+e-1],o=this._controller.social.getHighestScore();this.avatar.getChildByName("name").getComponent(cc.Label).string="\u5386\u53f2\u6700\u9ad8:"+i.name,this.avatar.getChildByName("score").getComponent(cc.Label).string="\u5206\u6570"+o,setTimeout(function(){t._controller.scoreMgr.characterMgr.showAvatarCharacter(+e,t.avatar.getChildByName("db"))},1e3)},loadContainer:function(e){var t=this,i=this._controller.gameData.json.levelData;this.clearContainer(),setTimeout(function(){for(var o=0;o<i.length;o++){var n=cc.instantiate(t.prefab);n.parent=t.container,t.initCard(n,i[o],o,e)}},1e3)},clearContainer:function(){this.container.children.map(function(e){e.destroy()})},initCard:function(e,t,i,o){i<o?(e.getChildByName("name").getComponent(cc.Label).string=t.name,e.getChildByName("db").color=cc.Color.WHITE,e.getChildByName("giftStep").getComponent(cc.Label).string="\u5f00\u5c40\u5956\u52b1"+t.giftStep+"\u6b65",this._controller.scoreMgr.characterMgr.showCharacter(i+1,e.getChildByName("db"))):(e.getChildByName("name").getComponent(cc.Label).string="???",e.getChildByName("giftStep").getComponent(cc.Label).string="\u5f00\u5c40\u5956\u52b1???\u6b65",e.getChildByName("db").color=cc.Color.BLACK,this._controller.scoreMgr.characterMgr.showCharacter(i+1,e.getChildByName("db"),cc.Color.BLACK))}}),cc._RF.pop()},{}],progress:[function(e,t){"use strict";cc._RF.push(t,"b6ca61w/99BeLZm6RuqYPHb","progress"),cc.Class({extends:cc.Component,properties:{usualNode:cc.Node,currentLabel:cc.Label,maxLabel:cc.Label,progress:cc.ProgressBar,nameLabel:cc.Label,levelLabel:cc.Label,limitNode:cc.Node,limitScore:cc.Label},init:function(e,t,i){i<15?(this.limitNode.active=!1,this.usualNode.active=!0,this.maxLabel.string=t.score,this.currentLabel.string=e,this.progress.progress=e/t.score,this.levelLabel.string="lv"+i):(this.limitNode.active=!0,this.usualNode.active=!1,this.limitScore.string=e,this.progress.progress=1)}}),cc._RF.pop()},{}],scoreCell:[function(e,t){"use strict";cc._RF.push(t,"0c8daIRUMtEXqcHO2bidMh4","scoreCell"),cc.Class({extends:cc.Component,properties:{label:cc.Label},init:function(e,t,i){var o=this;this._score=e,this.node.x=i.x,this.node.y=i.y,this.label.string=t,this.node.scale=1,this.label.node.x=0,this.label.node.y=0,this.label.node.scale=1;var n=cc.scaleTo(.1,1.2,1.2),c=cc.moveBy(.1,0,30),a=cc.moveTo(.2,0,0),s=cc.scaleTo(.2,.5,.5),r=cc.spawn(n,c),l=cc.spawn(a,s),h=cc.sequence(r,l,cc.callFunc(function(){e.scorePool.put(o.node)},this));this.node.runAction(h)}}),cc._RF.pop()},{}],scoreParticle:[function(e,t){"use strict";cc._RF.push(t,"b3ac7z+dNhMxry0R3HbylFr","scoreParticle"),cc.Class({extends:cc.Component,properties:{particle:cc.ParticleSystem},init:function(e,t,i){var o=this;this._score=e,this.node.x=t.x,this.node.y=t.y,this.node.active=!0,this.node.scale=1,setTimeout(function(){o.node.active=!1,o.particle.stopSystem()},i/1)}}),cc._RF.pop()},{}],score:[function(e,t){"use strict";cc._RF.push(t,"72f7acBwR1I474pejqfLV0j","score");var i=e("action");cc.Class({extends:cc.Component,properties:{scorePrefab:cc.Prefab,scoreParticlePrefab:cc.Prefab,mainScoreLabel:cc.Label,successDialog:e("successDialog"),characterMgr:e("character"),failDialog:cc.Node,multPropPrefab:cc.Prefab,chainSpriteFrameArr:[cc.SpriteFrame],stepAniLabel:cc.Label,tipBox:e("tipBox")},init:function(e){if(this._game=e,this._controller=e._controller,this.score=0,this.leftStep=this._controller.config.json.originStep,this.chain=1,this.level=1,this.reviveTime=0,this.closeMultLabel(),this.levelData=e._controller.gameData.json.levelData,this.nameLabel.string="\u840c\u5fc3\u60a6",this.progressBar.init(0,this.levelData[this.level-1],this.level),this.leftStepLabel.string=this.leftStep,this.stepAniLabel.node.runAction(cc.hide()),this.scoreTimer=[],this.currentAddedScore=0,this.mainScoreLabel.node.active=!1,this.characterMgr.showHeroCharacter(this.level),this.hideChainSprite(),this.tipBox.init(this,0),this._controller.social.node.active){var t=this._controller.social.getHighestLevel();t&&this.onStep(this.levelData[+t-1].giftStep)}},start:function(){this.generatePool(),this.bindNode()},generatePool:function(){this.scorePool=new cc.NodePool;for(var e=0;e<20;e++){var t=cc.instantiate(this.scorePrefab);this.scorePool.put(t)}this.scoreParticlePool=new cc.NodePool;for(var i=0;i<20;i++){var o=cc.instantiate(this.scoreParticlePrefab);this.scoreParticlePool.put(o)}this.multPropPool=new cc.NodePool;for(var n=0;n<3;n++){var c=cc.instantiate(this.multPropPrefab);this.multPropPool.put(c)}},instantiateScore:function(e,t,i){var o=null;(o=e.scorePool&&e.scorePool.size()>0?e.scorePool.get():cc.instantiate(e.scorePrefab)).parent=this.scoreContainer,o.getComponent("scoreCell").init(e,t,i);var n=null;(n=e.scoreParticlePool&&e.scoreParticlePool.size()>0?e.scoreParticlePool.get():cc.instantiate(e.scoreParticlePrefab)).parent=this.scoreContainer,n.getComponent("scoreParticle").init(e,i,this._controller.config.json.scoreParticleTime)},bindNode:function(){this.leftStepLabel=this.node.getChildByName("UI").getChildByName("leftStepNode").getChildByName("Label").getComponent(cc.Label),this.progressBar=this.node.getChildByName("UI").getChildByName("scoreNode").getChildByName("progressBar").getComponent("progress"),this.scoreContainer=this.node.getChildByName("UI").getChildByName("scoreGroup"),this.multLabel=this.mainScoreLabel.node.getChildByName("mult").getComponent(cc.Label),this.nameLabel=this.node.getChildByName("UI").getChildByName("scoreNode").getChildByName("progressBar").getChildByName("name").getComponent(cc.Label),this.chainSprite=this.node.getChildByName("UI").getChildByName("chainSprite").getComponent(cc.Sprite),this.failScore=this.failDialog.getChildByName("info").getChildByName("score").getComponent(cc.Label),this.failName=this.failDialog.getChildByName("info").getChildByName("level").getComponent(cc.Label),this.failSprite=this.failDialog.getChildByName("info").getChildByName("sprite").getComponent(cc.Sprite),this.failHighScore=this.failDialog.getChildByName("info").getChildByName("highScore").getComponent(cc.Label)},onStep:function(e){var t=this;return this.leftStep+=e,new Promise(function(i){t.leftStep<0?(t.leftStep=0,t.onGameOver(),i(!1)):i(!0),t.leftStepLabel.string=t.leftStep,e>0&&t.showStepAni(e)})},addScore:function(e,t){var i=this;t=t||this._controller.config.json.scoreBase,this.chainTimer&&clearTimeout(this.chainTimer),this.initCurrentScoreLabel(),this.chainTimer=setTimeout(function(){i.onCurrentScoreLabel(i.currentAddedScore,{x:-60,y:355},cc.callFunc(function(){i.score+=i.currentAddedScore*i.multiple,i.checkLevelUp(),i.chain=1,i.closeMultLabel(),i.hideChainSprite(),i.currentAddedScore=0,i.mainScoreLabel.node.active=!1},i))},500);var o=t==this._controller.config.json.scoreBase?t+10*(this.chain>16?16:this.chain-1):t;this.currentAddedScore+=o,this.mainScoreLabel.string=this.currentAddedScore,this.instantiateScore(this,o,e),this.chain++,this.checkChain()},checkChain:function(){var e=this;this.checkChainTimer&&clearTimeout(this.checkChainTimer),this.checkChainTimer=setTimeout(function(){for(var t=e._controller.config.json.chainConfig,i=0;i<t.length;i++)if(e.chain<=t[i].max&&e.chain>=t[i].min)return void e.showChainSprite(i)},200)},showChainSprite:function(e){this.chainSprite.spriteFrame=this.chainSpriteFrameArr[e],this.chainSprite.node.scale=.5,this.chainSprite.node.active=!0,this.chainSprite.node.runAction(i.popOut(.3))},hideChainSprite:function(){this.chainSprite.node.active=!1},checkLevelUp:function(){this.level<this.levelData.length&&this.score>=this.levelData[this.level-1].score&&(this.level++,this.level>this.levelData.length+1?this.levelLimit():this.onLevelUp()),this.progressBar.init(this.score,this.levelData[this.level-1],this.level)},addMult:function(){this.multiple<this._controller.config.json.maxMultiple&&(this.multiple*=2,this.showMultLabel())},closeMultLabel:function(){this.multiple=1,this.multLabel.node.active=!1},showMultLabel:function(){this.multLabel.node.scale=.5,this.multLabel.string=this.multiple,this.multLabel.node.active=!0,this.multLabel.node.runAction(i.popOut(.3))},initCurrentScoreLabel:function(){this.mainScoreLabel.node.active=!0,this.mainScoreLabel.node.x=0,this.mainScoreLabel.node.y=0,this.mainScoreLabel.node.scale=1},onCurrentScoreLabel:function(e,t,i){this.mainScoreLabel.string=e;var o=cc.spawn(cc.moveTo(.2,t.x,t.y),cc.scaleTo(.2,.4)).easing(cc.easeBackOut()),n=cc.sequence(o,i);this.mainScoreLabel.node.runAction(n)},onLevelUp:function(){this._controller.pageMgr.addPage(2),this._controller.pageMgr.addPage(3),this._controller.musicMgr.onWin(),this.successDialog.init(this,this.level,this.levelData,this.score),this.characterMgr.onLevelUp(),this.characterMgr.onSuccessDialog(this.level),this._game._status=2,this._controller.social.node.active&&this._controller.social.openBannerAdv()},levelLimit:function(){this.hideNextLevelData()},onLevelUpButton:function(e){var t=this;console.log(e),this.isLevelUp||(this.isLevelUp=!0,setTimeout(function(){t.isLevelUp=!1},500),e=e&&e.currentTarget?1:e||1,this._controller.pageMgr.onOpenPage(1),this.initCurrentScoreLabel(),this.mainScoreLabel.string=this.levelData[this.level-2].step*e,this.characterMgr.onLevelUpBtn(this.level),this.nameLabel.string=this.levelData[this.level-1].name,setTimeout(function(){t.onCurrentScoreLabel(t.levelData[t.level-2].step*e,{x:-248,y:350},cc.callFunc(function(){t.onStep(t.levelData[t.level-2].step*e).then(),t._game._status=1,t.mainScoreLabel.node.active=!1}))},300),this.showNextLevelData(),this.checkLevelUp())},showStepAni:function(e){this.stepAniLabel.string="+"+e,this.stepAniLabel.node.x=-248,this.stepAniLabel.node.y=400,this.stepAniLabel.node.runAction(cc.sequence(cc.toggleVisibility(),cc.moveBy(.6,0,60),cc.toggleVisibility()));var t=cc.sequence(cc.scaleTo(.2,.8),i.popOut(.8));this.leftStepLabel.node.parent.runAction(t)},onGameOver:function(e){e=e||0,3!=this._game._status&&(e||this.reviveTime>=3)?(this._game.gameOver(),this.updateFailPage(),this._controller.social.node.active&&this._controller.social.onGameOver(this.level,this.score)):e||this._game.askRevive()},onDoubleStepBtn:function(){this._controller.social.node.active?this._controller.social.onReviveButton(0):this.onLevelUpButton(2)},onDoubleStep:function(){this.onLevelUpButton(2)},onRevive:function(){this.reviveTime+=1,this.onStep(5).then()},showNextLevelData:function(){this.levelData[this.level]},hideNextLevelData:function(){},updateFailPage:function(){this.failScore.string=" "+this.score,this.characterMgr.onFail(this.level),this.failName.string=this.levelData[this.level-1].name}}),cc._RF.pop()},{action:"action",character:"character",successDialog:"successDialog",tipBox:"tipBox"}],social:[function(e,t){"use strict";cc._RF.push(t,"53b05czD4xGgZ8D0pLpUj9M","social"),cc.Class({extends:cc.Component,properties:{display:cc.Sprite,groupDisplay:cc.Sprite,_isShow:!1},init:function(e){var t=this;this._controller=e,wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return{title:"\u5f00\u5c40\u53ea\u662f\u4e2a\u519c\u6c11\uff0c\u73b0\u5728\u5df2\u7ecf\u505a\u5230\u5bb0\u76f8",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"}}),wx.onAudioInterruptionEnd(function(){e.musicMgr.pauseBg(),e.musicMgr.resumeBg()}),wx.onShow(function(i){1044==i.scene&&(wx.postMessage({message:"group",shareTicket:i.shareTicket}),e.openGroupRank(),t.display.node.active=!1,e.totalRank.active=!1),cc.director.resume()}),wx.onHide(function(){cc.director.pause()}),this.getHighestLevel()},getHighestLevel:function(){return wx.getStorageSync("highLevel")},getHighestScore:function(){return wx.getStorageSync("highScore")},onShareButton:function(){wx.shareAppMessage({title:"\u6211\u7ec8\u4e8e\u6210\u4e3a\u4e86"+this._controller.scoreMgr.levelData[this._controller.scoreMgr.level-1].name+",\u771f\u662f\u5f00\u5fc3",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"})},onUsualShareButton:function(){wx.shareAppMessage({title:"\u53ea\u662f\u4e2a\u519c\u6c11\uff0c\u73b0\u5728\u5df2\u7ecf\u505a\u5230\u5bb0\u76f8",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"})},onShakePhone:function(){wx.vibrateShort()},onGameOver:function(e,t){this.score=t;var i=e,o=t;wx.postMessage({event:"setScore",score:t,level:e}),i=wx.getStorageSync("highLevel"),i=(i=parseInt(i))?i<e?e:i:e,o=(o=wx.getStorageSync("highScore"))?(o=parseInt(o))<t?t:o:t;var n=this._controller.gameData.json.levelData[i-1].name;wx.setStorageSync("highLevel",i+""),wx.setStorageSync("highScore",o+""),this._controller.scoreMgr.failHighScore.string="\u60a8\u7684\u6700\u9ad8\u5206:"+o,(new Array).push({key:"highLevel",value:n},{key:"highScore",value:o+""})},showRank:function(){wx.postMessage({message:"Show",event:"getRank"}),this.display.node.active=!0,this._isShow=!0},closeRank:function(){this.display.node.active=!1,wx.postMessage({message:"Hide"}),this._isShow=!1},showGroupRank:function(){wx.postMessage({message:"Show"}),this.groupDisplay.node.active=!0,this._isShow=!0},closeGroupRank:function(){this.groupDisplay.node.active=!1,wx.postMessage({message:"Hide"}),this._isShow=!1},createImage:function(e,t){var i=wx.createImage();i.onload=function(){var t=new cc.Texture2D;t.initWithElement(i),t.handleLoadedTexture(),e.spriteFrame=new cc.SpriteFrame(t)},i.src=t},update:function(){this._isShow&&(this.display.node.active&&this.display.node.getComponent(cc.WXSubContextView).update(),this.groupDisplay.node.active&&this.groupDisplay.node.getComponent(cc.WXSubContextView).update())},onReviveButton:function(e){var t=this,i=this;this.adType=e,this.audioAd?this.audioAd.show().catch(function(){t.audioAd.load().then(function(){return t.audioAd.show()}).catch(function(e){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a\u5931\u8d25",e.errMsg),i.adType?i._controller.game.onSkipRevive():i._controller.scoreMgr.onLevelUpButton()})}):(this.audioAd=wx.createRewardedVideoAd({adUnitId:"adunit-482148cfeb243378"}),this.audioAd.show().catch(function(){t.audioAd.load().then(function(){return t.audioAd.show()}).catch(function(){i.fakeShare()})}),this.audioAd.onError(function(){i.fakeShare()}),this.audioAd.onClose(function(e){i.adType?e&&e.isEnded||void 0===e?i._controller.game.showReviveSuccess():i._controller.game.askRevive():(e&&e.isEnded||void 0===e)&&i._controller.scoreMgr.onLevelUpButton(2)}))},fakeShare:function(){wx.shareAppMessage({title:"\u6211\u5df2\u7ecf\u73a9\u5230"+this._controller.scoreMgr.score+"\u5206\u4e86\uff0c\u9080\u8bf7\u4f60\u6765\u6311\u6218",imageUrl:"https://mmocgame.qpic.cn/wechatgame/LtJZOjH6Z9ibiaMlpqzldsOf46Q7TZiaysI1fwc4Oj1L3CkbCaJMAMoicibbHu2HUQkOib/0"}),this.adType?this._controller.game.showReviveSuccess():this._controller.scoreMgr.onLevelUpButton(2)},openBannerAdv:function(){},navToMiniprogram:function(e,t){console.log(t),wx.navigateToMiniProgram({appId:t})},closeBannerAdv:function(){this.bannerAd&&this.bannerAd.hide()}}),cc._RF.pop()},{}],startPage:[function(e,t){"use strict";cc._RF.push(t,"b55a72WBPhBorvnSW4KT5tu","startPage"),cc.Class({extends:cc.Component,properties:{bannerNode:cc.Node,labelNode:cc.Node},start:function(){},onTouched:function(){},showAnimation:function(){var e=this;return new Promise(function(t){var i=cc.scaleTo(.5,0,0).easing(cc.easeBackIn()),o=cc.blink(.5,3);e.bannerNode.runAction(i);var n=cc.sequence(o,cc.callFunc(function(){t()}));e.labelNode.runAction(n)})}}),cc._RF.pop()},{}],successDialog:[function(e,t){"use strict";cc._RF.push(t,"f784aHXFKRDvbVWsOUPoQIK","successDialog"),cc.Class({extends:cc.Component,properties:{nameLabelBefore:cc.Label,nameLabelNow:cc.Label,stepLabel:cc.Label,scoreLabel:cc.Label},init:function(e,t,i,o){this.nameLabelBefore.string=i[t-2].name,this.nameLabelNow.string=i[t-1].name,this.stepLabel.string="+"+i[t-2].step+"\u6b65",this.scoreLabel.string="\u5206\u6570\uff1a"+o}}),cc._RF.pop()},{}],tipBox:[function(e,t){"use strict";cc._RF.push(t,"25720Je1mZOOb7eOx8qoRZt","tipBox"),cc.Class({extends:cc.Component,properties:{label:cc.Label},start:function(){this.tip=["\u4e00\u6b21\u6027\u5927\u91cf\u6d88\u9664\u53ef\u83b7\u5f97\u9053\u5177!","X2\u9053\u5177\u53ef\u4ee5\u7ffb\u500d\u4e00\u6b21\u6d88\u9664\u7684\u5206\u6570","\u70b8\u5f39\u9053\u5177\u53ef\u4ee5\u6d88\u9664\u5168\u5c4f\u540c\u8272\u65b9\u5757","\u5355\u4e2a\u65b9\u5757\u65e0\u6cd5\u6d88\u9664\u54e6","\u6361\u5230\u5b9d\u7bb1\uff01\u52a0\u4e24\u6b65\uff01","\u4ed9\u5973\u68d2\u53ef\u4ee5\u6d88\u9664\u6240\u6709\u5355\u4e2a\u65b9\u5757"],this.otherTip=["\u54ce\u5440\uff0c\u4eca\u5929\u7684\u661f\u661f\u597d\u50cf\u5728\u5bf9\u6211\u7728\u773c\u5462\uff01","\u55b5\uff5e\u65e9\u5b89\uff0c\u53c8\u662f\u5143\u6c14\u6ee1\u6ee1\u7684\u4e00\u5929\uff01","\u563f\u563f\uff0c\u6211\u662f\u4e0d\u662f\u4e16\u754c\u4e0a\u6700\u53ef\u7231\u7684\u5c0f\u4ed9\u5973\u5440\uff1f","\u55ef\u54fc\uff0c\u8981\u4e0d\u8981\u5403\u9897\u7cd6\uff0c\u751c\u751c\u7684\uff0c\u5c31\u50cf\u6211\u4e00\u6837\u3002","\u54ce\u5440\uff0c\u8fd9\u4e2a\u5c0f\u5154\u5b50\u516c\u4ed4\u597d\u50cf\u5728\u8bf4\u5b83\u559c\u6b22\u6211\u5462\uff01","\u563b\u563b\uff0c\u4eca\u5929\u7684\u98ce\u597d\u6e29\u67d4\uff0c\u5c31\u50cf\u4f60\u7684\u62e5\u62b1\u3002","\u55f7\u545c\uff5e\u6211\u997f\u4e86\uff0c\u6211\u4eec\u53bb\u5403\u70b9\u597d\u5403\u7684\u5427\uff01","\u4f60\u770b\uff0c\u90a3\u6735\u4e91\u597d\u50cf\u4e00\u53ea\u5927\u68c9\u82b1\u7cd6\u54e6\uff01","\u6bcf\u4e2a\u5973\u5b69\u5b50\u90fd\u662f\u6389\u843d\u4eba\u95f4\u7684\u5c0f\u5929\u4f7f\uff0c\u8981\u597d\u597d\u7231\u62a4\u81ea\u5df1\u54e6\u3002","\u563f\u563f\uff0c\u6211\u4eca\u5929\u5b66\u4e86\u4e00\u4e2a\u65b0\u9b54\u6cd5\uff0c\u53ef\u4ee5\u53d8\u51fa\u597d\u591a\u5c0f\u661f\u661f\uff01","\u54ce\u5440\uff0c\u6211\u7684\u5c0f\u718a\u997c\u5e72\u597d\u50cf\u5728\u8ddf\u6211\u8bf4\u8bdd\u5462\uff01","\u4f60\u770b\uff0c\u90a3\u4e2a\u5f69\u8679\u5c31\u50cf\u6211\u4eec\u7684\u68a6\u60f3\uff0c\u7eda\u4e3d\u53c8\u9065\u4e0d\u53ef\u53ca","\u563f\u563f\uff0c\u6211\u4eca\u5929\u6361\u5230\u4e86\u4e00\u7247\u56db\u53f6\u8349\uff0c\u5e0c\u671b\u5b83\u80fd\u5e26\u7ed9\u6211\u4eec\u597d\u8fd0\u3002","\u55f7\u55f7\uff0c\u6211\u4eca\u5929\u4e5f\u8981\u52a0\u6cb9\u9e2d\uff01","\u4f60\u770b\uff0c\u90a3\u4e2a\u6708\u4eae\u597d\u50cf\u5728\u5bf9\u6211\u4eec\u5fae\u7b11\u3002","\u55ef\u54fc\uff0c\u6211\u4eca\u5929\u8981\u505a\u4e00\u4e2a\u751c\u751c\u7684\u68a6\u3002","\u563f\u563f\uff0c\u6211\u4eca\u5929\u5b66\u4f1a\u4e86\u4e00\u4e2a\u65b0\u7684\u9b54\u6cd5\uff0c\u53ef\u4ee5\u53d8\u51fa\u597d\u591a\u5c0f\u82b1\u6735\uff01","\u55ef\uff5e\u8fd9\u4e2a\u86cb\u7cd5\u592a\u7f8e\u5473\u4e86\uff0c\u5c31\u50cf\u4f60\u7684\u7b11\u5bb9\u3002","\u9047\u89c1\u4f60\uff0c\u662f\u6211\u4eba\u751f\u4e2d\u6700\u7f8e\u4e3d\u7684\u610f\u5916\u3002","\u4f60\u770b\uff0c\u90a3\u4e2a\u5915\u9633\u597d\u50cf\u5728\u8bf4\u5b83\u4e5f\u820d\u4e0d\u5f97\u4eca\u5929\u7ed3\u675f\u3002"]},init:function(e,t){var i=this;this._score=e,this.label.string=t>0?this.tip[t]:this.otherTip[Math.floor(Math.random()*this.otherTip.length)],this.openTipBox(),this.gapTimer&&clearInterval(this.gapTimer),this.gapTimer=setInterval(function(){i.init(i._score,-1)},5e3)},openTipBox:function(){var e=this;if(!this.isOpen){var t=cc.scaleTo(.3,1).easing(cc.easeBackOut(2)),i=cc.sequence(t,cc.callFunc(function(){e.isOpen=!0}));this.node.runAction(i)}this.closeTimer&&clearTimeout(this.closeTimer),this.closeTimer=setTimeout(function(){e.closeTioBox()},4e3)},closeTioBox:function(){var e=this,t=cc.scaleTo(.3,0),i=cc.sequence(t,cc.callFunc(function(){e.isOpen=!1}));this.node.runAction(i)}}),cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"4e2d6mBW+ZB87giGuk+ow6A","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}],wx111:[function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}cc._RF.push(t,"f33c5v8FmBF47kPNI4VMjKM","wx111");var c={USER_DATA_PATH:""},a=function(){function e(){i(this,e)}return n(e,[{key:"stat",value:function(){return{}}}]),e}(),s=function(){function e(){i(this,e)}return n(e,[{key:"get",value:function(){return new Promise(function(){},function(){})}}]),e}(),r=function(){function e(){i(this,e)}return n(e,[{key:"collection",value:function(){return new s}}]),e}(),l=function(){function e(){i(this,e)}return n(e,[{key:"database",value:function(){return new r}}]),e}(),h=function(){function e(){i(this,e),this.env=c,this.cloud=new l}return n(e,[{key:"createInnerAudioContext",value:function(){return{stop:function(){},play:function(){},onSeeked:function(){}}}},{key:"getSystemInfoSync",value:function(){return{}}},{key:"showShareMenu",value:function(){}},{key:"updateShareMenu",value:function(){}},{key:"onShareAppMessage",value:function(){}},{key:"shareAppMessage",value:function(){}},{key:"createRewardedVideoAd",value:function(){return{onLoad:function(){},onError:function(){},onClose:function(){},load:function(){return new Promise(function(){},function(){})}}}},{key:"vibrateShort",value:function(){}},{key:"createBannerAd",value:function(){return{onLoad:function(){},onResize:function(){},onError:function(){},show:function(){},hide:function(){},destroy:function(){}}}},{key:"getFileSystemManager",value:function(){return this.fs||(this.fs=new a),this.fs}},{key:"login",value:function(){}},{key:"getSystemInfo",value:function(){}},{key:"onShow",value:function(){}},{key:"postMessage",value:function(){}},{key:"request",value:function(){}},{key:"onAudioInterruptionEnd",value:function(){}},{key:"onHide",value:function(){}},{key:"getStorageSync",value:function(){return""}}]),e}();window.wx||(window.wx=new h),cc._RF.pop()},{}]},{},["action","building","cell","character","check","controller","game","musicMgr","pageMgr","pictorial","progress","score","scoreCell","scoreParticle","social","startPage","successDialog","tipBox","wx111","use_v2.0.x_cc.Toggle_event"]);